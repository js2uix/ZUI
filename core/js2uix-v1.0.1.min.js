!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?(module.exports=e(t,!0),t.document||(module.exports=function(t){if(!t.document)throw new Error("js2uix is not support this browser!");return e(t)})):e(t)}("undefined"!=typeof window?window:this,function(u,t){"use strict";var c,i,s,f="js2uix",d=u.document,a=Object.setPrototypeOf,o=Object.getPrototypeOf,r=function(t){var e,i,s,n=[];for(e=0;e<t.length;e++)if(t[e].name===f)for(i=0;i<t[e].length;i++)n.push(t[e][i]);else if(t[e].nodeType)n.push(t[e]);else if("string"==typeof t[e]){var a=t[e],o=h(a);if(o.tagType&&0<o.tagType.length)for(a=c(a),s=0;s<a.length;s++)n.push(a[s]);else a=d.createTextNode(a),n.push(a)}return n},h=function(t){var e=t.replace(/\s/gi,""),i=e.match(/^#|^\./gi),s=t.match(/(<([^>]+)>)/gi),n=t.match(/[`~!@#$%^&*|\\\'\";:\/?]/gi);if(i&&n)for(var a=t.split(" "),o=0;o<a.length;o++){var r=a[o].match(/[`~!@#$%^&*|\\\'\";:\/?]/gi);(!r||1<r.length)&&(i=null)}return{full:e,idClass:i,tagType:s,spType:n}},n=function(){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",e="",i=0;i<8;i++){var s=Math.floor(Math.random()*t.length);e+=t.substring(s,s+1)}return String(Date.now()).substring(0,4)+e},l=(i=u.MutationObserver||u.WebKitMutationObserver,s=u.addEventListener,function(t,e){i?new i(function(t){t.forEach(function(t){e(t)})}).observe(t,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0}):s&&(t.addEventListener("DOMNodeInserted",e,!1),t.addEventListener("DOMNodeRemoved",e,!1))});(c=function(t){return new c.fx.init(t)}).fx=c.prototype={js2uix:"v1.0.1",constructor:c,query:function(t,e){var i=Array.prototype.slice.call(arguments),s=c.extend([],i.shift());s.name=f,a?s=a(s,o(e)):s.__proto__=o(e);for(var n=0;n<s.length;n++)s[n][f]||(s[n][f]={events:{},data:{}});return s}},c.fx.init=function(t){if(!t)return this;if("string"==typeof t){var e,i,s=h(t),n=s.full,a=s.idClass,o=s.tagType,r=s.spType;n&&(1<n.length&&a&&0<a.length?t=d.querySelectorAll(t):!a&&o&&0<o.length?(e=o[0].replace(/^<(.+?)>/g,function(t,e){return e}),1===o.length&&e.indexOf("input")<0?t=[d.createElement(e)]:((i=d.createElement(f)).innerHTML=t,(t=[i])[0].nodeName.toLowerCase()===f&&(t=t[0].childNodes))):t=a||r||o?!a&&1<n.length&&(-1!==r.indexOf(".")||-1!==r.indexOf("#"))?d.querySelectorAll(t):[d.createTextNode(t)]:d.querySelectorAll(t))}else if(t.nodeType)t=[t];else{if(t.name&&t.name===f)return t;if("function"==typeof t)return c.loaded(this,t);t===u&&(t=[u])}return c.fx.query(t,this)},c.fx.init.prototype=c.fx,c.extend=c.fx.extend=function(){var t,e=arguments,i=e[0]||{},s=e.length,n=1;for(i="object"!=typeof i&&"function"!=typeof i?{}:i,n===s&&(i=this,n--);n<s;n++)if(t=e[n])for(var a in t)t.hasOwnProperty(a)&&(i[a]=t[a]);return i},c.extend({typeIs:function(t){return null===t?t+"":"object"==typeof t||"function"==typeof t?Array.isArray(t)?"array":"function"==typeof t?"function":"object":typeof t},isArray:function(t){var e=c.typeIs(t),i=!!t&&"length"in t&&t.length;return(null==t||t!==t.window)&&"function"!==e&&!!("array"===e||0===i||"number"===e&&0<i&&i-1 in t)},isFunction:function(t){return"function"==typeof t},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t}}),c.extend({addId:function(t,e){t&&e&&"string"==typeof e&&(t.id=e)},removeId:function(t,e){t&&e&&"string"==typeof e&&(t.id="")},hasId:function(t,e){var i=!1;return t&&e&&"string"==typeof e&&t.id===e&&(i=!0),i},addClass:function(t,e){if(t&&e&&"string"==typeof e&&0<(e=e.split(" ")).length)for(var i=0;i<e.length;i++)t.classList?t.classList.add(e[i]):t.className+=" "+e},removeClass:function(t,e){t&&e&&"string"==typeof e&&(t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," "))},hasClass:function(t,e){var i=!1;return t&&e&&"string"==typeof e&&(i=t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)),i},setAttr:function(t,e,i){if(t&&e&&i&&"string"==typeof e&&"string"==typeof i)t.setAttribute(e,i);else if("object"==typeof e)for(var s in e)t.setAttribute(s,e[s])},removeAttr:function(t,e){t&&e&&"string"==typeof e&&t.removeAttribute(e)},getAttr:function(t,e){if(t){if(e&&"string"==typeof e)return t.getAttribute(e)||void 0;if(!e)return t.attributes}}}),c.fx.extend({addId:function(t){return c.addId(this[0],t),this},removeId:function(t){return c.removeId(this[0],t),this},hasId:function(t){return c.hasId(this[0],t)},addClass:function(t){for(var e=0;e<this.length;e++)c.addClass(this[e],t);return this},removeClass:function(t){for(var e=0;e<this.length;e++)c.removeClass(this[e],t);return this},hasClass:function(t){return c.hasClass(this[0],t)},setAttr:function(t,e){for(var i=0;i<this.length;i++)c.setAttr(this[i],t,e);return this},removeAttr:function(t){for(var e=0;e<this.length;e++)c.removeAttr(this[e],t);return this},getAttr:function(t){if(0!==this.length)return c.getAttr(this[0],t)},index:function(){if(0<this.length)for(var t=this[0].parentNode.children,e=0;e<t.length;e++)if(this[0]===t[e])return e}}),c.extend({loop:function(t,e){var i,s=0;if(c.isArray(t))for(i=t.length;s<i&&!1!==e.call(t[s],s,t[s]);s++);else for(s in t)if(!1===e.call(t[s],s,t[s]))break;return t},map:function(t,e){var i,s=0,n=c.isArray(t)?[]:{};if(c.extend(n,t,!0),c.isArray(t))for(i=t.length;s<i;s++)void 0!==e(s,t[s])&&(n[s]=e(s,t[s]));else for(s in t)void 0!==e(s,t[s])&&(n[s]=e(s,t[s]));return n},loaded:function(t,e){return"object"==typeof t&&t.hasOwnProperty("name")&&t.name===f&&-1===["document","window","html","body"].indexOf(t[0].nodeName.toLowerCase())&&(t=t[t.length-1],e=e.bind(t)),(d.attachEvent?"complete"===d.readyState:"loading"!==d.readyState)?e():d.addEventListener("DOMContentLoaded",e),c(t)},createDom:function(){var t,e,i=arguments,s=i[0],n=i[1],a=i[2];if(s&&"string"==typeof s&&(t=d.createElement(s),e=c(t),n&&"object"==typeof n))for(var o in n){var r=n[o];if("className"===o&&c.addClass(t,r),"idName"===o&&c.addId(t,r),"attributes"===o&&"object"==typeof r)for(var h in r)c.setAttr(t,h,r[h]);"styles"===o&&"object"==typeof r&&e.css(r),"content"===o&&e.html(r)}return Boolean(a),a?c(t):t},uiComponent:new function(){return this.module={},this.setModule=function(t,e){this.module[t]=e},this.getModule=function(t){return setTimeout(function(){delete this.module[t]}.bind(this),1e3),this.module[t]},{setModule:this.setModule.bind(this),getModule:this.getModule.bind(this)}}}),c.fx.extend({loop:function(t){return c.loop(this,t)},loaded:function(t){t&&"function"==typeof t&&c.loaded(this,t)},find:function(t){var e=[];return t&&"string"==typeof t&&(e=this[0].querySelectorAll(t)),c(e)},parent:function(t){var e=[];if(t&&"string"==typeof t){var i,s=this[0].parentNode.parentNode;if(s){i=s.querySelectorAll(t);for(var n=0;n<i.length;n++)this[0].parentNode===i[n]&&e.push(i[n])}}else e=this[0].parentNode;return c(e)},parents:function(t){var e=[];if(t&&"string"==typeof t){var i=this[0].parentNode;if(t.match(/^#|^\./gi))for(;i&&"html"!==i.nodeName.toLowerCase();){var s=t.substr(1,t.length);if(c.hasClass(i,s)||c.hasId(i,s)){e=i;break}i=i.parentNode}else for(;i&&"html"!==i.nodeName.toLowerCase();){if(i.nodeName.toLowerCase()===t){e=i;break}i=i.parentNode}}return c(e)},hasParents:function(t){var e=!1;if(t&&"string"==typeof t){var i=this[0].parentNode;if(t.match(/^#|^\./gi))for(;i&&"html"!==i.nodeName.toLowerCase();){var s=t.substr(1,t.length);if(c.hasClass(i,s)||c.hasId(i,s)){e=!0;break}i=i.parentNode}}return e},children:function(t){var e,i=[],s=this[0].children;if(t&&"string"==typeof t){var n=t.substr(1,t.length);for(e=0;e<s.length;e++)(c.hasClass(s[e],n)||c.hasId(s[e],n))&&i.push(s[e])}else if(!t)for(e=0;e<s.length;e++)i.push(s[e]);return c(i)},hasChild:function(t){return 0<this.find(t).length&&t&&"string"==typeof t},nextNode:function(){return 0<this.length&&this[0].nextElementSibling?c(this[0].nextElementSibling):this},prevNode:function(){return 0<this.length&&this[0].previousElementSibling?c(this[0].previousElementSibling):this},firstNode:function(){return this.length<2?this:c(this[0])},lastINode:function(){return this.length<2?this:c(this[this.length-1])},siblingNodes:function(){if(0<this.length){for(var t=this[0],e=t.parentNode.childNodes,i=[],s=0;s<e.length;s++)t!==e[s]&&i.push(e[s]);try{return c(i)}finally{i=e=null}}},append:function(){var t=arguments;if(0<t.length){var e,i=r(t);for(e=0;e<i.length;e++)this[0].appendChild(i[e])}return this},prepend:function(){var t=arguments;if(0<t.length){var e,i,s=r(t);for(e=0;e<s.length;e++)(i=this[0].firstChild)?this[0].insertBefore(s[e],i):this[0].appendChild(s[e])}return this},after:function(){var t=arguments;if(0<t.length){var e,i=this[0].parentNode,s=r(t),n=this[0].nextSibling;for(e=0;e<s.length;e++)n?i.insertBefore(s[e],n):i.appendChild(s[e]),n=n?n.nextSibling:null}return this},before:function(){var t=arguments;if(0<t.length){var e,i=this[0].parentNode,s=r(t);for(e=0;e<s.length;e++)i.insertBefore(s[e],this[0])}return this},html:function(t){if(0<this.length){for(var e=0;e<this.length;e++)this[e].innerHTML="";t&&this.append(t)}return this},text:function(t){if(0<this.length){if(!t&&""!==t)return this[0].innerText;if("string"==typeof t||""===t)for(var e=0;e<this.length;e++)this[e].innerText=t}return this},empty:function(){this.html()},replace:function(t){var e=this,i=this[0],s=i.parentNode;if(t&&("string"==typeof t||"object"==typeof t)){if("string"==typeof t){var n=h(t);e=n.idClass||n.spType||n.tagType?c(t):c(d.createTextNode(t))}else t.name&&t.name===f?e=t:t.nodeName&&(e=c[t]);c(i).after(e),s.removeChild(i)}return e},remove:function(){for(var t=this.length-1;0<=t;t--){var e=this[t];if(e){var i=this[t].parentNode;i&&i.removeChild(e)}}}});var p=function(t,e){var i,s,n,a="",o=t.replace(/^-/gi,"").split("-");for(i=0;i<o.length;i++)a+=0===i?o[i]:o[i].charAt(0).toUpperCase()+o[i].slice(1);"zIndex"===a||"opacity"===a||isNaN(parseInt(e))||(s="string"==typeof e&&-1!==e.indexOf("%")?"%":"px",e=parseInt(e)+s),n=[a,e];try{return n}finally{o=a=n=null}},e=function(t,e,i){return 0===i||"number"==typeof i?(t.css(e,i),this):i&&null!==i?void 0:t.css(e)};c.fx.extend({css:function(){var t=arguments,e=t.length;if(t&&0<e&&e<=2){var i=[];if(1===e&&"string"==typeof t[0]){if(this[0]!==d&&this[0]!==u){var s=u.getComputedStyle(this[0],null).getPropertyValue(t[0])||this[0].style[t[0]];return isNaN(parseInt(s))?s:parseInt(s)}}else if(1===e&&"object"==typeof t[0])for(var n in t[0])i.push(p(n,t[0][n]));else 2!==e||"string"!=typeof t[0]||"string"!=typeof t[1]&&"number"!=typeof t[1]||i.push(p(t[0],t[1]));for(var a=0;a<this.length;a++)for(var o=0;o<i.length;o++)this[a].style[i[o][0]]=i[o][1]}return this},top:function(t){return e(this,"top",t)},left:function(t){return e(this,"left",t)},width:function(t){return e(this,"width",t)},height:function(t){return e(this,"height",t)},offset:function(){if(this[0]){var t=this[0].getBoundingClientRect(),e={x:t.x,y:t.y,top:t.top,bottom:t.bottom,left:t.left,right:t.right,width:t.width,height:t.height,paddingL:this.css("padding-left"),paddingR:this.css("padding-right"),paddingT:this.css("padding-top"),paddingB:this.css("padding-bottom")};return this[0].getClientRects().length?e:void 0}},fadeIn:function(s,n){return c.loop(this,function(){var e=this;e.style.display="block",e.style.opacity=0;var i=+new Date;!function t(){e.style.opacity=+e.style.opacity+(new Date-i)/(300|s),i=+new Date,+e.style.opacity<1&&(u.requestAnimationFrame?requestAnimationFrame(t):setTimeout(t,16)),1<+e.style.opacity&&(e.style.opacity=1,"function"==typeof n&&n())}()}),this},fadeOut:function(s,n){return c.loop(this,function(){var e=this,i=+new Date;e.style.opacity=1,function t(){e.style.opacity=+e.style.opacity-(new Date-i)/(s||500),i=+new Date,0<+e.style.opacity&&(u.requestAnimationFrame?requestAnimationFrame(t):setTimeout(t,16)),+e.style.opacity<.1&&(e.style.display="none",e.style.opacity=0,"function"==typeof n&&n())}()}),this}});var m=function(t,e){var i=e[0].split("."),s=i[1];c.loop(t,function(){var t=i[0];this[f].events[t]||(this[f].events[t]=[]),this.addEventListener(i[0],e[e.length-1],!1),this[f].events[t].push({eventName:t,eventKey:s||null,handler:e[e.length-1]})})},g=function(i,s){var e=s[0],n=s[1],a=s[2];e&&n&&a&&c.loop(i,function(){var t=c(this).find(n);0<t.length&&(t.removeEvent(e,a),m(t,s),l(this,function(t){if("childList"===t.type||"attributes"===t.type)for(var e=0;e<t.addedNodes.length;e++){1===t.addedNodes[e].nodeType&&g(i,s)}}))})},x=function(t,u){c.loop(t,function(){var t,e,i=this[f].events;if(u){var s,n=u.length,a=u[0],o=u[u.length-1],r=u[0].split("."),h=r[0],d=r[1]||null;if(1===n&&"string"==typeof a){if("all"===h||"js2uix_only"===d)for(var l in i)for(e=0;e<i[l].length;e++)s=i[l][e],this.removeEventListener(l,s.handler),s.removed=!0;else if(i[h])for(e=0;e<i[h].length;e++)(s=i[h][e]).eventKey===d&&(this.removeEventListener(h,i[h][e].handler),i[h][e].removed=!0)}else if(2===n&&"string"==typeof a&&("function"==typeof o||"object"==typeof o)&&i[h])for(e=0;e<i[h].length;e++)(s=i[h][e]).eventKey===d&&o===i[h][e].handler&&(this.removeEventListener(h,i[h][e].handler),i[h][e].removed=!0)}else for(t in i)for(e=0;e<i[t].length;e++)this.removeEventListener(t,i[t][e].handler),i[t][e].removed=!0}),c.loop(t,function(){var t,e,i=this[f].events;for(t in i)for(e=i[t].length-1;0<=e;e--)i[t][e].removed&&i[t].splice(e,1)})};c.fx.extend({addEvent:function(){var t=arguments,e=t.length;if(0<e){var i=typeof t[0],s=typeof t[t.length-1];if("object"===i)for(var n in t[0])1===t.length?m(this,[n,t[0][n]]):2===t.length&&"string"==typeof s&&g(this,[n,t[1],t[0][n]]);else"string"!==i||"function"!==s&&"object"!==s||(2===e?m(this,t):3===e&&g(this,t))}return this},removeEvent:function(){var t=arguments;return t.length<1?x(this):x(this,t),this}});var y=function(t,e){this._target=t,this._onceMemory={success:null,error:!1},this._init(this._target,e)};(y.prototype={_xhr:function(){try{return new u.XMLHttpRequest}catch(t){throw error}},_setDataType:function(t){var e=t.url.split("."),i=e[e.length-1].match(/xml|html|json|js|jsp|asp|php|txt/gi);return i[0]?i[0]&&i[0]!==t.dataType?("js"===i[0]&&(i[0]="script"),i[0]):void 0:"text"},_getOptionObject:function(t,e){var i={url:document.location.href,method:"POST",data:null,async:!0,cache:!0,success:null,error:null,upload:!1,jsonParse:!0,dataType:"json",contentType:"application/x-www-form-urlencoded; charset=UTF-8"};if((i=c.extend(i,e)).dataType=this._setDataType(e)||i.dataType,t&&(i.type="POST",i.upload=!0,i.url=i.url+"?upload"),!1===e.cache){var s="?";-1!==e.url.indexOf("?")&&(s="&"),e.url=e.url+s+"cache"+Date.now()}return i},_getQueryString:function(t){var i=[];return"object"==typeof t&&c.loop(t,function(t,e){i.push(t+"="+e)}),i.join("&")},_setUploadHandler:function(t,n){t.upload.addEventListener("progress",function(t){var e=0,i=t.loaded||t.position,s=t.total;t.lengthComputable&&(e=Math.ceil(i/s*100)),n.progress&&"function"==typeof n.progress&&n.progress(e)},!1)},_setJsonParseData:function(t,e){var i=e,s=t.dataType;if("script"===s){var n=document.createElement("script");n.type="text/javascript",n.text=i,document.head.appendChild(n).parentNode.removeChild(n),i=n.text}else if("xml"===s||"html"===s){i=(new DOMParser).parseFromString(i,"text/"+s)}else{if("text"===s||"txt"===s)return i;i=t.jsonParse&&JSON.parse(i)||i}return i},_loadAjaxRequest:function(i,t){var s=this,n=this._xhr();n.open(i.method,i.url,i.async),i.data&&!i.upload&&n.setRequestHeader("Content-type",i.contentType),n.upload&&i.upload&&this._setUploadHandler(n,i),n.onload=function(t){if(200<=n.status&&n.status<400&&4==n.readyState){var e=n.responseText;i.success&&"function"==typeof i.success&&(e=s._setJsonParseData(i,e),i.success(e,n.responseText,n),s._onceMemory.error=!1,s._onceMemory.success={value:e,responseText:n.responseText,request:n})}else i.error&&"function"==typeof i.success&&(i.error(),s._onceMemory.error=!0,s._onceMemory.success=null)},n.onerror=function(){i.error&&"function"==typeof i.success&&(i.error(),s._onceMemory.error=!0,s._onceMemory.success=null)},n.send(t)},_setAjaxData:function(t,e){var i;if(e=this._getOptionObject(t,e),t){var s=t[0].querySelectorAll("input[type=file]"),n=t.find("*").not("input[type=file]"),a=0;if(t.attr("enctype","multipart/form-data"),i=new FormData,c.loop(s,function(){var t=this.files;c.loop(t,function(t,e){i.append(t,e),a++})}),c.loop(n,function(){i.append(this.name,this.value),a++}),0===a)return!1}t||(i=this._getQueryString(e.data)),this._loadAjaxRequest(e,i)},_init:function(t,e){if(t&&(!t[0]||"form"!==t[0].nodeName.toLowerCase()))return!1;this._setAjaxData(t,e)},done:function(t){if("function"==typeof t&&!this._onceMemory.error){var e=this._onceMemory.success;try{t(e.value,e.responseText,e.request)}finally{e=null,this._onceMemory.success=null}}},fail:function(t){if("function"==typeof t&&0===this._onceMemory.success.length)try{t()}finally{this._onceMemory.error=!1}}}).constructor=y;var v=function(){return this.location=null,this.hash=null,this.router={},this.setRouter=function(){var t=arguments,e=1<t.length?t[0]:null,i=1<t.length?t[1]:null;if(1===t.length&&(e="/all",i=t[0]),e&&0===e.indexOf("/")){var s=e.substr(1,e.length-1),n=s||"index";this.router[n]=i}},this.getHash=function(){var t=(this.location=u.location).hash,e="index";return t&&0===t.indexOf("#")&&(e=t.substr(2,t.length-1)),this.hash=e},this.checkRouter=function(){var t=this.getHash(),e={location:this.location,urlString:this.hash};"function"==typeof this.router.all&&this.router.all(e),"function"==typeof this.router[t]&&this.router[t](e)},this.setControl=function(){u.addEventListener("load",this.checkRouter.bind(this)),u.addEventListener("hashchange",this.checkRouter.bind(this))},this.init=function(){this.getHash(),this.setControl()},this.init(),{on:this.setRouter.bind(this)}},C=function(t){this.state={},this.props={},this.domState={parent:null,render:null,virtual:null,isMount:!1,uniqueId:Date.now()},t.super&&t.super.call(this),Object.defineProperty(this,"state",{writable:!1})};C.prototype={setState:function(t,e){t&&"object"==typeof t&&!Array.isArray(t)?c.loop(t,function(t,e){this.state[t]=e}.bind(this)):t&&e&&"string"==typeof t&&(this.state[t]=e),this.setUpdateState()},setUpdateState:function(){this.setRender(),"function"==typeof this.onStateWillChange&&this.onStateWillChange()},setProps:function(t){t&&"object"==typeof t&&!Array.isArray(t)&&c.loop(t,function(t,e){this.props[t]=e}.bind(this)),"function"==typeof this.onPropsWillChange&&this.onPropsWillChange()},setPropsState:function(t){return this.setProps(t),this.setRender(t)},setRender:function(){if(this.render&&"function"==typeof this.render){var t=c(this.render());if(this.setForceUpdate(t),t&&this.domState.virtual)return{$$Dom:this.domState.virtual,props:this.setPropsState.bind(this),setRenderState:this.setRenderState.bind(this)}}},setRenderState:function(t){c.loop(t,function(t,e){this.domState[t]=e}.bind(this))},setForceUpdate:function(t){if(this.render&&"function"==typeof this.render&&t&&t[0]&&(t[0][f].componentId=f+this.domState.uniqueId,this.domState.virtual=t[0],this.domState.render||(this.domState.render=t[0]),this.domState.isMount)){var e=this.domState.render,i=this.domState.virtual,u=function(t,e,i){t.insertBefore(e,i)},l=function(r,t,h,d){var l=[];c.loop(t,function(t){var e,i=h[t];if(i){var s=this.nodeName,n=this.nodeType,a=i.nodeName,o=i.nodeType;a===s&&o===n||(d?(e=this.cloneNode(!0),this.parentNode.insertBefore(e,this),u(r,this,i)):l.push(this))}else d?(e=this.cloneNode(!0),this.parentNode.insertBefore(e,this),u(r,this,i)):l.push(this)}),0<l.length&&c.loop(l,function(){var t,e;t=this.parentNode,(e=this)&&t.removeChild(e)})},p=function(t,e){if(1===t.nodeType&&1===e.nodeType){for(var i=t.nodeName.toLowerCase(),s=e.nodeName.toLowerCase(),n=t.childNodes,a=e.childNodes,o=e.attributes,r=0;r<o.length;r++)t.setAttribute(o[r].name,o[r].value);if(("input"===i&&"input"===s||"textarea"===i&&"textarea"===s||"select"===i&&"select"===s)&&(t.value!==e.value&&(t.value=e.value),"password"!==t.type&&"textarea"!==i||t.removeAttribute("value")),n&&a){if(a.length!==n.length)return a.length>n.length?l(t,a,n,!0):l(t,n,a,!1),p(t,e),!1;for(var h=0;h<a.length;h++){var d=a[h][f];d&&""!==d&&d.componentId||p(n[h],a[h])}}}else 3===t.nodeType&&3===e.nodeType&&t.textContent!==e.textContent&&(t.textContent=e.textContent)};p(e,i)}}},c.extend({Ajax:function(t){return new y(null,t)},AjaxDownLoad:function(t,e,i){var s=t[t.length-1],a=0,o=null;function r(t,e,i,s){var n=document.createElement("a");n.href=t+e+"."+i,n.download=e+"."+i,document.body.appendChild(n),n.click(),document.body.removeChild(n),a++,s&&a<o.length&&setTimeout(function(){r(o[a].link,o[a].name,o[a].type,s)},s)}"object"==typeof t||Array.isArray(t)?s&&"number"==typeof s?r((o=t)[a].link,o[a].name,o[a].type,s):c.loop(t,function(t,e){e&&e.link&&e.name&&e.type&&r(e.link,e.name,e.type,!1)}):r(t,e,i,!1)},Component:function(t){var e,i=function(t){return C.call(this,t),this.setRender.call(this)};for(e in(i.prototype=Object.create(C.prototype)).constructor=i,t)t.hasOwnProperty(e)&&"super"!==e&&(i.prototype[e]=t[e]);return new i(t)},Export:function(t,e){c.uiComponent.setModule(t,e)},Import:function(t){return c.uiComponent.getModule(t)},Render:function(){var t=arguments;if(t&&1<t.length)for(var e=c(t[t.length-1])[0],i=0;i<t.length-1;i++){var s=t[i],n=s.$$Dom;n&&e&&(c(e).append(n),s.setRenderState({parent:e,render:n,isMount:!0}))}},Router:function(){return new v}}),c.fx.extend({AjaxFrom:function(t){return new y(this,t)}});var b=c("html"),N=function(t,e){return this.d3={},this.nodes={},this.target=t,this.props={chartType:"",nameAxisX:"",typeAxisX:"string",timeAxisX:["week",1],timeFormat:"%Y-%m-%d",tickAxisY:10,tickGridY:10,tickGridOpacity:.2,tickGridDashNum:2,rotateAxisX:0,posXAxisX:10,posYAxisX:10,fontSizeX:11,fontSizeY:11,fontSizeTitle:12,nameAxisY:"",typeAxisY:"number",title:"",titleBox:!0,lineCurve:!0,colorful:!0,colorAlpha:1,circleThickNum:.5,layoutW:0,layoutH:0,duration:200,gridLine:!0,groupInfoBox:!0,shadeColor:""},this.state={autoMode:!1,clear:!1,colorArray:["#add5d7","#47acb1","#ffe8af","#ffcd33","#f9aa7b","#f26522","#7fb6ff","#7876ff","#a5a8aa","#676766"],dataLength:0,idName:"",max_width:1740,min_width:300,min_height:200,resize:!1,uniqueId:"",uniqueName:"",update:!1},this.axis=null,this.init(e),{name:"js2uix-d3-chart",setData:this.setData.bind(this)}};(N.prototype={uiChartClass:"js2uix-d3",renderChartDefaultSetting:function(t){0<t.length&&(this.state.uniqueId=n(),this.state.uniqueName="js2uix"+this.state.uniqueId,t.addClass(this.uiChartClass),t[0].id||t.addId(f+this.state.uniqueId),this.state.idName=t.getAttr("id"))},setUserShadeColorSetting:function(t){if(t){for(var e=t.replace("#",""),i=parseInt(e.substring(0,2),16),s=parseInt(e.substring(2,4),16),n=parseInt(e.substring(4,6),16),a=255/(10*Math.max(i,Math.max(s,n))),o=[],r=2;r<12;r++)o.push((h=(h="rgb("+parseInt(i*a*r)+","+parseInt(s*a*r)+","+parseInt(n*a*r)+",1)").match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===h.length?"#"+("0"+parseInt(h[1],10).toString(16)).slice(-2)+("0"+parseInt(h[2],10).toString(16)).slice(-2)+("0"+parseInt(h[3],10).toString(16)).slice(-2):"");0<o.length&&(this.state.colorArray=o)}var h},setCommonChartInfoString:function(t){var e="Max",i=this.props.fontSizeTitle;this.props.titleBox&&("number"!=typeof i&&(i=12),this.axis.axis_string&&(e=this.axis.axis_string),"basic"===t?this.nodes.title_g.attr("transform","rotate(-0)").attr("dx","0em").attr("y",-20).attr("dy","0.7em").attr("text-anchor","start").attr("fill","#000").attr("style","font-size:"+i+"px").text(e):this.nodes.title_g.attr("transform","rotate(-0)").attr("y",-5).attr("dy","0.71em").attr("text-anchor","middle").attr("fill","#000").attr("style","font-size:"+i+"px").text(e))},setCommonChartAxisYNode:function(){var t=this.props.fontSizeY;"number"!=typeof t&&(t=11),this.state.update?this.nodes.axisY_g.call(u.d3.axisLeft(this.d3.y).ticks(this.axis.tickAxisY)):this.nodes.axisY_g.call(u.d3.axisLeft(this.d3.y).ticks(this.axis.tickAxisY)).attr("style","font-size:"+t+"px")},setCommonChartAxisXNode:function(){var t=10,e=20,i=0,s=this.props.fontSizeX,n=this.nodes.axisX_g.attr("transform","translate(0,"+this.d3.height+")").selectAll("text").style("text-anchor","middle");"number"!=typeof this.axis.posXAxisX||void 0===this.axis.posXAxisX&&null===this.axis.posXAxisX||(t=this.axis.posXAxisX,n.attr("dx",t+"px")),"number"!=typeof this.axis.posYAxisX||void 0===this.axis.posYAxisX&&null===this.axis.posYAxisX||(e=this.axis.posYAxisX,n.attr("dy",e+"px")),"number"!=typeof this.axis.rotateAxisX||void 0===this.axis.rotateAxisX&&null===this.axis.rotateAxisX||(i=this.axis.rotateAxisX,n.attr("transform","rotate(-"+i+")")),"number"!=typeof s&&(s=11),this.nodes.axisX_g.attr("style","font-size:"+s+"px")},setCommonChartAxisXYGrid:function(){this.props.gridLine&&(this.state.update||this.nodes.gridX_g.call(u.d3.axisBottom(this.d3.x).tickSize(-this.d3.height,0,0).tickFormat("")),this.nodes.gridY_g.call(u.d3.axisLeft(this.d3.y).ticks(this.axis.tickGridY).tickSize(-this.d3.width,0,0).tickFormat("")))},setCommonCompareInfo:function(t,e,i){if(!this.props.groupInfoBox)return!1;var s=t.g.append("g").attr("font-family","sans-serif").attr("text-anchor","end").selectAll("g").data(e).enter().append("g").attr("transform",function(t,e){return"translate(0,"+(20*e-30)+")"});try{s.append("rect").attr("x",t.width-0).attr("width",19).attr("height",19).attr("fill",function(t){return i(t)}),s.append("text").attr("style","font-size:12px").attr("x",t.width-5).attr("y",9.5).attr("dy","0.32em").text(function(t){return t}),s.exit().remove()}finally{e=t=null}},js2uixSingleAreaType:function(t){var e="axisX",i="axisY",s=t.map(function(t){return{axisX:t[this.axis.axisX],axisY:t[this.axis.axisY]}}.bind(this)),n=u.d3.extent(s.map(function(t){return t[e]}),function(t){return new Date(t)}),a=u.d3.extent(s.map(function(t){return t[i]}),function(t){return parseInt(t)});try{if(this.state.d3_area||(this.state.d3_area=d3.area()),this.props.lineCurve&&this.state.d3_area.curve(u.d3.curveBasis),"date"===this.axis.typeAxisX?(this.d3.x=u.d3.scaleTime().domain([new Date(n[0]),new Date(n[1])]).rangeRound([0,this.d3.width]),this.state.d3_area.x(function(t){return this.d3.x(new Date(t[e]))}.bind(this))):(this.d3.x=u.d3.scaleBand().domain(s.map(function(t){return t[e]})).rangeRound([0,this.d3.width]),this.state.d3_area.x(function(t){return this.d3.x(t[e])+.5*this.d3.x.bandwidth()}.bind(this))),this.d3.y=u.d3.scaleLinear().domain([0,a[1]]).rangeRound([this.d3.height,0]),this.state.d3_area.y(function(t){return this.d3.y(t[i])}.bind(this)),this.state.d3_area.y1(function(t){return this.d3.y(t[i])}.bind(this)),this.state.d3_area.y0(this.d3.y(0)),!this.state.update){var o=u.d3.scaleOrdinal().range(this.state.colorArray),r=u.d3.timeFormat(this.axis.timeFormat);this.nodes.gridX_g=this.d3.g.append("g").attr("class","grid_x").attr("transform","translate(0,"+this.d3.height+")").attr("opacity",this.props.tickGridOpacity),this.nodes.gridY_g=this.d3.g.append("g").attr("class","grid_y").attr("opacity",this.props.tickGridOpacity),this.nodes.pathArea=this.d3.g.append("path").attr("class","area").style("fill",o).attr("fill-opacity",this.props.colorAlpha),this.nodes.axisX_g=this.d3.g.append("g").attr("class","axis axis--x"),this.nodes.axisY_g=this.d3.g.append("g").attr("class","axis axis--y"),this.nodes.title_g=this.d3.g.append("g").attr("class","title").append("text"),"date"===this.axis.typeAxisX?this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x).ticks(u.d3[this.axis.timeAxisX[0]].every(this.axis.timeAxisX[1])).tickFormat(function(t){return r(t)})):this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x)),this.setCommonChartInfoString("basic"),this.setCommonChartAxisXNode()}this.nodes.pathArea.datum(s).transition().duration(this.props.duration).attr("d",this.state.d3_area),this.nodes.pathArea.exit().remove(),this.setCommonChartAxisYNode(),this.setCommonChartAxisXYGrid()}finally{s=t=null}},js2uixCompareAreaType:function(t){var i=this,e="axisX",s="axisY",n=0,a=[],o=t[Object.keys(t)[0]].map(function(t){return t[this.axis.axisX]}.bind(this)),r=u.d3.extent(o,function(t){return new Date(t)}),h=t;try{if(this.state.d3_area||(this.state.d3_area=u.d3.area()),this.state.d3_line||(this.state.d3_line=u.d3.line()),this.props.lineCurve&&(this.state.d3_area.curve(u.d3.curveBasis),this.state.d3_line.curve(u.d3.curveBasis)),Array.isArray(t)||(h=[],c.loop(t,function(t,e){var i=this;h.push(e.map(function(t){return{axisX:t[i.axis.axisX],axisY:t[i.axis.axisY]}}))}.bind(this))),c.loop(t,function(t,e){var i=this,s=u.d3.max(e,function(t){return t[i.axis.axisY]});n<s&&(n=s+.2*s),a.push(t)}.bind(this)),"date"===this.axis.typeAxisX?(this.d3.x=u.d3.scaleTime().domain([new Date(r[0]),new Date(r[1])]).rangeRound([0,this.d3.width]),this.state.d3_area.x(function(t){return this.d3.x(new Date(t[e]))}.bind(this)),this.state.d3_line.x(function(t){return this.d3.x(new Date(t[e]))}.bind(this))):(this.d3.x=u.d3.scaleBand().domain(o).rangeRound([0,this.d3.width]),this.state.d3_area.x(function(t){return this.d3.x(t[e])+.5*this.d3.x.bandwidth()}.bind(this)),this.state.d3_line.x(function(t){return this.d3.x(t[e])+.5*this.d3.x.bandwidth()}.bind(this))),this.state.d3_area.y(function(t){return this.d3.y(t[s])}.bind(this)),this.state.d3_line.y(function(t){return this.d3.y(t[s])}.bind(this)),this.d3.y=u.d3.scaleLinear().domain([0,n]).rangeRound([this.d3.height,0]),this.state.d3_area.y1(function(t){return this.d3.y(t[s])}.bind(this)),this.state.d3_area.y0(this.d3.y(0)),this.state.update)this.nodes.pathNode=this.nodes.pathNode.data(h),this.nodes.lineNode=this.nodes.lineNode.data(h);else{var d=u.d3.scaleOrdinal().range(this.state.colorArray),l=u.d3.timeFormat(this.axis.timeFormat);this.nodes.gridX_g=this.d3.g.append("g").attr("class","grid_x").attr("transform","translate(0,"+this.d3.height+")").attr("opacity",this.props.tickGridOpacity),this.nodes.gridY_g=this.d3.g.append("g").attr("class","grid_y").attr("opacity",this.props.tickGridOpacity),this.d3.g.append("g").attr("class","pathBox").selectAll("path").data(h,function(t,e){u.d3.select(this).append("path").attr("class","area").attr("fill-opacity",i.props.colorAlpha).attr("fill",function(){return d(a[e])}),u.d3.select(this).append("path").attr("class","line").attr("stroke-width","1.5").attr("fill","none").attr("stroke",function(){return d(a[e])})}),this.nodes.axisX_g=this.d3.g.append("g").attr("class","axis axis--x"),this.nodes.axisY_g=this.d3.g.append("g").attr("class","axis axis--y"),this.nodes.title_g=this.d3.g.append("g").attr("class","title").append("text"),this.nodes.pathNode=this.d3.g.select("g.pathBox").selectAll("path.area").data(h),this.nodes.lineNode=this.d3.g.select("g.pathBox").selectAll("path.line").data(h),"date"===this.axis.typeAxisX?this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x).ticks(u.d3[this.axis.timeAxisX[0]].every(this.axis.timeAxisX[1])).tickFormat(function(t){return l(t)})):this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x)),this.setCommonCompareInfo(this.d3,a,d),this.setCommonChartInfoString("basic"),this.setCommonChartAxisXNode()}this.nodes.pathNode.transition().duration(this.props.duration).attr("d",this.state.d3_area),this.nodes.lineNode.transition().duration(this.props.duration).attr("d",this.state.d3_line),this.nodes.pathNode.exit().remove(),this.nodes.lineNode.exit().remove(),this.setCommonChartAxisYNode(),this.setCommonChartAxisXYGrid()}finally{h=t=null}},js2uixSingleLineType:function(t){var e="axisX",i=t.map(function(t){return{axisX:t[this.axis.axisX],axisY:t[this.axis.axisY]}}.bind(this)),s=u.d3.extent(i.map(function(t){return t[e]}),function(t){return new Date(t)}),n=u.d3.extent(i.map(function(t){return t.axisY}),function(t){return parseInt(t)});try{if(this.state.d3_line||(this.state.d3_line=u.d3.line()),this.props.lineCurve&&this.state.d3_line.curve(u.d3.curveBasis),"date"===this.axis.typeAxisX?(this.d3.x=u.d3.scaleTime().domain([new Date(s[0]),new Date(s[1])]).rangeRound([0,this.d3.width]),this.state.d3_line.x(function(t){return this.d3.x(new Date(t[e]))}.bind(this))):(this.d3.x=u.d3.scaleBand().domain(i.map(function(t){return t[e]})).rangeRound([0,this.d3.width]),this.state.d3_line.x(function(t){return this.d3.x(t[e])+.5*this.d3.x.bandwidth()}.bind(this))),this.d3.y=u.d3.scaleLinear().domain([0,n[1]]).rangeRound([this.d3.height,0]),this.state.d3_line.y(function(t){return this.d3.y(t.axisY)}.bind(this)),!this.state.update){var a=u.d3.scaleOrdinal().range(this.state.colorArray),o=u.d3.timeFormat(this.axis.timeFormat);this.nodes.gridX_g=this.d3.g.append("g").attr("class","grid_x").attr("transform","translate(0,"+this.d3.height+")").attr("opacity",this.props.tickGridOpacity),this.nodes.gridY_g=this.d3.g.append("g").attr("class","grid_y").attr("opacity",this.props.tickGridOpacity),this.nodes.axisX_g=this.d3.g.append("g").attr("class","axis axis--x"),this.nodes.axisY_g=this.d3.g.append("g").attr("class","axis axis--y"),this.nodes.title_g=this.d3.g.append("g").attr("class","title").append("text"),this.nodes.pathArea=this.d3.g.append("path").attr("class","line").attr("stroke",a).attr("stroke-width","1.5").attr("fill","none"),"date"===this.axis.typeAxisX?this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x).ticks(u.d3[this.axis.timeAxisX[0]].every(this.axis.timeAxisX[1])).tickFormat(function(t){return o(t)})):this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x)),this.setCommonChartInfoString("basic"),this.setCommonChartAxisXNode()}this.nodes.pathArea.datum(i).transition().duration(this.props.duration).attr("d",this.state.d3_line),this.nodes.pathArea.exit().remove(),this.setCommonChartAxisYNode(),this.setCommonChartAxisXYGrid()}finally{i=t=null}},js2uixCompareLineType:function(t){var e,n=0,i=t[Object.keys(t)[0]].map(function(t){return t[this.axis.axisX]}.bind(this)),s=u.d3.extent(i,function(t){return new Date(t)}),a=[],o=t;try{if(this.state.d3_line||(this.state.d3_line=u.d3.line()),this.props.lineCurve&&this.state.d3_line.curve(u.d3.curveBasis),Array.isArray(t)||(o=[],c.loop(t,function(t,e){var i=this;o.push(e.map(function(t){return{axisX:t[i.axis.axisX],axisY:t[i.axis.axisY]}}))}.bind(this))),c.loop(t,function(t,e){var i=this,s=u.d3.max(e,function(t){return t[i.axis.axisY]});n<s&&(n=s+.2*s),a.push(t)}.bind(this)),"date"===this.axis.typeAxisX?(this.d3.x=u.d3.scaleTime().domain([new Date(s[0]),new Date(s[1])]).rangeRound([0,this.d3.width]),this.state.d3_line.x(function(t){return this.d3.x(new Date(t.axisX))}.bind(this))):(this.d3.x=u.d3.scaleBand().domain(i).rangeRound([0,this.d3.width]),this.state.d3_line.x(function(t){return this.d3.x(t.axisX)+.5*this.d3.x.bandwidth()}.bind(this))),this.d3.y=u.d3.scaleLinear().domain([0,n]).rangeRound([this.d3.height,0]),this.state.d3_line.y(function(t){return this.d3.y(t.axisY)}.bind(this)),this.state.update)e=this.nodes.pathNode.data(o);else{var r=u.d3.timeFormat(this.axis.timeFormat),h=u.d3.scaleOrdinal().range(this.state.colorArray);this.nodes.gridX_g=this.d3.g.append("g").attr("class","grid_x").attr("transform","translate(0,"+this.d3.height+")").attr("opacity",this.props.tickGridOpacity),this.nodes.gridY_g=this.d3.g.append("g").attr("class","grid_y").attr("opacity",this.props.tickGridOpacity),this.nodes.axisX_g=this.d3.g.append("g").attr("class","axis axis--x"),this.nodes.axisY_g=this.d3.g.append("g").attr("class","axis axis--y"),this.nodes.title_g=this.d3.g.append("g").attr("class","title").append("text"),(e=this.d3.g.append("g").attr("class","pathBox").selectAll("path").data(o).enter().append("path")).attr("class","line").attr("stroke",function(t,e){return h(a[e])}).attr("stroke-width","1.5").attr("fill","none"),this.nodes.pathNode=this.d3.g.select("g.pathBox").selectAll("path.line"),"date"===this.axis.typeAxisX?this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x).ticks(u.d3[this.axis.timeAxisX[0]].every(this.axis.timeAxisX[1])).tickFormat(function(t){return r(t)})):this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x)),this.setCommonCompareInfo(this.d3,a,h),this.setCommonChartInfoString("basic"),this.setCommonChartAxisXNode()}e.transition().duration(this.props.duration).attr("d",this.state.d3_line),e.exit().remove(),this.setCommonChartAxisYNode(),this.setCommonChartAxisXYGrid()}finally{a=e=o=t=null}},js2uixSingleBarType:function(t){var e,i=this,s="axisX",n="axisY",a=t.map(function(t){return{axisX:t[this.axis.axisX],axisY:t[this.axis.axisY]}}.bind(this)),o=a.map(function(t){return t[n]}),r=u.d3.extent(o,function(t){return parseInt(t)});try{if(this.d3.x=u.d3.scaleBand().padding(.1).domain(a.map(function(t){return t[s]})).rangeRound([0,this.d3.width]),this.d3.y=u.d3.scaleLinear().domain([0,r[1]]).rangeRound([this.d3.height,0]),this.state.update)e=this.nodes.rectNode.data(a,function(t){return t[s]});else{var h=u.d3.scaleOrdinal().range(this.state.colorArray),d=u.d3.timeFormat(this.axis.timeFormat);this.nodes.gridX_g=this.d3.g.append("g").attr("class","grid_x").attr("transform","translate(0,"+this.d3.height+")").attr("opacity",this.props.tickGridOpacity),this.nodes.gridY_g=this.d3.g.append("g").attr("class","grid_y").attr("opacity",this.props.tickGridOpacity),this.nodes.axisX_g=this.d3.g.append("g").attr("class","axis axis--x"),this.nodes.axisY_g=this.d3.g.append("g").attr("class","axis axis--y"),this.nodes.title_g=this.d3.g.append("g").attr("class","title").append("text"),this.nodes.pathArea=this.d3.g.append("g").attr("class","graphBox"),e=this.nodes.pathArea.selectAll("g").data(a,function(t){return t[s]}).enter().append("rect").attr("class","ui-chart-bar").attr("width",this.d3.x.bandwidth()).attr("x",function(t){return this.d3.x(t[s])}.bind(this)).attr("fill",function(t){return h(t[s])}).attr("fill-opacity",this.props.colorAlpha).attr("data-name",function(t){return t[s]}).attr("data-value",function(t){return t[n]}),this.nodes.rectNode=this.d3.g.select("g.graphBox").selectAll("rect.ui-chart-bar"),"date"===this.axis.typeAxisX?this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x).tickFormat(function(t){return d(new Date(t))})):this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x)),this.setCommonChartInfoString("basic"),this.setCommonChartAxisXNode()}e.attr("height",function(){return i.state.update?u.d3.select(this).attr("height"):i.d3.height-i.d3.y(0)}).attr("y",function(){return i.state.update?u.d3.select(this).attr("y"):i.d3.y(0)}).transition().duration(this.props.duration).ease(u.d3.easeLinear).attr("y",function(t){return i.d3.y(t[n])}).attr("height",function(t){return i.d3.height-i.d3.y(t[n])}),e.exit().remove(),this.setCommonChartAxisYNode(),this.setCommonChartAxisXYGrid()}finally{e=t=null}},js2uixCompareBarType:function(e){var t,i=this,s=e[Object.keys(e)[0]].map(function(t){return t[this.axis.axisX]}.bind(this)),n=0,a=0,o=[],r=[],h=function(i){var s=this,t=u.d3.values(e).map(function(t){var e=t.map(function(t){if(t[s.axis.axisX]==i)return t[s.axis.axisY]});return u.d3.max(e,function(t){return t})});return r.push(t),t}.bind(this);try{if(c.loop(e,function(t,e){var i=this,s=u.d3.max(e,function(t){return t[i.axis.axisY]});n<s&&(n=s),o.push(t)}.bind(this)),this.d3.x=u.d3.scaleBand().domain(s).rangeRound([0,this.d3.width]).padding(.1),this.d3.x1=u.d3.scaleBand().padding(.05).domain(u.d3.entries(e).map(function(t){return t.key})).rangeRound([0,this.d3.x.bandwidth()]),this.d3.y=u.d3.scaleLinear().domain([0,n]).rangeRound([this.d3.height,0]),this.state.update)t=this.nodes.rectNode.data(s,h).selectAll("rect.ui-chart-bar").data(u.d3.keys(e));else{var d=u.d3.scaleOrdinal().range(this.state.colorArray),l=u.d3.timeFormat(this.axis.timeFormat);this.nodes.gridX_g=this.d3.g.append("g").attr("class","grid_x").attr("transform","translate(0,"+this.d3.height+")").attr("opacity",this.props.tickGridOpacity),this.nodes.gridY_g=this.d3.g.append("g").attr("class","grid_y").attr("opacity",this.props.tickGridOpacity),this.nodes.axisX_g=this.d3.g.append("g").attr("class","axis axis--x"),this.nodes.axisY_g=this.d3.g.append("g").attr("class","axis axis--y"),this.nodes.title_g=this.d3.g.append("g").attr("class","title").append("text"),t=this.d3.g.append("g").attr("class","path").selectAll("g").data(s,h).enter().append("g").attr("class","ui-chart-group").attr("width",this.d3.x.bandwidth()).attr("transform",function(t){return"translate("+i.d3.x(t)+",0)"}).attr("data-left",function(t){return i.d3.x(t)}).selectAll("rect").data(u.d3.keys(e)).enter().append("rect").attr("class","ui-chart-bar").attr("width",function(){return i.d3.x1.bandwidth()}).attr("x",function(t){return i.d3.x1(t)}).attr("fill",function(t){return d(t)}).attr("fill-opacity",this.props.colorAlpha),this.setCommonCompareInfo(this.d3,o,d),this.nodes.rectNode=this.d3.g.select("g.path").selectAll("g"),"date"===this.axis.typeAxisX?this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x).ticks(u.d3[this.axis.timeAxisX[0]].every(this.axis.timeAxisX[1])).tickFormat(function(t){return l(t)})):this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x)),this.setCommonChartInfoString("basic"),this.setCommonChartAxisXNode()}t.attr("data-height",function(t,e){return 0===e&&a++,i.d3.height-i.d3.y(r[a-1][e])}).attr("data-name",function(t){return a=0,t}).attr("data-value",function(t,e){return 0===e&&a++,r[a-1][e]}).attr("y",function(){return i.state.update?u.d3.select(this).attr("y"):i.d3.y(0)}).attr("height",function(){return i.state.update?u.d3.select(this).attr("height"):i.d3.height-i.d3.y(0)}),a=0,t.transition().duration(this.props.duration).ease(u.d3.easeLinear).attr("y",function(){return i.d3.height-u.d3.select(this).attr("data-height")}).attr("height",function(t,e){return 0===e&&a++,i.d3.height-i.d3.y(r[a-1][e])}),t.exit().remove(),this.setCommonChartAxisYNode(),this.setCommonChartAxisXYGrid()}finally{t=r=o=e=null}},js2uixCircleType:function(t){var e,i,s,n,a=this;try{if(this.state.update)e=this.nodes.slice.data(this.state.pie(t),this.state.axisXFnc),i=this.nodes.circleText.data(this.state.pie(t),this.state.axisXFnc),s=this.nodes.polyLine.data(this.state.pie(t),this.state.axisXFnc);else{var o=u.d3.scaleOrdinal().range(this.state.colorArray),r=this.target[0].clientWidth,h=this.target[0].clientHeight;this.d3.width=r,this.d3.height=h,this.state.radius=Math.min(r,h)/2-30,this.state.arc1=u.d3.arc().outerRadius(.9*this.state.radius).innerRadius(this.state.radius*(1-this.props.circleThickNum)),this.state.outerArc=u.d3.arc().innerRadius(this.state.radius).outerRadius(.9*this.state.radius),this.state.pie=u.d3.pie().sort(null).value(function(t){return t[a.axis.axisY]}),this.state.axisXFnc=function(t){return t.data[a.axis.axisX]},this.state.midAngle=function(t){return t.startAngle+(t.endAngle-t.startAngle)/2},this.d3.g=this.d3.g.attr("transform","translate("+r/2+","+h/2+")"),this.d3.g.append("g").attr("class","labels"),this.d3.g.append("g").attr("class","lines"),this.nodes.title_g=this.d3.g.append("g").attr("class","titleBox").append("text"),e=this.d3.g.append("g").attr("class","slices ui-"+this.state.uniqueId).selectAll("path.slice").data(this.state.pie(t),this.state.axisXFnc).enter().insert("path").style("fill",function(t){return o(t.data[a.axis.axisX])}).attr("class","slice").attr("fill-opacity",this.props.colorAlpha),i=this.d3.g.select(".labels").selectAll("text").data(this.state.pie(t),this.state.axisXFnc).enter().append("text").attr("style","font-size:12px").attr("dy",".35em").attr("opacity",1),s=this.d3.g.select(".lines").selectAll("polyline").data(this.state.pie(t),this.state.axisXFnc).enter().append("polyline").attr("opacity",.3).attr("stroke","black").attr("stroke-width","1px").attr("fill","none").attr("stroke-opacity",1),this.props.groupInfoBox&&((n=this.d3.g.append("g").attr("class","infoBox").attr("text-anchor","end").selectAll("g").data(t.map(function(t){return d3.values(t)[0]})).enter().append("g").attr("transform",function(t,e){return"translate(0,"+20*e+")"})).append("rect").attr("x",.5*-this.d3.width+10).attr("y",.5*-this.d3.height+10).attr("width",19).attr("height",19).attr("fill",o),n.append("text").attr("style","font-size:12px").attr("text-anchor","start").attr("x",.5*-this.d3.width+35).attr("y",.5*-this.d3.height+20).attr("dy","0.32em").text(function(t){return t}),n.exit().remove()),this.nodes.slice=this.d3.g.selectAll("path.slice"),this.nodes.circleText=this.d3.g.select(".labels").selectAll("text"),this.nodes.polyLine=this.d3.g.select(".lines").selectAll("polyline"),this.setCommonChartInfoString("circle")}e.transition().duration(this.props.duration).attrTween("d",function(t){this._current=this._current||t;var e=u.d3.interpolate(this._current,t);return a.state.update||(e=u.d3.interpolate({startAngle:0,endAngle:0},this._current)),this._current=e(0),function(t){return a.state.arc1(e(t))}}),e.exit().remove(),i.text(function(t){return t.data[a.axis.axisY]}).transition().duration(this.props.duration).attrTween("transform",function(t){this._current=this._current||t;var s=u.d3.interpolate(this._current,t);return this._current=s(0),function(t){var e=s(t),i=a.state.outerArc.centroid(e);return i[0]=a.state.radius*(a.state.midAngle(e)<Math.PI?1:-1),"translate("+i+")"}}).styleTween("text-anchor",function(t){this._current=this._current||t;var e=u.d3.interpolate(this._current,t);return this._current=e(0),function(t){return a.state.midAngle(e(t))<Math.PI?"start":"end"}}),i.exit().remove(),s.transition().duration(this.props.duration).attrTween("points",function(t){this._current=this._current||t;var s=u.d3.interpolate(this._current,t);return this._current=s(0),function(t){var e=s(t),i=a.state.outerArc.centroid(e);return i[0]=.95*a.state.radius*(a.state.midAngle(e)<Math.PI?1:-1),[a.state.arc1.centroid(e),a.state.outerArc.centroid(e),i]}}),s.exit().remove()}finally{n=s=i=e=t=null}},setSwitchChartDomType:function(t){switch(this.props.chartType){case"line-s":this.js2uixSingleLineType(t);break;case"line-c":this.js2uixCompareLineType(t);break;case"area-s":this.js2uixSingleAreaType(t);break;case"area-c":this.js2uixCompareAreaType(t);break;case"bar-s":this.js2uixSingleBarType(t);break;case"bar-c":this.js2uixCompareBarType(t);break;case"circle":this.js2uixCircleType(t);break;default:alert("Chart type is incorrect.")}},setCreateChartOption:function(){try{if(this.props.colorful||(this.state.colorArray=[this.state.colorArray[0]]),this.props.colorArray&&(this.state.colorArray=this.props.colorArray),this.props.shadeColor&&this.setUserShadeColorSetting(this.props.shadeColor),"string"!=typeof this.props.timeAxisX[0]||"number"!=typeof this.props.timeAxisX[1])return alert("The value of the timeAxisX is not correct."),!1;"number"==typeof this.props.circleThickNum?1<this.props.circleThickNum?this.props.circleThickNum=1:this.props.circleThickNum<=0&&(this.props.circleThickNum=.15):this.props.circleThickNum=.5,this.props.timeAxisX=this.props.timeAxisX.map(function(t){var e="";switch(t){case"day":e="timeDay";break;case"week":e="timeWeek";break;case"month":e="timeMonth";break;case"year":e="timeYear";break;default:e=t}return e})}finally{null}},setCreateChartD3Target:function(t){var e=this.state,i=this.props,s=t[0].id,n=t.parent().offset(),a=n.width-(n.paddingL+n.paddingR),o=n.height-(n.paddingT+n.paddingB),r=this.axis={axisX:i.nameAxisX,axisY:i.nameAxisY,typeAxisX:i.typeAxisX,typeAxisY:i.typeAxisY,timeAxisX:i.timeAxisX,timeFormat:i.timeFormat,tickAxisY:i.tickAxisY,tickGridY:i.tickGridY,rotateAxisX:i.rotateAxisX,posXAxisX:i.posXAxisX,posYAxisX:i.posYAxisX,axis_string:i.title},h={width:i.layoutW,height:i.layoutH};try{h.width&&(a=parseInt(h.width),t.width(a)),h.height&&(o=parseInt(h.height),t.height(o)),a>e.max_width&&(a=e.max_width),a<e.min_width&&(a=e.min_width),o<e.min_height&&(o=e.min_height),this.d3.svg||(this.d3={svg:null,g:null,x:null,y:null,width:0,height:0,margin:{},line:null,tip:null,type:this.props.chartType,axisX:"",axisY:"",title:""},this.d3.svg=u.d3.select("#"+s).append("svg:svg").attr("id",this.state.uniqueName).attr("width",a).attr("height",o),this.d3.margin={top:40,right:30,bottom:30,left:30},this.d3.width=a-this.d3.margin.left-this.d3.margin.right,this.d3.height=o-this.d3.margin.top-this.d3.margin.bottom,this.d3.g=this.d3.svg.append("g").attr("class","js2uix_g").attr("transform","translate("+this.d3.margin.left+","+this.d3.margin.top+")"),this.d3.axisX=r.axisX,this.d3.axisY=r.axisY,this.d3.title=r.axis_string)}finally{r=null}},setCreateStyleOption:function(t){var e,i;e=t,i={svgId:"#"+this.state.uniqueName,opacity:this.props.tickGridOpacity,dashArray:this.props.tickGridDashNum},e.append('<style class="js2uixD3">\n'+i.svgId+" .js2uix_g .grid_x,\n"+i.svgId+" .js2uix_g .grid_y{opacity : "+i.opacity+"}\n"+i.svgId+" .js2uix_g .grid_x path,\n"+i.svgId+" .js2uix_g .grid_y path{stroke-width:0}\n"+i.svgId+" .js2uix_g .grid_x .tick line,\n"+i.svgId+" .js2uix_g .grid_y .tick line{stroke-dasharray:"+i.dashArray+"}\n</style>")},render:function(t){this.renderChartDefaultSetting(t),this.setCreateStyleOption(t),this.setCreateChartOption(t),this.setCreateChartD3Target(t)},init:function(t){"object"==typeof t&&(c.extend(this.props,t),this.render(this.target))},setData:function(t){this.setSwitchChartDomType(t),this.state.update||(this.state.update=!0,this.state.dataLength=t.length)}}).constructor=N;var A=function(t){if(t){if("string"==typeof t)return c(c(t)[0]);if(t.name&&t.name===f)return t;if(t.nodeName)return c(t)}},w=function(t){return this.element=t,this.idName="",this.props={fieldTitle:null,fieldName:null,gridFixWidth:null,gridFixHeight:null,gridMinWidth:null,gridMaxWidth:null,listCountNum:[10,20,30],fieldWidth:null,appendLayoutStyle:!0,availableMini:!1,bodyTextAlign:"center",disableSelection:!1,optionCheckBox:!1,optionNumbering:!1,onChangeStateEvent:null,onCustomizedField:null,onCustomizedEvent:null},this.state={totalCountNum:0,totalPageNum:1,currentPageNum:1,listCountNum:10,displayItemNum:0,orderInfo:{},gridWidth:0,gridAdjustGap:0,gridCalcWidth:0,girdCalcUlWidth:0,contentHead:null,contentBody:null,contentBodyList:null,contentFoot:null,listSelect:null,totalItem:null,displayItem:null,totalPage:null,currentPage:null,loadBox:null,optionCheckbox:null,isControl:!0},this.gridData=null,{name:this.js2uixName,init:this.init.bind(this),setData:this.setData.bind(this)}};(w.prototype={js2uixName:"js2uix-grid",setLoadEffectStyle:function(t){t?(this.state.isControl=!1,this.state.loadBox[0].style.display="block",this.state.loadBox[0].style.opacity=1):this.state.loadBox.fadeOut(450,function(){this.state.isControl=!0}.bind(this))},setDefaultRender:function(){if(1===this.element.length)return this.element.addClass(this.js2uixName),this.props.disableSelection&&this.element.addClass("disableSelection"),this.props.gridFixWidth&&"number"==typeof this.props.gridFixWidth&&this.element.css("width",this.props.gridFixWidth),this.props.gridMinWidth&&"number"==typeof this.props.gridMinWidth&&this.element.css("min-width",this.props.gridMinWidth),this.props.gridMaxWidth&&"number"==typeof this.props.gridMaxWidth&&this.element.css("max-width",this.props.gridMaxWidth),this.props.gridFixHeight&&"number"==typeof this.props.gridFixHeight&&this.element.css("height",this.props.gridFixHeight),this.props.availableMini&&this.element.addClass("availableMini"),!0},setAppendElement:function(t){this.element.append(t)},setCreateCssStyle:function(){if(this.props.appendLayoutStyle&&this.props.fieldWidth&&Array.isArray(this.props.fieldWidth)){for(var t=c("style[data-target="+this.idName+"]"),e='<style data-target="'+this.idName+'">\n',i=0;i<this.props.fieldWidth.length;i++){var s=i+1,n=this.props.fieldWidth[i];"string"==typeof n&&"auto"===n?(n=this.state.girdCalcUlWidth-this.state.gridCalcWidth+"px",n="calc(100% - "+this.state.gridCalcWidth+"px)"):n+="px",e+="#"+this.idName+".js2uix-grid ul.js2uix-head-row li:nth-child("+s+"),\n",e+="#"+this.idName+".js2uix-grid ul.js2uix-body-row li:nth-child("+s+"){width:"+n+"}\n"}e+="</style>",0<t.length&&t.remove(),this.element.before(e)}},setGridFieldStyle:function(t){if(!this.props.appendLayoutStyle&&this.props.fieldWidth&&Array.isArray(this.props.fieldWidth)){var s=this,e=this.state.contentHead;"body"===t&&(e=this.state.contentBody),e=e.find("ul"),this.state.girdCalcUlWidth||(this.state.girdCalcUlWidth=e.width()),c.loop(e,function(){for(var t=this.children,e=0;e<t.length;e++){var i=s.props.fieldWidth[e];"string"==typeof i&&"auto"===i?i=s.state.girdCalcUlWidth-s.state.gridCalcWidth+"px":i+="px",t[e].style.width=i}})}},setAdjustStyleLayout:function(){this.state.gridAdjustGap=this.state.contentBody.width()-this.state.contentBodyList.width(),this.state.contentHead[0].children[0].style.paddingRight=this.state.gridAdjustGap+"px",this.state.contentBodyList&&(this.state.contentBodyList.setAttr("data-overflow","false"),0<=this.state.contentBodyList.height()-this.state.contentBody.height()&&this.state.contentBodyList.setAttr("data-overflow","true"))},setDefaultOptionState:function(){this.state.optionCheckbox&&(this.state.optionCheckbox[0].firstChild.checked=!1)},setGridDefaultState:function(){var t=0;if(this.idName=this.element[0].id?this.element[0].id:this.idName=f+"Grid"+n(),this.props.fieldWidth){this.props.optionCheckBox&&this.props.fieldWidth.unshift(35),this.props.optionNumbering&&this.props.fieldWidth.unshift(40);for(var e=0;e<this.props.fieldWidth.length;e++)"number"==typeof this.props.fieldWidth[e]&&(t+=this.props.fieldWidth[e]);this.state.gridCalcWidth=t,this.state.gridWidth=this.state.contentHead.width()}},setGridRenderState:function(t){this.state.totalCountNum=parseInt(t.totalCount),this.state.currentPageNum=parseInt(t.pageCount),this.state.listCountNum=parseInt(t.listCount||this.state.listCountNum),this.state.displayItemNum=0===this.state.currentPageNum?parseInt(t.data.length):(this.state.currentPageNum-1)*this.state.listCountNum+parseInt(t.data.length),this.state.totalPageNum=parseInt(this.state.totalCountNum/this.state.listCountNum),this.state.totalPageNum<1&&(this.state.totalPageNum=1),this.state.totalPageNum<this.state.totalCountNum/this.state.listCountNum&&(this.state.totalPageNum=this.state.totalPageNum+1),this.state.listSelect[0].value!==this.state.listCountNum&&(this.state.listSelect[0].value=this.state.listCountNum),this.gridData=t.data},setGridFootState:function(t){this.state.totalItem[0].innerText=this.state.totalCountNum,this.state.displayItem[0].innerText=this.state.displayItemNum,this.state.totalPage[0].innerText=this.state.totalPageNum,this.state.currentPage[0].value=this.state.currentPageNum,console.log(t)},setGridHeadElement:function(){if(this.props.fieldTitle&&this.props.fieldName){for(var t=c.createDom("ul",{className:"js2uix-grid-head-wrap js2uix-head-row"},!0),e=0;e<this.props.fieldTitle.length;e++)t.append('<li class="field" data-order="NORMAL" data-name="'+this.props.fieldName[e]+'">'+this.props.fieldTitle[e]+"</li>");this.props.optionCheckBox&&(this.state.optionCheckbox=c.createDom("li",{content:'<input type="checkbox" name="optionCheckBox" />'},!0),this.state.optionCheckbox.setAttr("data-option","checkbox"),t.prepend(this.state.optionCheckbox)),this.props.optionNumbering&&t.prepend('<li data-option="numbering">&nbsp;</li>'),this.state.contentHead=c.createDom("div",{className:"js2uix-grid-head",content:t},!0),this.setAppendElement(this.state.contentHead),this.setGridHeadControl(this.state.contentHead)}},setGridBodyElement:function(){this.state.contentBodyList=c.createDom("div",{className:"js2uix-grid-body-list"},!0),this.state.contentBody=c.createDom("div",{className:"js2uix-grid-body",content:c.createDom("div",{className:"js2uix-grid-body-wrap",content:this.state.contentBodyList})},!0),this.setAppendElement(this.state.contentBody)},setGridFootElement:function(){this.state.contentFoot=c.createDom("div",{className:"js2uix-grid-foot"},!0);var t=c.createDom("div",{className:"js2uix-grid-list",content:'<select class="list"></select>'},!0),e=c.createDom("div",{className:"js2uix-grid-total",content:'<ul><li>Displaying&nbsp;</li><li class="current">1</li><li>&nbsp;of&nbsp;</li><li class="total">1</li><li>&nbsp;items</li></ul>'}),i=c.createDom("div",{className:"js2uix-grid-page",content:'<ul><li class="first"></li><li class="prev"></li><li class="page"><span>Page</span><span class="current"><input type="text" name="crtPage" class="crtPage"></span><span>of</span><span class="total">1</span></li><li class="next"></li><li class="last"></li><li class="reload"></li></ul>'});if(Array.isArray(this.props.listCountNum)&&0<this.props.listCountNum.length)for(var s=0;s<this.props.listCountNum.length;s++){var n="";0===s&&(this.state.listCountNum=this.props.listCountNum[s],n="selected"),t.find("select").append("<option "+n+' value="'+this.props.listCountNum[s]+'">'+this.props.listCountNum[s]+"</option>")}this.state.contentFoot.append(t,i,e),this.state.listSelect=this.state.contentFoot.find("select"),this.state.totalItem=this.state.contentFoot.find(".js2uix-grid-total .total"),this.state.displayItem=this.state.contentFoot.find(".js2uix-grid-total .current"),this.state.totalPage=this.state.contentFoot.find(".js2uix-grid-page .total"),this.state.currentPage=this.state.contentFoot.find(".js2uix-grid-page .current input"),this.setAppendElement(this.state.contentFoot),this.setGridFootControl(this.state.contentFoot)},setGridLoadElement:function(){this.state.loadBox=c.createDom("div",{className:"js2uix-grid-load",content:'<div class="innerBox">processing.. please wait!</div>'},!0),this.state.contentBody.append(this.state.loadBox)},setGridBodyItemElement:function(t){var e="";if(t.data&&0<t.data.length&&0<this.props.fieldName.length){for(var i=0;i<t.data.length;i++)if(i<=this.state.listCountNum){e+='<ul class="js2uix-body-row">',this.props.optionNumbering&&(e+='<li data-option="numbering">'+(i+1)+"</li>"),this.props.optionCheckBox&&(e+='<li data-option="checkbox"><input type="checkbox" name="optionCheckBox" /></li>');for(var s=0;s<this.props.fieldName.length;s++){var n="",a=this.props.fieldName[s],o=t.data[i][a];o||(o="",n='data-empty="true"',0===i&&this.state.contentHead.find('li[data-name="'+a+'"]').removeEvent("all")),e+='<li data-name="'+a+'" '+n+' style="text-align:'+this.props.bodyTextAlign+'">'+o+"</li>"}e+="</ul>"}}else e='<ul class="js2uix-body-row"><li class="noGridData">No Data</li></ul>';this.setGridBodyControl(!0),this.state.contentBodyList[0].parentNode.scrollTop=0,this.state.contentBodyList[0].innerHTML=e,this.onCustomizedField(),this.setGridBodyControl(!1),this.setAdjustStyleLayout()},setGridDefaultElement:function(){this.setGridBodyControl(!0),this.element[0].innerHTML=""},setGridHeadControl:function(t){var s=this;t.find("li.field").addEvent("click.js2uix-grid",function(){if(s.state.isControl){var t=c(this),e=t.getAttr("data-order"),i=t.getAttr("data-name");"NORMAL"===e?(t.setAttr("data-order","ASC"),s.state.orderInfo[i]="ASC"):"ASC"===e?(t.setAttr("data-order","DESC"),s.state.orderInfo[i]="DESC"):"DESC"===e&&(t.setAttr("data-order","NORMAL"),delete s.state.orderInfo[i]),s.state.currentPageNum=1,s.onChangeStateEvent()}}),t.find('li[data-option="checkbox"] input[type=checkbox]').addEvent("change.js2uix-grid",function(){if(s.state.isControl){var t=s.state.contentBodyList.find("input[name=optionCheckBox]");c.loop(t,function(t,e){e.checked=this.checked}.bind(this))}})},setGridBodyControl:function(t){t?this.state.contentBody&&this.state.contentBody.find(".js2uix-grid-body-list *").removeEvent("all"):this.onCustomizedEvent()},setGridFootControl:function(t){var i=this;t.find(".first").addEvent("click.js2uix-grid",function(){return 1!==i.state.currentPageNum&&i.state.isControl&&(i.state.currentPageNum=1,i.onChangeStateEvent()),!1}),t.find(".prev").addEvent("click.js2uix-grid",function(){return 1!==i.state.currentPageNum&&i.state.isControl&&(i.state.currentPageNum=i.state.currentPageNum-1!=0?i.state.currentPageNum-1:1,i.onChangeStateEvent()),!1}),t.find(".next").addEvent("click.js2uix-grid",function(){return i.state.currentPageNum<i.state.totalPageNum&&i.state.isControl&&(i.state.currentPageNum=i.state.currentPageNum+1<=i.state.totalPageNum?i.state.currentPageNum+1:i.state.totalPageNum,i.onChangeStateEvent()),!1}),t.find(".last").addEvent("click.js2uix-grid",function(){return i.state.currentPageNum<i.state.totalPageNum&&i.state.isControl&&(i.state.currentPageNum=i.state.totalPageNum,i.onChangeStateEvent()),!1}),t.find(".reload").addEvent("click.js2uix-grid",function(){return i.state.isControl&&i.onChangeStateEvent(),!1}),t.find(".crtPage").addEvent("keyup.js2uix-grid",function(t){var e=this.value;return""===(e=e.replace(/[^0-9]/gi,""))?i.state.currentPage[0].value="":((e=parseInt(e))<1&&(e=1),e>i.state.totalPageNum&&(e=i.state.totalPageNum),i.state.currentPage[0].value=e),13===t.keyCode&&(i.state.currentPageNum=e,i.onChangeStateEvent()),!1}),t.find("select").addEvent("change.js2uix-grid",function(t){return i.state.isControl&&(i.state.currentPageNum=1,i.state.listCountNum=this.value,i.onChangeStateEvent()),!1})},setGridCreateElement:function(){this.setGridDefaultElement(),this.setGridHeadElement(),this.setGridBodyElement(),this.setGridFootElement(),this.setGridLoadElement()},onChangeStateEvent:function(){this.props.onChangeStateEvent,"function"==typeof this.props.onChangeStateEvent&&(this.setLoadEffectStyle(!0),this.setDefaultOptionState(),this.props.onChangeStateEvent({searchOrder:this.state.orderInfo,searchPageNum:this.state.currentPageNum,searchItemListNum:this.state.listCountNum}))},onCustomizedField:function(){if(this.props.onCustomizedField&&"function"==typeof this.props.onCustomizedField){var e=this;this.state.contentBodyList.find("ul").loop(function(t){e.props.onCustomizedField(c(this),e.gridData[t])}),e.gridData=null}},onCustomizedEvent:function(){this.props.onCustomizedEvent&&"function"==typeof this.props.onCustomizedEvent&&this.props.onCustomizedEvent(this.state.contentBodyList)},setData:function(t){t&&"object"==typeof t&&(this.setGridRenderState(t),this.setGridFootState(t),this.setGridBodyItemElement(t),this.setGridFieldStyle("body"),this.setLoadEffectStyle(!1))},init:function(t){t&&"object"==typeof t&&(c.extend(this.props,t),this.setDefaultRender()&&(this.setGridCreateElement(),this.setGridDefaultState(),this.setCreateCssStyle(),this.setGridFieldStyle("head")))}}).constructor=w;var j=function(t,e){return this.element=t,this.props={comboFixWidth:null,defaultTitle:null,searchCombo:!1,inputPlaceholder:"",onChangeEvent:null,onSearchEvent:null},this.state={comboBoxNode:null,optionNode:null,searchOptionNode:null,selectedNode:null,titleNode:null,defaultTitleNode:null,arrowNode:null,width:0,height:0,value:null,change:!1},this.init(e),{name:this.js2uixName,getValue:this.getValue.bind(this),setValue:this.setValue.bind(this),setOption:this.setOption.bind(this)}};(j.prototype={js2uixName:"js2uix-combo",setComboBoxElementLayout:function(){var t=this.state.width=this.props.comboFixWidth||this.element.width(),e=this.state.height=this.state.comboBoxNode.height(),i="parent"===this.props.comboFixWidth||"number"!=typeof this.props.comboFixWidth?"100%":t+e;this.element.css({width:i,height:e}),this.state.comboBoxNode.css({width:i,height:e}),this.state.titleNode.css("padding-right",25),this.state.arrowNode.css({width:25,height:e}),this.props.searchCombo&&(this.state.comboBoxNode.addClass("js2uix-search"),this.state.titleNode.css({width:i,height:e}),this.state.searchOptionNode.css({width:i,top:e-1}),this.element[0].style.display="none")},createComboBoxDefaultOption:function(){var t=this.element.find("option");(this.props.defaultTitle||0===t.length)&&(this.state.defaultTitleNode=c.createDom("option",{content:this.props.defaultTitle||"No data"}),this.state.defaultTitleNode.value="none",this.state.defaultTitleNode.disabled=!0,this.state.defaultTitleNode.setAttribute("selected",!0),this.element.prepend(this.state.defaultTitleNode));try{return this.element.find("option")}finally{t=null}},createComboBoxOptionNode:function(){var t=this.state.optionNode;if(this.props.searchCombo){var e=c.createDom("ul",{className:"js2uix-option-wrap"},!0);if(0<t.length)for(var i=0;i<t.length;i++){for(var s=t[i],n=s.innerText,a="",o=0;o<s.attributes.length;o++){var r=s.attributes[o],h=r.name,d=r.value||"";"disabled"===h&&(d="true"),-1!==h.indexOf("data-")?a+=" "+h+'="'+d+'"':a+=" data-"+h+'="'+d+'"'}e.append("<li"+a+">"+n+"</li>")}else e.append("<li>No data</li>");this.setComboBoxSearchControl(!0),this.state.searchOptionNode.html(e)}},createComboBoxLayout:function(){this.state.comboBoxNode=c.createDom("div",{className:this.js2uixName},!0),this.state.arrowNode=c.createDom("span",{className:"arrow"},!0),this.state.optionNode=this.createComboBoxDefaultOption(),this.props.searchCombo?(this.state.searchOptionNode=c.createDom("div",{className:"js2uix-option"},!0),this.createComboBoxOptionNode(),this.state.titleNode=c.createDom("input",{className:"search"},!0),this.state.comboBoxNode.append(this.state.titleNode,this.state.arrowNode,this.state.searchOptionNode)):(this.state.titleNode=c.createDom("label",{className:"title"},!0),this.state.comboBoxNode.append(this.state.titleNode,this.state.arrowNode)),this.element.before(this.state.comboBoxNode),this.state.comboBoxNode.append(this.element)},setComboBoxOptionState:function(t){var e=this.element[0].value,i="";if(0<this.state.optionNode.length)for(var s=0;s<this.state.optionNode.length;s++)!0===this.state.optionNode[s].selected&&(this.selectedNode=this.state.optionNode[s],i=this.state.optionNode[s].innerText);this.state.defaultTitleNode&&!this.state.change&&t&&(this.state.defaultTitleNode.removeAttribute("selected"),this.state.change=!0),this.props.searchCombo?(this.state.titleNode[0].placeholder=this.props.inputPlaceholder,t&&(this.state.titleNode[0].value=i)):this.state.titleNode[0].innerText=i,this.state.value=e||""},setScrollActiveItem:function(t,e){var i=t[0].getBoundingClientRect(),s=e[0].getBoundingClientRect(),n=e.index()+1,a=i.height,o=s.height,r=t[0].scrollTop||0;n*o<r+o&&(t[0].scrollTop=r+(n*o-(r+o))),a+r<n*o&&(t[0].scrollTop=r+(n*o-(a+r)))},setComboBoxDefaultControl:function(){var h=this;this.props.searchCombo?(this.state.titleNode.addEvent("keyup."+this.js2uixName,function(t){(t.keyCode<37||40<t.keyCode)&&13!==t.keyCode&&h.onSearchCallBack(this,this.value)}),this.state.titleNode.addEvent("keydown."+this.js2uixName,function(t){var e=t.keyCode;if(38===e||40===e||13===e){var i,s=h.state.searchOptionNode.find("li"),n=h.state.searchOptionNode.find("li.on"),a=n.prevNode(),o=n.nextNode();if(0===n.length)40===e&&(i=c(s[0])).addClass("on");else if(13===e){var r=n[0].getAttribute("data-value")||"";h.state.value!==r&&(h.setValue(r),h.state.searchOptionNode[0].style.display="none",h.onChangeCallBack())}else 38===e&&1===a.length&&(i=a),40===e&&1===o.length&&(i=o),i&&(i.addClass("on").siblingNodes().removeClass("on"),h.setScrollActiveItem(h.state.searchOptionNode,i))}}),this.state.titleNode.addEvent("mousedown."+this.js2uixName,function(t){h.state.searchOptionNode[0].style.display="block",t.stopPropagation()}),this.state.arrowNode.addEvent("mousedown."+this.js2uixName,function(t){h.state.searchOptionNode[0].style.display="block"!==h.state.searchOptionNode[0].style.display?"block":"none",t.stopPropagation()}),this.state.searchOptionNode.addEvent("mousedown."+this.js2uixName,function(t){t.stopPropagation()}),c("body").addEvent("mousedown."+this.js2uixName,function(){h.state.searchOptionNode[0].style.display="none"})):this.element.addEvent("change."+this.js2uixName,function(){h.setComboBoxOptionState(!0),h.onChangeCallBack()})},setComboBoxSearchControl:function(t){var e=this.state.searchOptionNode.find("li");if(t)e.removeEvent("all");else{var i=this;e.addEvent("mouseup."+this.js2uixName,function(t){this&&!this.hasAttribute("data-disabled")&&i.element[0].value!==this.getAttribute("data-value")&&(i.element[0].value=this.getAttribute("data-value")||"",i.setComboBoxOptionState(!0),i.onChangeCallBack()),c(this).addClass("on").siblingNodes().removeClass("on"),i.state.searchOptionNode[0].style.display="none",t.stopPropagation()})}},setOption:function(t){if(t&&Array.isArray(t)){var e,i,s="";for(e=0;e<t.length;e++){var n="",a="",o=t[e].dataAttr;for(i in o)a+=" data-"+i+'="'+o[i]+'"';!0!==t[e].disabled&&"true"!==t[e].disabled||(n="disabled"),s+='<option value="'+t[e].value+'"'+a+" "+n+">"+t[e].title+"</option>"}this.element.removeAttr("style").html(s),this.state.optionNode=this.createComboBoxDefaultOption(),this.createComboBoxOptionNode(),this.setComboBoxElementLayout(),this.setComboBoxOptionState(),this.setComboBoxSearchControl(!1)}},setValue:function(t){this.element[0].value=this.state.value=t,this.setComboBoxOptionState(!0)},getValue:function(){return this.state.value},onChangeCallBack:function(){if(this.props.onChangeEvent&&"function"==typeof this.props.onChangeEvent){for(var t={},e=0;e<this.selectedNode.attributes.length;e++){var i=this.selectedNode.attributes[e];t[i.name.replace("data-","")]=i.value}t.title=this.selectedNode.innerText,this.props.onChangeEvent(t)}},onSearchCallBack:function(t,e){this.props.onSearchEvent&&"function"==typeof this.props.onSearchEvent&&this.props.onSearchEvent(t,e)},init:function(t){"object"==typeof t&&c.extend(this.props,t),this.createComboBoxLayout(),this.setComboBoxElementLayout(),this.setComboBoxOptionState(),this.setComboBoxDefaultControl()}}).constructor=j;var X={setLimitPosition:function(t,e){var i=this.state;if(e){var s=parseInt(e.css("border-left-width"))||0,n=parseInt(e.css("border-right-width"))||0,a=parseInt(e.css("border-top-width"))||0,o=parseInt(e.css("border-bottom-width"))||0;i.targetRect=e[0].getBoundingClientRect(),i.targetRect.borderLeft=s,i.targetRect.borderRight=n,i.targetRect.borderTop=a,i.targetRect.borderBottom=o}if(t){var r=parseInt(t.css("border-left-width"))||0,h=parseInt(t.css("border-right-width"))||0,d=parseInt(t.css("border-top-width"))||0,l=parseInt(t.css("border-bottom-width"))||0,u=parseInt(t.css("padding-left"))||0,p=parseInt(t.css("padding-right"))||0,c=parseInt(t.css("padding-top"))||0,f=parseInt(t.css("padding-bottom"))||0;i.parent=t[0],i.parentRect=t[0].getBoundingClientRect(),i.parentRect.borderLeft=r,i.parentRect.borderRight=h,i.parentRect.borderTop=d,i.parentRect.borderBottom=l,i.parentRect.paddingLeft=u,i.parentRect.paddingRight=p,i.parentRect.paddingTop=c,i.parentRect.paddingBottom=f,i.limitX=i.parentRect.left-i.targetRect.left+i.parentRect.borderLeft+i.parentRect.paddingLeft,i.limitY=i.parentRect.top-i.targetRect.top+i.parentRect.borderBottom+i.parentRect.paddingTop,i.maxX=i.parentRect.right-i.targetRect.right-i.parentRect.borderRight-i.parentRect.paddingRight,i.maxY=i.parentRect.bottom-i.targetRect.bottom-i.parentRect.borderBottom-i.parentRect.paddingBottom}else i.limitX=-99999,i.limitY=-99999,i.maxX=99999,i.maxY=99999},setLimitedAreaForUserCommand:function(t,e,i,s){this.state.targetX=parseInt(i)||0,this.state.targetY=parseInt(s)||0,this.setLimitPosition(t,e)},getClickMousePositionXY:function(t){return{pageX:(t=t||u.event).pageX,pageY:t.pageY}}},_=function(t,e){return this.element=t,this.props={addClass:null,handle:null,cancel:null,cursor:null,containment:null,dropTarget:null,create:null,start:null,drag:null,stop:null,drop:null,userSelect:!1,smoothDrag:!1,zIndex:9},this.state={targetX:0,targetY:0,targetRect:null,parent:null,parentRect:null,limitX:0,maxX:0,limitY:0,maxY:0,isDown:!1,mouseX:0,mouseY:0,isDrag:!1,isMove:!1,isCancel:!1,isHandle:!1,enable:!0,disable:!1,destroy:!1,dataId:null},this.init(e),{name:this.js2uixName,enable:this.enable.bind(this),destroy:this.destroy.bind(this),disable:this.disable.bind(this)}};_.prototype={uiBodyNode:null,js2uixName:"js2uix-draggable",uiDragHandleClass:"js2uix-drag-handle",uiDragCancelClass:"js2uix-drag-cancel",uiDragFxClass:"js2uix-drag-fx",setDefaultState:function(t){var e=t.find(this.props.handle),i=t.css("position");this.uiBodyNode=this.uiBodyNode?this.uiBodyNode:c("body"),this.props.addClass&&t.addClass(this.props.addClass),this.props.smoothDrag&&t.addClass(this.uiDragFxClass),this.props.userSelect||t.setAttr("data-selectable",!1),"static"===i||"relative"===i?i="absolute":"fixed"===i&&(i="fixed"),0<e.length&&this.props.cursor&&""!==this.props.cursor&&e.css("cursor",this.props.cursor),this.props.zIndex&&"number"==typeof this.props.zIndex&&t.css("z-index",parseInt(this.props.zIndex)),t.addClass(this.js2uixName).removeAttr("data-disable").css("position",i)},setRemoveDragNodeConstruct:function(t){var e=t.find(".js2uix-drag-handle"),i=t.find(".js2uix-drag-cancel");b.removeEvent("mousemove.js2uix-"+this.state.dataId),b.removeEvent("mouseup.js2uix-"+this.state.dataId),e.removeEvent("mousedown.js2uix-drag-handle"),e.removeEvent("mouseup.js2uix-drag-handle"),i.removeEvent("mousedown.js2uix-drag-cancel"),i.removeEvent("mouseup.js2uix-drag-cancel"),t.removeEvent("mousedown.js2uix-drag-control"),t.removeEvent("mouseup.js2uix-drag-control"),t.removeClass("js2uix-draggable").removeAttr("data-selectable").removeAttr("data-disable").find(".js2uix-drag-handle").removeClass("js2uix-drag-handle"),t.find(".js2uix-drag-cancel").removeClass("js2uix-drag-cancel"),t.css({position:"",left:"",top:"",cursor:"",zIndex:""}),e.css("cursor",""),t.remove()},setMouseMoveLimitAreaCheck:function(t,e){var i=this.state;return t<=i.limitX&&(t=i.limitX),t>=i.maxX&&(t=i.maxX),e<=i.limitY&&(e=i.limitY),e>=i.maxY&&(e=i.maxY),{mouseX:t,mouseY:e}},setMouseDownDragEventHandler:function(){this.state.isHandle=!0},setMouseUpDragEventHandler:function(){this.state.isHandle=!1},setMouseDownCancelEventHandler:function(){this.state.isCancel=!0},setMouseUpCancelEventHandler:function(){this.state.isCancel=!1},setMouseDownNodeEventHandler:function(t){var e,i,s=this.element.getAttr("data-disable"),n=this.element.parent();this.uiBodyNode.addClass("disableSelection"),this.state.isDrag=!0,this.state.mouseX=t.pageX,this.state.mouseY=t.pageY,s&&"false"!==s&&void 0!==s||(this.state.isDrag=!0),(this.state.destroy||this.state.disable||"true"===s||!this.state.isHandle)&&(this.state.isDrag=!1),this.state.isDrag&&("parent"!==this.props.containment&&""!==this.props.containment&&this.props.containment?void 0===(n=this.element.parents(this.props.containment))&&(n=this.uiBodyNode):n="parent"===this.props.containment?this.element.parent():null,e=this.element.css("left"),i=this.element.css("top"),"auto"===e&&(e=parseInt(this.element[0].offsetLeft)),"auto"===i&&(i=parseInt(this.element[0].offsetTop)),this.setLimitedAreaForUserCommand(n,this.element,e,i),this.setCallBackStart({target:this.element[0],width:this.element.width(),height:this.element.height(),positionX:parseInt(this.element.css("left")),positionY:parseInt(this.element.css("top"))}),this.state.isCancel||this.setDragWindowControl())},setMouseUpNodeEventHandler:function(){if(this.state.isMove&&this.state.enable){if(this.props.dropTarget){var t=this.uiBodyNode.find(this.props.dropTarget);t&&0<t.length&&this.setMouseUpDropEventHandler(this.element,t)}this.setCallBackStop({target:this.element[0],width:this.element.width(),height:this.element.height(),positionX:parseInt(this.element.css("left")),positionY:parseInt(this.element.css("top"))})}this.state.isDrag=!1,this.state.isMove=!1,this.state.isHandle=!1},setMouseMoveWindowEventHandler:function(t){var e,i,s,n,a;this.state.isDrag&&this.state.isHandle&&!this.state.isCancel&&(e=t.pageX-this.state.mouseX,i=t.pageY-this.state.mouseY,s=this.setMouseMoveLimitAreaCheck(e,i),n=this.state.targetX+s.mouseX,a=this.state.targetY+s.mouseY,this.state.isMove=!0,this.element[0].style.left=n+"px",this.element[0].style.top=a+"px",this.setCallBackDrag({target:this.element[0],width:this.element.width(),height:this.element.height(),positionX:parseInt(this.element.css("left")),positionY:parseInt(this.element.css("top"))}))},setMouseUpWindowEventHandler:function(){this.state.isDrag&&this.setCallBackStop({target:this.element[0],width:this.element.width(),height:this.element.height(),positionX:parseInt(this.element.css("left")),positionY:parseInt(this.element.css("top"))}),this.state.isCancel=!1,this.state.isDrag=!1,this.state.isMove=!1,this.state.isHandle=!1,b.removeEvent("mousemove.js2uix-"+this.state.dataId),b.removeEvent("mouseup.js2uix-"+this.state.dataId),this.uiBodyNode.removeClass("disableSelection")},setMouseUpDropEventHandler:function(t,e){var i=t[0].getBoundingClientRect(),s=[];c.loop(e,function(){var t=this.getBoundingClientRect(),e=i.right>t.left&&i.left<t.right&&i.bottom>t.top&&i.top<t.bottom;s.push({dropSuccess:e,dropTarget:this})}),this.setCallBackDrop({dragTarget:t[0],dropTarget:s})},setDragHandleControl:function(){if(this.props.handle&&""!==this.props.handle){var t=this.element.find(this.props.handle).addClass(this.uiDragHandleClass);0<t.length&&t.addEvent({"mousedown.js2uix-drag-handle":this.setMouseDownDragEventHandler.bind(this),"mouseup.js2uix-drag-handle":this.setMouseUpDragEventHandler.bind(this)})}else this.state.isHandle=!0},setDragCancelControl:function(){if(this.props.cancel&&""!==this.props.cancel){var t=this.element.find(this.props.cancel).addClass(this.uiDragCancelClass);0<t.length&&t.addEvent({"mousedown.js2uix-drag-cancel":this.setMouseDownCancelEventHandler.bind(this),"mouseup.js2uix-drag-cancel":this.setMouseUpCancelEventHandler.bind(this)})}else this.state.isCancel=!1},setDragNodeControl:function(){this.element.addEvent({"mousedown.js2uix-drag-control":this.setMouseDownNodeEventHandler.bind(this),"mouseup.js2uix-drag-control":this.setMouseUpNodeEventHandler.bind(this)})},setDragWindowControl:function(){b.addEvent("mousemove.js2uix-"+this.state.dataId,this.setMouseMoveWindowEventHandler.bind(this)),b.addEvent("mouseup.js2uix-"+this.state.dataId,this.setMouseUpWindowEventHandler.bind(this))},setCallBackCreate:function(){"function"==typeof this.props.create&&this.props.create({target:this.element[0],width:this.element.width(),height:this.element.height(),positionX:parseInt(this.element.css("left")),positionY:parseInt(this.element.css("top"))})},setCallBackStart:function(t){"function"==typeof this.props.start&&this.props.start(t)},setCallBackDrag:function(t){"function"==typeof this.props.drag&&this.props.drag(t)},setCallBackStop:function(t){"function"==typeof this.props.stop&&this.props.stop(t)},setCallBackDrop:function(t){"function"==typeof this.props.drop&&this.props.drop(t)},enable:function(){this.state.enable=!0,this.state.destroy=!1,this.state.disable=!1,this.element.removeAttr("data-disable")},destroy:function(){this.state.enable=!1,this.state.disable=!0,this.state.destroy=!0,this.setRemoveDragNodeConstruct(this.element)},disable:function(){this.state.enable=!1,this.state.destroy=!1,this.state.disable=!0,this.element.attr("data-disable",!0)},init:function(t){"object"==typeof t&&c.extend(this.props,t),this.element&&(this.state.dataId=n(),this.setDefaultState(this.element),this.setDragHandleControl(),this.setDragCancelControl(),this.setDragNodeControl(),this.setCallBackCreate())}},c.extend(_.prototype,X),_.prototype.constructor=_;var B=function(t,e){return this.element=t,this.props={addClass:null,create:null,containment:null,handle:"e,s,w,se,sw",minWidth:50,minHeight:50,start:null,stop:null,resize:null,userSelect:!1},this.state={dragNode:null,resizeNodePos:"relative",target:null,targetX:0,targetY:0,targetRect:null,parent:null,parentRect:null,isHandle:!1,isCancel:!1,isResize:!1,isDrag:!1,isMove:!1,strHandle:"js2uix-resize-se",limitX:0,maxX:0,limitY:0,maxY:0,mouseX:0,mouseY:0,enable:!0,disable:!1,destroy:!1,dataId:null},this.init(e),{name:this.js2uixName,enable:this.enable.bind(this),destroy:this.destroy.bind(this),disable:this.disable.bind(this)}};return B.prototype={uiBodyNode:null,js2uixName:"js2uix-resizable",setDefaultState:function(){this.uiBodyNode=this.uiBodyNode?this.uiBodyNode:c("body"),"static"===this.element.css("position")&&this.element.css("position","relative"),this.props.addClass&&this.element.addClass(this.props.addClass),this.props.userSelect||this.element.setAttr("data-selectable",!1),this.element.addClass(this.js2uixName).removeAttr("data-disable")},setDefaultHtml:function(n){var t=this.props.handle.split(","),a=["n","e","s","w","ne","se","sw","nw"];if(!n)return!1;t&&c.loop(t,function(t,e){var i=e.trim();if(-1!==a.indexOf(i)){var s=90;1<i.length&&(s=91),n.append(c.createDom("div",{className:"js2uix-resize-handle js2uix-resize-"+i,styles:{"z-index:":s}}))}})},setRemoveResizeNodeConstruct:function(){var t=this.element.find(".js2uix-resize-handle");this.element.removeClass("js2uix-resizable").removeAttr("data-selectable"),this.element.css({left:"",top:"",width:"",height:""}),t.removeEvent("mousedown.js2uix-resize-handle"),t.removeEvent("mouseup.js2uix-resize-handle"),b.removeEvent("mousemove.js2uix-"+this.state.dataId),b.removeEvent("mouseup.js2uix-"+this.state.dataId),t.remove(),this.element.remove()},getResizeLimitMaxPosition:function(t,e,i){var s=this.state;return"w"!==i&&"n"!==i||(t<=s.limitX&&(t=s.limitX),e<=s.limitY&&(e=s.limitY)),"e"!==i&&"s"!==i||(t>=s.maxX&&(t=s.maxX),e>=s.maxY&&(e=s.maxY)),{mouseX:t,mouseY:e}},getCalcResizeUpEventHandler:function(t,e,i,s){var n=this.getResizeLimitMaxPosition(e,i,"n").mouseY;s<=n&&(n=s),t.style.top=this.state.targetY+n+"px",t.style.height=this.state.targetRect.height-n+"px"},getCalcResizeDownEventHandler:function(t,e,i,s){var n=this.getResizeLimitMaxPosition(e,i,"s").mouseY;n<=-s&&(n=-s),t.style.height=this.state.targetRect.height+n+"px"},getCalcResizeRightEventHandler:function(t,e,i,s){var n=this.getResizeLimitMaxPosition(e,i,"e").mouseX;n<=-s&&(n=-s),t.style.width=this.state.targetRect.width+n+"px"},getCalcResizeLeftEventHandler:function(t,e,i,s){var n=this.getResizeLimitMaxPosition(e,i,"w").mouseX;s<=n&&(n=s),t.style.left=this.state.targetX+n+"px",t.style.width=this.state.targetRect.width-n+"px"},setMouseDownResizeEventHandler:function(t){var e,i,s,n=t.target,a=this.element.parent();this.uiBodyNode.addClass("disableSelection"),this.state.mouseX=t.pageX,this.state.mouseY=t.pageY,this.state.strHandle=n.classList[1],this.state.isResize=!0,this.state.isDrag=!0,s=this.element.getAttr("data-disable"),(this.state.destroy||this.state.disable||"true"===s)&&(this.state.isResize=!1,this.state.isDrag=!1),s&&"false"!==s&&void 0!==s||(this.state.isResize=!0,this.state.isDrag=!0),this.state.isDrag&&("parent"!==this.props.containment&&""!==this.props.containment&&this.props.containment?void 0===(a=this.element.parents(this.props.containment))&&(a=body):a="parent"===this.props.containment?this.element.parent():null,e=this.element.css("left"),i=this.element.css("top"),"auto"===e&&(e=parseInt(this.element[0].offsetLeft)),"auto"===i&&(i=parseInt(this.element[0].offsetTop)),this.setLimitedAreaForUserCommand(a,this.element,e,i),this.setCallBackStart({target:this.element[0],width:this.element.width(),height:this.element.height(),positionX:parseInt(this.element.css("left")),positionY:parseInt(this.element.css("top"))}),this.setDragWindowControl())},setMouseUpResizeEventHandler:function(){this.state.isResize&&this.state.enable&&(this.setCallBackStop({target:this.element[0],width:this.element.width(),height:this.element.height(),positionX:parseInt(this.element.css("left")),positionY:parseInt(this.element.css("top"))}),this.state.isDrag=!1,this.state.isResize=!1)},setMouseMoveWindowEventHandler:function(t){var e=this.element[0];if(this.state.isDrag&&this.state.isResize&&!this.state.isCancel){this.state.isMove=!0;var i=this.state.targetRect,s=t.pageX-this.state.mouseX,n=t.pageY-this.state.mouseY,a=i.width-(this.props.minWidth||50),o=i.height-(this.props.minHeight||50);"js2uix-resize-e"===this.state.strHandle&&this.getCalcResizeRightEventHandler(e,s,n,a),"js2uix-resize-w"===this.state.strHandle&&this.getCalcResizeLeftEventHandler(e,s,n,a),"js2uix-resize-s"===this.state.strHandle&&this.getCalcResizeDownEventHandler(e,s,n,o),"js2uix-resize-n"===this.state.strHandle&&this.getCalcResizeUpEventHandler(e,s,n,o),"js2uix-resize-se"===this.state.strHandle&&(this.getCalcResizeDownEventHandler(e,s,n,o),this.getCalcResizeRightEventHandler(e,s,n,a)),"js2uix-resize-ne"===this.state.strHandle&&(this.getCalcResizeUpEventHandler(e,s,n,o),this.getCalcResizeRightEventHandler(e,s,n,a)),"js2uix-resize-nw"===this.state.strHandle&&(this.getCalcResizeUpEventHandler(e,s,n,o),this.getCalcResizeLeftEventHandler(e,s,n,a)),"js2uix-resize-sw"===this.state.strHandle&&(this.getCalcResizeDownEventHandler(e,s,n,o),this.getCalcResizeLeftEventHandler(e,s,n,a)),this.setCallBackResize({target:this.element[0],width:this.element.width(),height:this.element.height(),positionX:parseInt(this.element.css("left")),positionY:parseInt(this.element.css("top"))})}},setMouseUpWindowEventHandler:function(){this.state.isResize&&this.setCallBackStop({target:this.element[0],width:this.element.width(),height:this.element.height(),positionX:parseInt(this.element.css("left")),positionY:parseInt(this.element.css("top"))}),this.state.isResize=!1,this.state.isDrag=!1,b.removeEvent("mousemove.js2uix-"+this.state.dataId),b.removeEvent("mouseup.js2uix-"+this.state.dataId),this.uiBodyNode.removeClass("disableSelection")},setResizeHandleControl:function(){this.element.find(".js2uix-resize-handle").addEvent({"mousedown.js2uix-resize-handle":this.setMouseDownResizeEventHandler.bind(this),"mouseup.js2uix-resize-handle":this.setMouseUpResizeEventHandler.bind(this)})},setDragWindowControl:function(){b.addEvent("mousemove.js2uix-"+this.state.dataId,this.setMouseMoveWindowEventHandler.bind(this)),b.addEvent("mouseup.js2uix-"+this.state.dataId,this.setMouseUpWindowEventHandler.bind(this))},setCallBackCreate:function(){"function"==typeof this.props.create&&this.props.create({target:this.element[0],width:this.element.width(),height:this.element.height(),positionX:parseInt(this.element.css("left")),positionY:parseInt(this.element.css("top"))})},setCallBackStart:function(t){"function"==typeof this.props.start&&this.props.start(t)},setCallBackResize:function(t){"function"==typeof this.props.resize&&this.props.resize(t)},setCallBackStop:function(t){"function"==typeof this.props.stop&&this.props.stop(t)},enable:function(){this.state.enable=!0,this.state.destroy=!1,this.state.disable=!1,this.element.removeAttr("data-disable")},destroy:function(){this.state.enable=!1,this.state.disable=!0,this.state.destroy=!0,this.setRemoveResizeNodeConstruct()},disable:function(){this.state.enable=!1,this.state.destroy=!1,this.state.disable=!0,this.element.attr("data-disable",!0)},init:function(t){"object"==typeof t&&c.extend(this.props,t),this.element&&(this.state.dataId=n(),this.setDefaultState(),this.setDefaultHtml(this.element),this.setResizeHandleControl(),this.setCallBackCreate())}},c.extend(B.prototype,X),B.prototype.constructor=B,c.extend({Chart:function(t,e){if(u.d3){var i=A(t);return i&&0<i.length?new N(i,e):void 0}alert("please check! d3.js api")},Combo:function(t,e){var i=A(t);if(i&&0<i.length)return new j(i,e)},Draggable:function(t,e){var i=A(t);if(i&&0<i.length)return new _(i,e)},Resizable:function(t,e){var i=A(t);if(i&&0<i.length)return new B(i,e)},Grid:function(t){var e=A(t);if(e&&0<e.length)return new w(e)}}),"function"==typeof define&&define.amd&&define("js2uix",[],function(){return c}),t||(u.js2uix=c),c});