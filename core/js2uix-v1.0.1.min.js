/**
 * Name        : js2uix
 * Version     : 1.0.1
 * Developer   : JH.Yu
 * Email       : deshineplus@icloud.com
 * Language    : Javascript(ES5)
 * Copyright   : 2018 JH.Yu (js2uix)
 * GitHub      : https://github.com/js2uix/js2uix
 * License     : https://github.com/js2uix/js2uix/blob/master/LICENSE
 * build       : gulp.js
 * npm-install : npm install js2uix
 */
!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?(module.exports=e(t,!0),t.document||(module.exports=function(t){if(!t.document)throw new Error("js2uix is not support this browser!");return e(t)})):e(t)}("undefined"!=typeof window?window:this,function(u,t){"use strict";var x,s,i,p="js2uix",h=u.document,n=Object.setPrototypeOf,r=Object.getPrototypeOf,o=function(t){var e,s,i,a=[];for(e=0;e<t.length;e++)if(t[e].name===p)for(s=0;s<t[e].length;s++)a.push(t[e][s]);else if(t[e].nodeType)a.push(t[e]);else if("string"==typeof t[e]){var n=t[e],r=d(n);if(r.tagType&&0<r.tagType.length)for(n=x(n),i=0;i<n.length;i++)a.push(n[i]);else n=h.createTextNode(n),a.push(n)}else"number"==typeof t[e]&&(n=h.createTextNode(String(t[e])),a.push(n));return a},d=function(t){var e=t.replace(/\s/gi,""),s=e.match(/^#|^\./gi),i=t.match(/(<([^>]+)>)/gi),a=t.match(/[`~!@#$%^&*|\\\'\";:\/?]/gi);if(s&&a)for(var n=t.split(" "),r=0;r<n.length;r++){var o=n[r].match(/[`~!@#$%^&*|\\\'\";:\/?]/gi);(!o||1<o.length)&&(s=null)}return{full:e,idClass:s,tagType:i,spType:a}},a=function(){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",e="",s=0;s<8;s++){var i=Math.floor(Math.random()*t.length);e+=t.substring(i,i+1)}return String(Date.now()).substring(0,4)+e},l=(s=u.MutationObserver||u.WebKitMutationObserver,i=u.addEventListener,function(t,e){s?new s(function(t){t.forEach(function(t){e(t)})}).observe(t,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0}):i&&(t.addEventListener("DOMNodeInserted",e,!1),t.addEventListener("DOMNodeRemoved",e,!1))}),c=function(t){var e=(t=String(t)).split(" "),s=function(t){var e=[];return t=t.replace(/[^(가-힣ㄱ-ㅎㅏ-ㅣa-zA-Z0-9)]/gi,""),e[0]=parseInt(t.substr(0,4)),e[1]=parseInt(t.substr(4,2))-1,e[2]=parseInt(t.substr(6,2)),e},i=function(t){var e=[];return t=t.replace(/[^(가-힣ㄱ-ㅎㅏ-ㅣa-zA-Z0-9)]/gi,""),e[0]=parseInt(t.substr(0,2)),e[1]=parseInt(t.substr(2,2)),e[2]=parseInt(t.substr(4,2)),e};if(-1===t.indexOf("-")){var a=[];return a=2===e.length?s(e[0]).concat(i(e[1])):s(t).concat(i("000001")),new Date(a[0],a[1],a[2],a[3],a[4],a[5])}var n=t.split("-");if(!(n.length<3))return new Date(t);var r=new Date;return 2===n[0].length?new Date(r.getFullYear()+"-"+t):4===n[0].length?new Date(t+"-01"):void 0};(x=function(t){return new x.fx.init(t)}).fx=x.prototype={js2uix:"v1.0.0",constructor:x,query:function(t,e){var s=Array.prototype.slice.call(arguments),i=x.extend([],s.shift());i.name=p,n?i=n(i,r(e)):i.__proto__=r(e);for(var a=0;a<i.length;a++)i[a][p]||(i[a][p]={events:{},data:{}});return i}},x.fx.init=function(t){if(!t)return this;if("string"==typeof t){var e,s,i=d(t),a=i.full,n=i.idClass,r=i.tagType,o=i.spType;a&&(1<a.length&&n&&0<n.length?t=h.querySelectorAll(t):!n&&r&&0<r.length?(e=r[0].replace(/^<(.+?)>/g,function(t,e){return e}),1===r.length&&e.indexOf("input")<0?t=[h.createElement(e)]:((s=h.createElement(p)).innerHTML=t,(t=[s])[0].nodeName.toLowerCase()===p&&(t=t[0].childNodes))):t=n||o||r?!n&&1<a.length&&(-1!==o.indexOf(".")||-1!==o.indexOf("#"))?h.querySelectorAll(t):[h.createTextNode(t)]:h.querySelectorAll(t))}else if(t.nodeType)t=[t];else{if(t.name&&t.name===p)return t;if("function"==typeof t)return x.loaded(this,t);t===u&&(t=[u])}return x.fx.query(t,this)},x.fx.init.prototype=x.fx,x.extend=x.fx.extend=function(){var t,e=arguments,s=e[0]||{},i=e.length,a=1;for(s="object"!=typeof s&&"function"!=typeof s?{}:s,a===i&&(s=this,a--);a<i;a++)if(t=e[a])for(var n in t)t.hasOwnProperty(n)&&(s[n]=t[n]);return s},x.extend({typeIs:function(t){return null===t?t+"":"object"==typeof t||"function"==typeof t?Array.isArray(t)?"array":"function"==typeof t?"function":"object":typeof t},isArray:function(t){var e=x.typeIs(t),s=!!t&&"length"in t&&t.length;return(null==t||t!==t.window)&&"function"!==e&&!!("array"===e||0===s||"number"===e&&0<s&&s-1 in t)},isFunction:function(t){return"function"==typeof t},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},replaceAll:function(t,e,s){for(;-1!=t.indexOf(e);)t=t.replace(e,s);return t},codeToString:function(t){if(t)return decodeURI(this.replaceAll(t,"\\","%"))},stringToCode:function(t){if(t)return encodeURI(this.replaceAll(t,"\\","%"))}}),x.extend({addId:function(t,e){t&&e&&"string"==typeof e&&(t.id=e)},removeId:function(t,e){t&&e&&"string"==typeof e&&(t.id="")},hasId:function(t,e){var s=!1;return t&&e&&"string"==typeof e&&t.id===e&&(s=!0),s},addClass:function(t,e){if(t&&e&&"string"==typeof e&&0<(e=e.split(" ")).length)for(var s=0;s<e.length;s++)t.classList?t.classList.add(e[s]):t.className+=" "+e},removeClass:function(t,e){t&&e&&"string"==typeof e&&(t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," "))},hasClass:function(t,e){var s=!1;return t&&e&&"string"==typeof e&&(s=t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)),s},setAttr:function(t,e,s){if(t)if("object"==typeof e)for(var i in e)this.setAttr(t,i,e[i]);else"string"==typeof e&&(s||(s=""),"number"==typeof s&&(s=String(s)),t.setAttribute(e,s))},removeAttr:function(t,e){t&&e&&"string"==typeof e&&t.removeAttribute(e)},getAttr:function(t,e){if(t){if(e&&"string"==typeof e)return t.getAttribute(e)||void 0;if(!e)return t.attributes}}}),x.fx.extend({addId:function(t){return x.addId(this[0],t),this},removeId:function(t){return x.removeId(this[0],t),this},hasId:function(t){return x.hasId(this[0],t)},addClass:function(t){for(var e=0;e<this.length;e++)x.addClass(this[e],t);return this},removeClass:function(t){for(var e=0;e<this.length;e++)x.removeClass(this[e],t);return this},hasClass:function(t){return x.hasClass(this[0],t)},setAttr:function(t,e){for(var s=0;s<this.length;s++)x.setAttr(this[s],t,e);return this},removeAttr:function(t){for(var e=0;e<this.length;e++)x.removeAttr(this[e],t);return this},getAttr:function(t){if(0!==this.length)return x.getAttr(this[0],t)},index:function(){if(0<this.length)for(var t=this[0].parentNode.children,e=0;e<t.length;e++)if(this[0]===t[e])return e}}),x.extend({loop:function(t,e){var s,i=0;if(x.isArray(t))for(s=t.length;i<s&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},map:function(t,e){var s,i=0,a=x.isArray(t)?[]:{};if(x.extend(a,t,!0),x.isArray(t))for(s=t.length;i<s;i++)void 0!==e(i,t[i])&&(a[i]=e(i,t[i]));else for(i in t)void 0!==e(i,t[i])&&(a[i]=e(i,t[i]));return a},loaded:function(t,e){return"object"==typeof t&&t.hasOwnProperty("name")&&t.name===p&&-1===["document","window","html","body"].indexOf(t[0].nodeName.toLowerCase())&&(t=t[t.length-1],e=e.bind(t)),(h.attachEvent?"complete"===h.readyState:"loading"!==h.readyState)?e():h.addEventListener("DOMContentLoaded",e),x(t)},createDom:function(){var t,e,s=arguments,i=s[0],a=s[1],n=s[2];if(i&&"string"==typeof i&&(t=h.createElement(i),e=x(t),a&&"object"==typeof a))for(var r in a){var o=a[r];if("className"===r&&x.addClass(t,o),"idName"===r&&x.addId(t,o),"attributes"===r&&"object"==typeof o)for(var d in o)x.setAttr(t,d,o[d]);"styles"===r&&"object"==typeof o&&e.css(o),"content"===r&&e.html(o)}return Boolean(n),n?x(t):t},uiComponent:new function(){return this.module={},this.setModule=function(t,e){this.module[t]=e},this.getModule=function(t){return setTimeout(function(){delete this.module[t]}.bind(this),1e3),this.module[t]},{setModule:this.setModule.bind(this),getModule:this.getModule.bind(this)}}}),x.fx.extend({loop:function(t){return x.loop(this,t)},loaded:function(t){t&&"function"==typeof t&&x.loaded(this,t)},find:function(i){var a=[];return i&&("string"==typeof i?a=this[0].querySelectorAll(i):"object"==typeof i&&i.name===p&&x.loop(this,function(){for(var t=this.querySelectorAll("*"),e=0;e<t.length;e++){var s=t[e];x.loop(i,function(){this===s&&a.push(this)})}})),x(a)},parent:function(t){var e=[];if(t&&"string"==typeof t){var s,i=this[0].parentNode.parentNode;if(i){s=i.querySelectorAll(t);for(var a=0;a<s.length;a++)this[0].parentNode===s[a]&&e.push(s[a])}}else e=this[0].parentNode;return x(e)},parents:function(t){var e=[];if(t&&"string"==typeof t){var s=this[0].parentNode;if(t.match(/^#|^\./gi))for(;s&&"html"!==s.nodeName.toLowerCase();){var i=t.substr(1,t.length);if(x.hasClass(s,i)||x.hasId(s,i)){e=s;break}s=s.parentNode}else for(;s&&"html"!==s.nodeName.toLowerCase();){if(s.nodeName.toLowerCase()===t){e=s;break}s=s.parentNode}}return x(e)},hasParents:function(t){var e=!1;if(t&&"string"==typeof t){var s=this[0].parentNode;if(t.match(/^#|^\./gi))for(;s&&"html"!==s.nodeName.toLowerCase();){var i=t.substr(1,t.length);if(x.hasClass(s,i)||x.hasId(s,i)){e=!0;break}s=s.parentNode}}return e},children:function(t){var e,s=[],i=this[0].children;if(t&&"string"==typeof t){var a=t.substr(1,t.length);for(e=0;e<i.length;e++)(x.hasClass(i[e],a)||x.hasId(i[e],a))&&s.push(i[e])}else if(!t)for(e=0;e<i.length;e++)s.push(i[e]);return x(s)},hasChild:function(t){return 0<this.find(t).length&&t&&"string"==typeof t},nextNode:function(){return 0<this.length&&this[0].nextElementSibling?x(this[0].nextElementSibling):this},prevNode:function(){return 0<this.length&&this[0].previousElementSibling?x(this[0].previousElementSibling):this},firstNode:function(){return this.length<2?this:x(this[0])},lastINode:function(){return this.length<2?this:x(this[this.length-1])},siblingNodes:function(){if(0<this.length){for(var t=this[0],e=t.parentNode.childNodes,s=[],i=0;i<e.length;i++)t!==e[i]&&s.push(e[i]);try{return x(s)}finally{s=e=null}}},append:function(){var t=arguments;if(0<t.length){var e,s=o(t);for(e=0;e<s.length;e++)this[0].appendChild(s[e])}return this},prepend:function(){var t=arguments;if(0<t.length){var e,s,i=o(t);for(e=0;e<i.length;e++)(s=this[0].firstChild)?this[0].insertBefore(i[e],s):this[0].appendChild(i[e])}return this},after:function(){var t=arguments;if(0<t.length){var e,s=this[0].parentNode,i=o(t),a=this[0].nextSibling;for(e=0;e<i.length;e++)a?s.insertBefore(i[e],a):s.appendChild(i[e]),a=a?a.nextSibling:null}return this},before:function(){var t=arguments;if(0<t.length){var e,s=this[0].parentNode,i=o(t);for(e=0;e<i.length;e++)s.insertBefore(i[e],this[0])}return this},html:function(t){if(0<this.length){for(var e=0;e<this.length;e++)this[e].innerHTML="";t&&this.append(t)}return this},text:function(t){if(0<this.length){if(!t&&""!==t)return this[0].innerText;if("string"==typeof t||"number"==typeof t||""===t)for(var e=0;e<this.length;e++)this[e].innerText=t}return this},value:function(t){if(t){if("object"!=typeof t||"function"!=typeof t)for(var e=0;e<this.length;e++)this[e].value=t;return this}return this[0].value},empty:function(){return this.html()},replace:function(t){var e=this,s=this[0],i=s.parentNode;if(t&&("string"==typeof t||"object"==typeof t)){if("string"==typeof t){var a=d(t);e=a.idClass||a.spType||a.tagType?x(t):x(h.createTextNode(t))}else t.name&&t.name===p?e=t:t.nodeName&&(e=x[t]);x(s).after(e),i.removeChild(s)}return e},remove:function(){for(var t=this.length-1;0<=t;t--){var e=this[t];if(e){var s=this[t].parentNode;s&&s.removeChild(e)}}},clone:function(t){var e=[];try{return x.loop(this,function(){e.push(this.cloneNode(t||!0))}),x(e)}finally{e=null}}});var m=function(t,e){var s,i,a,n="",r=t.replace(/^-/gi,"").split("-");for(s=0;s<r.length;s++)n+=0===s?r[s]:r[s].charAt(0).toUpperCase()+r[s].slice(1);"zIndex"===n||"opacity"===n||isNaN(parseInt(e))||(i="string"==typeof e&&-1!==e.indexOf("%")?"%":"px",e=parseInt(e)+i),a=[n,e];try{return a}finally{r=n=a=null}},e=function(t,e,s){return 0===s||"number"==typeof s?(t.css(e,s),this):s&&null!==s?void 0:t.css(e)};x.fx.extend({css:function(){var t=arguments,e=t.length;if(t&&0<e&&e<=2){var s=[];if(1===e&&"string"==typeof t[0]){if(this[0]!==h&&this[0]!==u){var i=u.getComputedStyle(this[0],null).getPropertyValue(t[0])||this[0].style[t[0]];return isNaN(parseInt(i))?i:parseInt(i)}}else if(1===e&&"object"==typeof t[0])for(var a in t[0])s.push(m(a,t[0][a]));else 2!==e||"string"!=typeof t[0]||"string"!=typeof t[1]&&"number"!=typeof t[1]||s.push(m(t[0],t[1]));for(var n=0;n<this.length;n++)for(var r=0;r<s.length;r++)this[n].style[s[r][0]]=s[r][1]}return this},top:function(t){return e(this,"top",t)},left:function(t){return e(this,"left",t)},width:function(t){if(this)return e(this,"width",t)},height:function(t){if(this)return e(this,"height",t)},offset:function(){if(this[0]){var t=this[0].getBoundingClientRect(),e={x:t.x,y:t.y,top:t.top,bottom:t.bottom,left:t.left,right:t.right,width:t.width,height:t.height,paddingL:this.css("padding-left"),paddingR:this.css("padding-right"),paddingT:this.css("padding-top"),paddingB:this.css("padding-bottom")};return this[0].getClientRects().length?e:void 0}},fadeIn:function(i,a){return x.loop(this,function(){var e=this;e.style.display="block",e.style.opacity=0;var s=+new Date;!function t(){e.style.opacity=+e.style.opacity+(new Date-s)/(i||300),s=+new Date,+e.style.opacity<1&&(u.requestAnimationFrame?requestAnimationFrame(t):setTimeout(t,16)),1<+e.style.opacity&&(e.style.opacity=1,"function"==typeof a&&a())}()}),this},fadeOut:function(i,a){return x.loop(this,function(){var e=this,s=+new Date;e.style.opacity=1,function t(){e.style.opacity=+e.style.opacity-(new Date-s)/(i||500),s=+new Date,0<+e.style.opacity&&(u.requestAnimationFrame?requestAnimationFrame(t):setTimeout(t,16)),+e.style.opacity<.1&&(e.style.display="none",e.style.opacity=0,"function"==typeof a&&a())}()}),this},show:function(){if(this&&0<this.length)for(var t=0;t<this.length;t++){var e=u.getComputedStyle(this[t],null).getPropertyValue("display");""!==e&&"inline-block"===e||(e="block"),this[t].style.display=e}return this},hide:function(){if(this&&0<this.length)for(var t=0;t<this.length;t++)this[t].style.display="none";return this}});var f=function(t,e){var s=e[0].split("."),i=s[1];x.loop(t,function(){var t=s[0];this[p].events[t]||(this[p].events[t]=[]),this.addEventListener(s[0],e[e.length-1],!1),this[p].events[t].push({eventName:t,eventKey:i||null,handler:e[e.length-1]})})},g=function(s,i){var e=i[0],a=i[1],n=i[2];e&&a&&n&&x.loop(s,function(){var t=x(this).find(a);t.removeEvent(e,n),0<t.length&&f(t,i),l(this,function(t){if(("childList"===t.type||"attributes"===t.type)&&(0<t.addedNodes.length||0<t.removedNodes.length))for(var e=0;e<t.addedNodes.length;e++){1===t.addedNodes[e].nodeType&&g(s,i)}})})},y=function(t,u){x.loop(t,function(){var t,e,s=this[p].events;if(u){var i,a=u.length,n=u[0],r=u[u.length-1],o=u[0].split("."),d=o[0],h=o[1]||null;if(1===a&&"string"==typeof n){if("all"===d||"js2uix_only"===h)for(var l in s)for(e=0;e<s[l].length;e++)i=s[l][e],this.removeEventListener(l,i.handler),i.removed=!0;else if(s[d])for(e=0;e<s[d].length;e++)(i=s[d][e]).eventKey===h&&(this.removeEventListener(d,s[d][e].handler),s[d][e].removed=!0)}else if(2===a&&"string"==typeof n&&("function"==typeof r||"object"==typeof r)&&s[d])for(e=0;e<s[d].length;e++)(i=s[d][e]).eventKey===h&&r===s[d][e].handler&&(this.removeEventListener(d,s[d][e].handler),s[d][e].removed=!0)}else for(t in s)for(e=0;e<s[t].length;e++)this.removeEventListener(t,s[t][e].handler),s[t][e].removed=!0}),x.loop(t,function(){var t,e,s=this[p].events;for(t in s)for(e=s[t].length-1;0<=e;e--)s[t][e].removed&&s[t].splice(e,1)})};x.fx.extend({addEvent:function(){var t=arguments,e=t.length;if(0<e){var s=typeof t[0],i=typeof t[t.length-1];if("object"===s)for(var a in t[0])1===t.length?f(this,[a,t[0][a]]):2===t.length&&"string"==typeof i&&g(this,[a,t[1],t[0][a]]);else"string"!==s||"function"!==i&&"object"!==i||(2===e?f(this,t):3===e&&g(this,t))}return this},removeEvent:function(){var t=arguments;return t.length<1?y(this):y(this,t),this}});var v=function(t,e){this._target=t,this._onceMemory={success:null,error:!1},this._init(this._target,e)};(v.prototype={_xhr:function(){try{return new u.XMLHttpRequest}catch(t){throw error}},_setDataType:function(t){var e=t.url.split("."),s=e[e.length-1].match(/xml|html|json|js|jsp|asp|php|txt/gi);return s[0]?s[0]&&s[0]!==t.dataType?("js"===s[0]&&(s[0]="script"),s[0]):void 0:"text"},_getOptionObject:function(t,e){var s={url:document.location.href,method:"POST",data:null,async:!0,cache:!0,success:null,error:null,upload:!1,jsonParse:!0,dataType:"json",contentType:"application/x-www-form-urlencoded; charset=UTF-8"};if((s=x.extend(s,e)).dataType=this._setDataType(e)||s.dataType,t&&(s.type="POST",s.upload=!0,s.url=s.url+"?upload"),!1===e.cache){var i="?";-1!==e.url.indexOf("?")&&(i="&"),e.url=e.url+i+"cache"+Date.now()}return s},_getQueryString:function(t){var s=[];return"object"==typeof t&&x.loop(t,function(t,e){s.push(t+"="+e)}),s.join("&")},_setUploadHandler:function(t,a){t.upload.addEventListener("progress",function(t){var e=0,s=t.loaded||t.position,i=t.total;t.lengthComputable&&(e=Math.ceil(s/i*100)),a.progress&&"function"==typeof a.progress&&a.progress(e)},!1)},_setJsonParseData:function(t,e){var s=e,i=t.dataType;if("script"===i){var a=document.createElement("script");a.type="text/javascript",a.text=s,document.head.appendChild(a).parentNode.removeChild(a),s=a.text}else if("xml"===i||"html"===i){s=(new DOMParser).parseFromString(s,"text/"+i)}else{if("text"===i||"txt"===i)return s;s=t.jsonParse&&JSON.parse(s)||s}return s},_loadAjaxRequest:function(s,t){var i=this,a=this._xhr();a.open(s.method,s.url,s.async),s.data&&!s.upload&&a.setRequestHeader("Content-type",s.contentType),a.upload&&s.upload&&this._setUploadHandler(a,s),a.onload=function(t){if(200<=a.status&&a.status<400&&4==a.readyState){var e=a.responseText;s.success&&"function"==typeof s.success&&(e=i._setJsonParseData(s,e),s.success(e,a.responseText,a),i._onceMemory.error=!1,i._onceMemory.success={value:e,responseText:a.responseText,request:a})}else s.error&&"function"==typeof s.success&&(s.error(),i._onceMemory.error=!0,i._onceMemory.success=null)},a.onerror=function(){s.error&&"function"==typeof s.success&&(s.error(),i._onceMemory.error=!0,i._onceMemory.success=null)},a.send(t)},_setAjaxData:function(t,e){var s;if(e=this._getOptionObject(t,e),t){var i=t[0].querySelectorAll("input[type=file]"),a=t.find("*").not("input[type=file]"),n=0;if(t.attr("enctype","multipart/form-data"),s=new FormData,x.loop(i,function(){var t=this.files;x.loop(t,function(t,e){s.append(t,e),n++})}),x.loop(a,function(){s.append(this.name,this.value),n++}),0===n)return!1}t||(s=this._getQueryString(e.data)),this._loadAjaxRequest(e,s)},_init:function(t,e){if(t&&(!t[0]||"form"!==t[0].nodeName.toLowerCase()))return!1;this._setAjaxData(t,e)},done:function(t){if("function"==typeof t&&!this._onceMemory.error){var e=this._onceMemory.success;try{t(e.value,e.responseText,e.request)}finally{e=null,this._onceMemory.success=null}}},fail:function(t){if("function"==typeof t&&0===this._onceMemory.success.length)try{t()}finally{this._onceMemory.error=!1}}}).constructor=v;var C=function(){return this.location=null,this.hash=null,this.router={},this.setRouter=function(){var t=arguments,e=1<t.length?t[0]:null,s=1<t.length?t[1]:null;if(1===t.length&&(e="/all",s=t[0]),e&&0===e.indexOf("/")){var i=e.substr(1,e.length-1),a=i||"index";this.router[a]=s}},this.getHash=function(){var t=(this.location=u.location).hash,e="index";return t&&0===t.indexOf("#")&&(e=t.substr(2,t.length-1)),this.hash=e},this.checkRouter=function(){var t=this.getHash(),e={location:this.location,urlString:this.hash};"function"==typeof this.router.all&&this.router.all(e),"function"==typeof this.router[t]&&this.router[t](e)},this.setControl=function(){u.addEventListener("load",this.checkRouter.bind(this)),u.addEventListener("hashchange",this.checkRouter.bind(this))},this.init=function(){this.getHash(),this.setControl()},this.init(),{on:this.setRouter.bind(this)}},b=function(t){this.state={},this.props={},this.domState={parent:null,render:null,virtual:null,isMount:!1,uniqueId:Date.now()},t.super&&t.super.call(this),Object.defineProperty(this,"state",{writable:!1})};b.prototype={setState:function(t,e){t&&"object"==typeof t&&!Array.isArray(t)?x.loop(t,function(t,e){this.state[t]=e}.bind(this)):t&&e&&"string"==typeof t&&(this.state[t]=e),this.setUpdateState()},setUpdateState:function(){this.setRender(),"function"==typeof this.onStateWillChange&&this.onStateWillChange()},setProps:function(t){t&&"object"==typeof t&&!Array.isArray(t)&&x.loop(t,function(t,e){this.props[t]=e}.bind(this)),"function"==typeof this.onPropsWillChange&&this.onPropsWillChange()},setPropsState:function(t){return this.setProps(t),this.setRender(t)},setRender:function(){if(this.render&&"function"==typeof this.render){var t=x(this.render());if(this.setForceUpdate(t),t&&this.domState.virtual)return{$$Dom:this.domState.virtual,props:this.setPropsState.bind(this),setRenderState:this.setRenderState.bind(this)}}},setRenderState:function(t){x.loop(t,function(t,e){this.domState[t]=e}.bind(this))},setForceUpdate:function(t){if(this.render&&"function"==typeof this.render&&t&&t[0]&&(t[0][p].componentId=p+this.domState.uniqueId,this.domState.virtual=t[0],this.domState.render||(this.domState.render=t[0]),this.domState.isMount)){var e=this.domState.render,s=this.domState.virtual,u=function(t,e,s){t.insertBefore(e,s)},l=function(o,t,d,h){var l=[];x.loop(t,function(t){var e,s=d[t];if(s){var i=this.nodeName,a=this.nodeType,n=s.nodeName,r=s.nodeType;n===i&&r===a||(h?(e=this.cloneNode(!0),this.parentNode.insertBefore(e,this),u(o,this,s)):l.push(this))}else h?(e=this.cloneNode(!0),this.parentNode.insertBefore(e,this),u(o,this,s)):l.push(this)}),0<l.length&&x.loop(l,function(){var t,e;t=this.parentNode,(e=this)&&t.removeChild(e)})},c=function(t,e){if(1===t.nodeType&&1===e.nodeType){for(var s=t.nodeName.toLowerCase(),i=e.nodeName.toLowerCase(),a=t.childNodes,n=e.childNodes,r=e.attributes,o=0;o<r.length;o++)t.setAttribute(r[o].name,r[o].value);if(("input"===s&&"input"===i||"textarea"===s&&"textarea"===i||"select"===s&&"select"===i)&&(t.value!==e.value&&(t.value=e.value),"password"!==t.type&&"textarea"!==s||t.removeAttribute("value")),a&&n){if(n.length!==a.length)return n.length>a.length?l(t,n,a,!0):l(t,a,n,!1),c(t,e),!1;for(var d=0;d<n.length;d++){var h=n[d][p];h&&""!==h&&h.componentId||c(a[d],n[d])}}}else 3===t.nodeType&&3===e.nodeType&&t.textContent!==e.textContent&&(t.textContent=e.textContent)};c(e,s)}}},x.extend({Ajax:function(t){return new v(null,t)},AjaxDownLoad:function(t,e,s){var i=t[t.length-1],n=0,r=null;function o(t,e,s,i){var a=document.createElement("a");a.href=t+e+"."+s,a.download=e+"."+s,document.body.appendChild(a),a.click(),document.body.removeChild(a),n++,i&&n<r.length&&setTimeout(function(){o(r[n].link,r[n].name,r[n].type,i)},i)}"object"==typeof t||Array.isArray(t)?i&&"number"==typeof i?o((r=t)[n].link,r[n].name,r[n].type,i):x.loop(t,function(t,e){e&&e.link&&e.name&&e.type&&o(e.link,e.name,e.type,!1)}):o(t,e,s,!1)},Component:function(t){var e,s=function(t){return b.call(this,t),this.setRender.call(this)};for(e in(s.prototype=Object.create(b.prototype)).constructor=s,t)t.hasOwnProperty(e)&&"super"!==e&&(s.prototype[e]=t[e]);return new s(t)},Export:function(t,e){x.uiComponent.setModule(t,e)},Import:function(t){return x.uiComponent.getModule(t)},Render:function(){var t=arguments;if(t&&1<t.length)for(var e=x(t[t.length-1])[0],s=0;s<t.length-1;s++){var i=t[s],a=i.$$Dom;a&&e&&(x(e).append(a),i.setRenderState({parent:e,render:a,isMount:!0}))}},Router:function(){return new C}}),x.fx.extend({AjaxFrom:function(t){return new v(this,t)}});var N=x("html"),j=function(t,e){return this.d3={},this.nodes={},this.target=t,this.props={chartType:"",nameAxisX:"",typeAxisX:"string",timeAxisX:["week",1],timeFormat:"%Y-%m-%d",tickAxisY:10,tickGridY:10,tickGridOpacity:.2,tickGridDashNum:2,rotateAxisX:0,posXAxisX:10,posYAxisX:10,fontSizeX:11,fontSizeY:11,fontSizeTitle:12,nameAxisY:"",typeAxisY:"number",title:"",titleBox:!0,lineCurve:!0,colorful:!0,colorAlpha:1,circleThickNum:.5,layoutW:0,layoutH:0,duration:200,gridLine:!0,groupInfoBox:!0,shadeColor:"",topPos:40,rightPos:30,bottomPos:30,leftPos:30},this.state={autoMode:!1,clear:!1,colorArray:["#add5d7","#47acb1","#ffe8af","#ffcd33","#f9aa7b","#f26522","#7fb6ff","#7876ff","#a5a8aa","#676766"],dataLength:0,idName:"",max_width:1740,min_width:200,min_height:100,resize:!1,uniqueId:"",uniqueName:"",update:!1},this.axis=null,this.init(e),{name:"js2uix-d3-chart",setData:this.setData.bind(this)}};(j.prototype={uiChartClass:"js2uix-chart",renderChartDefaultSetting:function(t){0<t.length&&(this.state.uniqueId=a(),this.state.uniqueName="js2uix"+this.state.uniqueId,t.addClass(this.uiChartClass),t[0].id||t.addId(p+this.state.uniqueId),this.state.idName=t.getAttr("id"))},setUserShadeColorSetting:function(t){if(t){for(var e=t.replace("#",""),s=parseInt(e.substring(0,2),16),i=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16),n=255/(10*Math.max(s,Math.max(i,a))),r=[],o=2;o<12;o++)r.push((d=(d="rgb("+parseInt(s*n*o)+","+parseInt(i*n*o)+","+parseInt(a*n*o)+",1)").match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===d.length?"#"+("0"+parseInt(d[1],10).toString(16)).slice(-2)+("0"+parseInt(d[2],10).toString(16)).slice(-2)+("0"+parseInt(d[3],10).toString(16)).slice(-2):"");0<r.length&&(this.state.colorArray=r)}var d},setCommonChartInfoString:function(t){var e="Max",s=this.props.fontSizeTitle;this.props.titleBox&&("number"!=typeof s&&(s=12),this.axis.axis_string&&(e=this.axis.axis_string),"basic"===t?this.nodes.title_g.attr("transform","rotate(-0)").attr("dx","0em").attr("y",-20).attr("dy","0.7em").attr("text-anchor","start").attr("fill","#000").attr("style","font-size:"+s+"px").text(e):this.nodes.title_g.attr("transform","rotate(-0)").attr("y",-5).attr("dy","0.71em").attr("text-anchor","middle").attr("fill","#000").attr("style","font-size:"+s+"px").text(e))},setCommonChartAxisYNode:function(){var t=this.props.fontSizeY;"number"!=typeof t&&(t=11),this.state.update?this.nodes.axisY_g.call(u.d3.axisLeft(this.d3.y).ticks(this.axis.tickAxisY)):this.nodes.axisY_g.call(u.d3.axisLeft(this.d3.y).ticks(this.axis.tickAxisY)).attr("style","font-size:"+t+"px")},setCommonChartAxisXNode:function(){var t=10,e=20,s=0,i=this.props.fontSizeX,a=this.nodes.axisX_g.attr("transform","translate(0,"+this.d3.height+")").selectAll("text").style("text-anchor","middle");"number"!=typeof this.axis.posXAxisX||void 0===this.axis.posXAxisX&&null===this.axis.posXAxisX||(t=this.axis.posXAxisX,a.attr("dx",t+"px")),"number"!=typeof this.axis.posYAxisX||void 0===this.axis.posYAxisX&&null===this.axis.posYAxisX||(e=this.axis.posYAxisX,a.attr("dy",e+"px")),"number"!=typeof this.axis.rotateAxisX||void 0===this.axis.rotateAxisX&&null===this.axis.rotateAxisX||(s=this.axis.rotateAxisX,a.attr("transform","rotate(-"+s+")")),"number"!=typeof i&&(i=11),this.nodes.axisX_g.attr("style","font-size:"+i+"px")},setCommonChartAxisXYGrid:function(){this.props.gridLine&&(this.state.update||this.nodes.gridX_g.call(u.d3.axisBottom(this.d3.x).tickSize(-this.d3.height,0,0).tickFormat("")),this.nodes.gridY_g.call(u.d3.axisLeft(this.d3.y).ticks(this.axis.tickGridY).tickSize(-this.d3.width,0,0).tickFormat("")))},setCommonCompareInfo:function(t,e,s){if(!this.props.groupInfoBox)return!1;var i=t.g.append("g").attr("font-family","sans-serif").attr("text-anchor","end").selectAll("g").data(e).enter().append("g").attr("transform",function(t,e){return"translate(0,"+(20*e-20)+")"});try{i.append("rect").attr("x",t.width-15).attr("width",15).attr("height",15).attr("fill",function(t){return s(t)}),i.append("text").attr("style","font-size:12px").attr("x",t.width-20).attr("y",8).attr("dy","0.22em").text(function(t){return t}),i.exit().remove()}finally{e=t=null}},js2uixSingleAreaType:function(t){var e="axisX",s="axisY",i=t.map(function(t){return{axisX:t[this.axis.axisX],axisY:t[this.axis.axisY]}}.bind(this)),a=u.d3.extent(i.map(function(t){return t[e]}),function(t){return c(t)}),n=u.d3.extent(i.map(function(t){return t[s]}),function(t){return parseInt(t)});try{if(this.state.d3_area||(this.state.d3_area=d3.area()),this.props.lineCurve&&this.state.d3_area.curve(u.d3.curveBasis),"date"===this.axis.typeAxisX?(this.d3.x=u.d3.scaleTime().domain([a[0],a[1]]).rangeRound([0,this.d3.width]),this.state.d3_area.x(function(t){return this.d3.x(c(t[e]))}.bind(this))):(this.d3.x=u.d3.scaleBand().domain(i.map(function(t){return t[e]})).rangeRound([0,this.d3.width]),this.state.d3_area.x(function(t){return this.d3.x(t[e])+.5*this.d3.x.bandwidth()}.bind(this))),this.d3.y=u.d3.scaleLinear().domain([0,n[1]]).rangeRound([this.d3.height,0]),this.state.d3_area.y(function(t){return this.d3.y(t[s])}.bind(this)),this.state.d3_area.y1(function(t){return this.d3.y(t[s])}.bind(this)),this.state.d3_area.y0(this.d3.y(0)),!this.state.update){var r=u.d3.scaleOrdinal().range(this.state.colorArray),o=u.d3.timeFormat(this.axis.timeFormat);this.nodes.gridX_g=this.d3.g.append("g").attr("class","grid_x").attr("transform","translate(0,"+this.d3.height+")").attr("opacity",this.props.tickGridOpacity),this.nodes.gridY_g=this.d3.g.append("g").attr("class","grid_y").attr("opacity",this.props.tickGridOpacity),this.nodes.pathArea=this.d3.g.append("path").attr("class","area").style("fill",r).attr("fill-opacity",this.props.colorAlpha),this.nodes.axisX_g=this.d3.g.append("g").attr("class","axis axis--x"),this.nodes.axisY_g=this.d3.g.append("g").attr("class","axis axis--y"),this.nodes.title_g=this.d3.g.append("g").attr("class","title").append("text"),"date"===this.axis.typeAxisX?this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x).ticks(u.d3[this.axis.timeAxisX[0]].every(this.axis.timeAxisX[1])).tickFormat(function(t){return o(t)})):this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x)),this.setCommonChartInfoString("basic"),this.setCommonChartAxisXNode()}this.nodes.pathArea.datum(i).transition().duration(this.props.duration).attr("d",this.state.d3_area),this.nodes.pathArea.exit().remove(),this.setCommonChartAxisYNode(),this.setCommonChartAxisXYGrid()}finally{i=t=null}},js2uixCompareAreaType:function(t){var s=this,e="axisX",i="axisY",a=0,n=[],r=t[Object.keys(t)[0]].map(function(t){return t[this.axis.axisX]}.bind(this)),o=u.d3.extent(r,function(t){return c(t)}),d=t;try{if(this.state.d3_area||(this.state.d3_area=u.d3.area()),this.state.d3_line||(this.state.d3_line=u.d3.line()),this.props.lineCurve&&(this.state.d3_area.curve(u.d3.curveBasis),this.state.d3_line.curve(u.d3.curveBasis)),Array.isArray(t)||(d=[],x.loop(t,function(t,e){var s=this;d.push(e.map(function(t){return{axisX:t[s.axis.axisX],axisY:t[s.axis.axisY]}}))}.bind(this))),x.loop(t,function(t,e){var s=this,i=u.d3.max(e,function(t){return t[s.axis.axisY]});a<i&&(a=i+.2*i),n.push(t)}.bind(this)),"date"===this.axis.typeAxisX?(this.d3.x=u.d3.scaleTime().domain([o[0],o[1]]).rangeRound([0,this.d3.width]),this.state.d3_area.x(function(t){return this.d3.x(c(t[e]))}.bind(this)),this.state.d3_line.x(function(t){return this.d3.x(c(t[e]))}.bind(this))):(this.d3.x=u.d3.scaleBand().domain(r).rangeRound([0,this.d3.width]),this.state.d3_area.x(function(t){return this.d3.x(t[e])+.5*this.d3.x.bandwidth()}.bind(this)),this.state.d3_line.x(function(t){return this.d3.x(t[e])+.5*this.d3.x.bandwidth()}.bind(this))),this.state.d3_area.y(function(t){return this.d3.y(t[i])}.bind(this)),this.state.d3_line.y(function(t){return this.d3.y(t[i])}.bind(this)),this.d3.y=u.d3.scaleLinear().domain([0,a]).rangeRound([this.d3.height,0]),this.state.d3_area.y1(function(t){return this.d3.y(t[i])}.bind(this)),this.state.d3_area.y0(this.d3.y(0)),this.state.update)this.nodes.pathNode=this.nodes.pathNode.data(d),this.nodes.lineNode=this.nodes.lineNode.data(d);else{var h=u.d3.scaleOrdinal().range(this.state.colorArray),l=u.d3.timeFormat(this.axis.timeFormat);this.nodes.gridX_g=this.d3.g.append("g").attr("class","grid_x").attr("transform","translate(0,"+this.d3.height+")").attr("opacity",this.props.tickGridOpacity),this.nodes.gridY_g=this.d3.g.append("g").attr("class","grid_y").attr("opacity",this.props.tickGridOpacity),this.d3.g.append("g").attr("class","pathBox").selectAll("path").data(d,function(t,e){u.d3.select(this).append("path").attr("class","area").attr("fill-opacity",s.props.colorAlpha).attr("fill",function(){return h(n[e])}),u.d3.select(this).append("path").attr("class","line").attr("stroke-width","1.5").attr("fill","none").attr("stroke",function(){return h(n[e])})}),this.nodes.axisX_g=this.d3.g.append("g").attr("class","axis axis--x"),this.nodes.axisY_g=this.d3.g.append("g").attr("class","axis axis--y"),this.nodes.title_g=this.d3.g.append("g").attr("class","title").append("text"),this.nodes.pathNode=this.d3.g.select("g.pathBox").selectAll("path.area").data(d),this.nodes.lineNode=this.d3.g.select("g.pathBox").selectAll("path.line").data(d),"date"===this.axis.typeAxisX?this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x).ticks(u.d3[this.axis.timeAxisX[0]].every(this.axis.timeAxisX[1])).tickFormat(function(t){return l(t)})):this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x)),this.setCommonCompareInfo(this.d3,n,h),this.setCommonChartInfoString("basic"),this.setCommonChartAxisXNode()}this.nodes.pathNode.transition().duration(this.props.duration).attr("d",this.state.d3_area),this.nodes.lineNode.transition().duration(this.props.duration).attr("d",this.state.d3_line),this.nodes.pathNode.exit().remove(),this.nodes.lineNode.exit().remove(),this.setCommonChartAxisYNode(),this.setCommonChartAxisXYGrid()}finally{d=t=null}},js2uixSingleLineType:function(t){var e="axisX",s=t.map(function(t){return{axisX:t[this.axis.axisX],axisY:t[this.axis.axisY]}}.bind(this)),i=u.d3.extent(s.map(function(t){return t[e]}),function(t){return c(t)}),a=u.d3.extent(s.map(function(t){return t.axisY}),function(t){return parseInt(t)});try{if(this.state.d3_line||(this.state.d3_line=u.d3.line()),this.props.lineCurve&&this.state.d3_line.curve(u.d3.curveBasis),"date"===this.axis.typeAxisX?(this.d3.x=u.d3.scaleTime().domain([new Date(i[0]),new Date(i[1])]).rangeRound([0,this.d3.width]),this.state.d3_line.x(function(t){return this.d3.x(c(t[e]))}.bind(this))):(this.d3.x=u.d3.scaleBand().domain(s.map(function(t){return t[e]})).rangeRound([0,this.d3.width]),this.state.d3_line.x(function(t){return this.d3.x(t[e])+.5*this.d3.x.bandwidth()}.bind(this))),this.d3.y=u.d3.scaleLinear().domain([0,a[1]]).rangeRound([this.d3.height,0]),this.state.d3_line.y(function(t){return this.d3.y(t.axisY)}.bind(this)),!this.state.update){var n=u.d3.scaleOrdinal().range(this.state.colorArray),r=u.d3.timeFormat(this.axis.timeFormat);this.nodes.gridX_g=this.d3.g.append("g").attr("class","grid_x").attr("transform","translate(0,"+this.d3.height+")").attr("opacity",this.props.tickGridOpacity),this.nodes.gridY_g=this.d3.g.append("g").attr("class","grid_y").attr("opacity",this.props.tickGridOpacity),this.nodes.axisX_g=this.d3.g.append("g").attr("class","axis axis--x"),this.nodes.axisY_g=this.d3.g.append("g").attr("class","axis axis--y"),this.nodes.title_g=this.d3.g.append("g").attr("class","title").append("text"),this.nodes.pathArea=this.d3.g.append("path").attr("class","line").attr("stroke",n).attr("stroke-width","1.5").attr("fill","none"),"date"===this.axis.typeAxisX?this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x).ticks(u.d3[this.axis.timeAxisX[0]].every(this.axis.timeAxisX[1])).tickFormat(function(t){return r(t)})):this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x)),this.setCommonChartInfoString("basic"),this.setCommonChartAxisXNode()}this.nodes.pathArea.datum(s).transition().duration(this.props.duration).attr("d",this.state.d3_line),this.nodes.pathArea.exit().remove(),this.setCommonChartAxisYNode(),this.setCommonChartAxisXYGrid()}finally{s=t=null}},js2uixCompareLineType:function(t){var e,a=0,s=t[Object.keys(t)[0]].map(function(t){return t[this.axis.axisX]}.bind(this)),i=u.d3.extent(s,function(t){return c(t)}),n=[],r=t;try{if(this.state.d3_line||(this.state.d3_line=u.d3.line()),this.props.lineCurve&&this.state.d3_line.curve(u.d3.curveBasis),Array.isArray(t)||(r=[],x.loop(t,function(t,e){var s=this;r.push(e.map(function(t){return{axisX:t[s.axis.axisX],axisY:t[s.axis.axisY]}}))}.bind(this))),x.loop(t,function(t,e){var s=this,i=u.d3.max(e,function(t){return t[s.axis.axisY]});a<i&&(a=i+.2*i),n.push(t)}.bind(this)),"date"===this.axis.typeAxisX?(this.d3.x=u.d3.scaleTime().domain([new Date(i[0]),new Date(i[1])]).rangeRound([0,this.d3.width]),this.state.d3_line.x(function(t){return this.d3.x(c(t.axisX))}.bind(this))):(this.d3.x=u.d3.scaleBand().domain(s).rangeRound([0,this.d3.width]),this.state.d3_line.x(function(t){return this.d3.x(t.axisX)+.5*this.d3.x.bandwidth()}.bind(this))),this.d3.y=u.d3.scaleLinear().domain([0,a]).rangeRound([this.d3.height,0]),this.state.d3_line.y(function(t){return this.d3.y(t.axisY)}.bind(this)),this.state.update)e=this.nodes.pathNode.data(r);else{var o=u.d3.timeFormat(this.axis.timeFormat),d=u.d3.scaleOrdinal().range(this.state.colorArray);this.nodes.gridX_g=this.d3.g.append("g").attr("class","grid_x").attr("transform","translate(0,"+this.d3.height+")").attr("opacity",this.props.tickGridOpacity),this.nodes.gridY_g=this.d3.g.append("g").attr("class","grid_y").attr("opacity",this.props.tickGridOpacity),this.nodes.axisX_g=this.d3.g.append("g").attr("class","axis axis--x"),this.nodes.axisY_g=this.d3.g.append("g").attr("class","axis axis--y"),this.nodes.title_g=this.d3.g.append("g").attr("class","title").append("text"),(e=this.d3.g.append("g").attr("class","pathBox").selectAll("path").data(r).enter().append("path")).attr("class","line").attr("stroke",function(t,e){return d(n[e])}).attr("stroke-width","1.5").attr("fill","none"),this.nodes.pathNode=this.d3.g.select("g.pathBox").selectAll("path.line"),"date"===this.axis.typeAxisX?this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x).ticks(u.d3[this.axis.timeAxisX[0]].every(this.axis.timeAxisX[1])).tickFormat(function(t){return o(t)})):this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x)),this.setCommonCompareInfo(this.d3,n,d),this.setCommonChartInfoString("basic"),this.setCommonChartAxisXNode()}e.transition().duration(this.props.duration).attr("d",this.state.d3_line),e.exit().remove(),this.setCommonChartAxisYNode(),this.setCommonChartAxisXYGrid()}finally{n=e=r=t=null}},js2uixSingleBarType:function(t){var e,s=this,i="axisX",a="axisY",n=t.map(function(t){return{axisX:t[this.axis.axisX],axisY:t[this.axis.axisY]}}.bind(this)),r=n.map(function(t){return t[a]}),o=u.d3.extent(n.map(function(t){return t[i]}),function(t){return c(t)}),d=u.d3.extent(r,function(t){return parseInt(t)});try{if("date"===this.axis.typeAxisX&&(this.d3.x2=u.d3.scaleTime().domain([new Date(o[0]),new Date(o[1])]).rangeRound([0,this.d3.width])),this.d3.x=u.d3.scaleBand().padding(.1).domain(n.map(function(t){return t[i]})).rangeRound([0,this.d3.width]),this.d3.y=u.d3.scaleLinear().domain([0,d[1]]).rangeRound([this.d3.height,0]),this.state.update)e=this.nodes.rectNode.data(n,function(t){return t[i]});else{var h=u.d3.scaleOrdinal().range(this.state.colorArray),l=u.d3.timeFormat(this.axis.timeFormat);this.nodes.gridX_g=this.d3.g.append("g").attr("class","grid_x").attr("transform","translate(0,"+this.d3.height+")").attr("opacity",this.props.tickGridOpacity),this.nodes.gridY_g=this.d3.g.append("g").attr("class","grid_y").attr("opacity",this.props.tickGridOpacity),this.nodes.axisX_g=this.d3.g.append("g").attr("class","axis axis--x"),this.nodes.axisY_g=this.d3.g.append("g").attr("class","axis axis--y"),this.nodes.title_g=this.d3.g.append("g").attr("class","title").append("text"),this.nodes.pathArea=this.d3.g.append("g").attr("class","graphBox"),e=this.nodes.pathArea.selectAll("g").data(n,function(t){return t[i]}).enter().append("rect").attr("class","ui-chart-bar").attr("width",this.d3.x.bandwidth()).attr("x",function(t){return this.d3.x(t[i])}.bind(this)).attr("fill",function(t){return h(t[i])}).attr("fill-opacity",this.props.colorAlpha).attr("data-name",function(t){return t[i]}).attr("data-value",function(t){return t[a]}),this.nodes.rectNode=this.d3.g.select("g.graphBox").selectAll("rect.ui-chart-bar"),"date"===this.axis.typeAxisX?this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x2).ticks(u.d3[this.axis.timeAxisX[0]].every(this.axis.timeAxisX[1])).tickFormat(function(t){return l(t)})):this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x)),this.setCommonChartInfoString("basic"),this.setCommonChartAxisXNode()}e.attr("height",function(){return s.state.update?u.d3.select(this).attr("height"):s.d3.height-s.d3.y(0)}).attr("y",function(){return s.state.update?u.d3.select(this).attr("y"):s.d3.y(0)}).transition().duration(this.props.duration).ease(u.d3.easeLinear).attr("y",function(t){return s.d3.y(t[a])}).attr("height",function(t){return s.d3.height-s.d3.y(t[a])}),e.exit().remove(),this.setCommonChartAxisYNode(),this.setCommonChartAxisXYGrid()}finally{e=t=null}},js2uixCompareBarType:function(e){var t,s=this,i=e[Object.keys(e)[0]].map(function(t){return t[this.axis.axisX]}.bind(this)),a=0,n=0,r=[],o=[],d=function(s){var i=this,t=u.d3.values(e).map(function(t){var e=t.map(function(t){if(t[i.axis.axisX]==s)return t[i.axis.axisY]});return u.d3.max(e,function(t){return t})});return o.push(t),t}.bind(this);try{if(x.loop(e,function(t,e){var s=this,i=u.d3.max(e,function(t){return t[s.axis.axisY]});a<i&&(a=i),r.push(t)}.bind(this)),this.d3.x=u.d3.scaleBand().domain(i).rangeRound([0,this.d3.width]).padding(.1),this.d3.x1=u.d3.scaleBand().padding(.05).domain(u.d3.entries(e).map(function(t){return t.key})).rangeRound([0,this.d3.x.bandwidth()]),this.d3.y=u.d3.scaleLinear().domain([0,a]).rangeRound([this.d3.height,0]),this.state.update)t=this.nodes.rectNode.data(i,d).selectAll("rect.ui-chart-bar").data(u.d3.keys(e));else{var h=u.d3.scaleOrdinal().range(this.state.colorArray),l=u.d3.timeFormat(this.axis.timeFormat);this.nodes.gridX_g=this.d3.g.append("g").attr("class","grid_x").attr("transform","translate(0,"+this.d3.height+")").attr("opacity",this.props.tickGridOpacity),this.nodes.gridY_g=this.d3.g.append("g").attr("class","grid_y").attr("opacity",this.props.tickGridOpacity),this.nodes.axisX_g=this.d3.g.append("g").attr("class","axis axis--x"),this.nodes.axisY_g=this.d3.g.append("g").attr("class","axis axis--y"),this.nodes.title_g=this.d3.g.append("g").attr("class","title").append("text"),t=this.d3.g.append("g").attr("class","path").selectAll("g").data(i,d).enter().append("g").attr("class","ui-chart-group").attr("width",this.d3.x.bandwidth()).attr("transform",function(t){return"translate("+s.d3.x(t)+",0)"}).attr("data-left",function(t){return s.d3.x(t)}).selectAll("rect").data(u.d3.keys(e)).enter().append("rect").attr("class","ui-chart-bar").attr("width",function(){return s.d3.x1.bandwidth()}).attr("x",function(t){return s.d3.x1(t)}).attr("fill",function(t){return h(t)}).attr("fill-opacity",this.props.colorAlpha),this.setCommonCompareInfo(this.d3,r,h),this.nodes.rectNode=this.d3.g.select("g.path").selectAll("g"),"date"===this.axis.typeAxisX?this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x).ticks(u.d3[this.axis.timeAxisX[0]].every(this.axis.timeAxisX[1])).tickFormat(function(t){return l(c(t))})):this.nodes.axisX_g.call(u.d3.axisBottom(this.d3.x)),this.setCommonChartInfoString("basic"),this.setCommonChartAxisXNode()}t.attr("data-height",function(t,e){return 0===e&&n++,s.d3.height-s.d3.y(o[n-1][e])}).attr("data-name",function(t){return n=0,t}).attr("data-value",function(t,e){return 0===e&&n++,o[n-1][e]}).attr("y",function(){return s.state.update?u.d3.select(this).attr("y"):s.d3.y(0)}).attr("height",function(){return s.state.update?u.d3.select(this).attr("height"):s.d3.height-s.d3.y(0)}),n=0,t.transition().duration(this.props.duration).ease(u.d3.easeLinear).attr("y",function(){return s.d3.height-u.d3.select(this).attr("data-height")}).attr("height",function(t,e){return 0===e&&n++,s.d3.height-s.d3.y(o[n-1][e])}),t.exit().remove(),this.setCommonChartAxisYNode(),this.setCommonChartAxisXYGrid()}finally{t=o=r=e=null}},js2uixCircleType:function(t){var e,s,i,a,n=this;try{if(this.state.update)e=this.nodes.slice.data(this.state.pie(t),this.state.axisXFnc),s=this.nodes.circleText.data(this.state.pie(t),this.state.axisXFnc),i=this.nodes.polyLine.data(this.state.pie(t),this.state.axisXFnc);else{var r=u.d3.scaleOrdinal().range(this.state.colorArray),o=this.target[0].clientWidth,d=this.target[0].clientHeight;this.d3.width=o,this.d3.height=d,this.state.radius=Math.min(o,d)/2-15,this.state.arc1=u.d3.arc().outerRadius(.9*this.state.radius).innerRadius(this.state.radius*(1-this.props.circleThickNum)),this.state.outerArc=u.d3.arc().innerRadius(this.state.radius).outerRadius(.9*this.state.radius),this.state.pie=u.d3.pie().sort(null).value(function(t){return t[n.axis.axisY]}),this.state.axisXFnc=function(t){return t.data[n.axis.axisX]},this.state.midAngle=function(t){return t.startAngle+(t.endAngle-t.startAngle)/2},this.d3.g=this.d3.g.attr("transform","translate("+o/2+","+d/2+")"),this.d3.g.append("g").attr("class","labels"),this.d3.g.append("g").attr("class","lines"),this.nodes.title_g=this.d3.g.append("g").attr("class","titleBox").append("text"),e=this.d3.g.append("g").attr("class","slices ui-"+this.state.uniqueId).selectAll("path.slice").data(this.state.pie(t),this.state.axisXFnc).enter().insert("path").style("fill",function(t){return r(t.data[n.axis.axisX])}).attr("class","slice").attr("fill-opacity",this.props.colorAlpha),s=this.d3.g.select(".labels").selectAll("text").data(this.state.pie(t),this.state.axisXFnc).enter().append("text").attr("style","font-size:12px").attr("dy",".35em").attr("opacity",1),i=this.d3.g.select(".lines").selectAll("polyline").data(this.state.pie(t),this.state.axisXFnc).enter().append("polyline").attr("opacity",.3).attr("stroke","black").attr("stroke-width","1px").attr("fill","none").attr("stroke-opacity",1),this.props.groupInfoBox&&((a=this.d3.g.append("g").attr("class","infoBox").attr("text-anchor","end").selectAll("g").data(t.map(function(t){return d3.values(t)[0]})).enter().append("g").attr("transform",function(t,e){return"translate(0,"+20*e+")"})).append("rect").attr("x",.5*-this.d3.width+10).attr("y",.5*-this.d3.height+30).attr("width",15).attr("height",15).attr("fill",r),a.append("text").attr("style","font-size:12px").attr("text-anchor","start").attr("x",.5*-this.d3.width+35).attr("y",.5*-this.d3.height+38).attr("dy","0.32em").text(function(t){return t}),a.exit().remove()),this.nodes.slice=this.d3.g.selectAll("path.slice"),this.nodes.circleText=this.d3.g.select(".labels").selectAll("text"),this.nodes.polyLine=this.d3.g.select(".lines").selectAll("polyline"),this.setCommonChartInfoString("circle")}e.transition().duration(this.props.duration).attrTween("d",function(t){this._current=this._current||t;var e=u.d3.interpolate(this._current,t);return n.state.update||(e=u.d3.interpolate({startAngle:0,endAngle:0},this._current)),this._current=e(0),function(t){return n.state.arc1(e(t))}}),e.exit().remove(),s.text(function(t){return t.data[n.axis.axisY]}).transition().duration(this.props.duration).attrTween("transform",function(t){this._current=this._current||t;var i=u.d3.interpolate(this._current,t);return this._current=i(0),function(t){var e=i(t),s=n.state.outerArc.centroid(e);return s[0]=n.state.radius*(n.state.midAngle(e)<Math.PI?1:-1),"translate("+s+")"}}).styleTween("text-anchor",function(t){this._current=this._current||t;var e=u.d3.interpolate(this._current,t);return this._current=e(0),function(t){return n.state.midAngle(e(t))<Math.PI?"start":"end"}}),s.exit().remove(),i.transition().duration(this.props.duration).attrTween("points",function(t){this._current=this._current||t;var i=u.d3.interpolate(this._current,t);return this._current=i(0),function(t){var e=i(t),s=n.state.outerArc.centroid(e);return s[0]=.95*n.state.radius*(n.state.midAngle(e)<Math.PI?1:-1),[n.state.arc1.centroid(e),n.state.outerArc.centroid(e),s]}}),i.exit().remove()}finally{a=i=s=e=t=null}},setSwitchChartDomType:function(t){switch(this.props.chartType){case"line-s":this.js2uixSingleLineType(t);break;case"line-c":this.js2uixCompareLineType(t);break;case"area-s":this.js2uixSingleAreaType(t);break;case"area-c":this.js2uixCompareAreaType(t);break;case"bar-s":this.js2uixSingleBarType(t);break;case"bar-c":this.js2uixCompareBarType(t);break;case"circle":this.js2uixCircleType(t);break;default:alert("Chart type is incorrect.")}},setCreateChartOption:function(){try{if(this.props.colorful||(this.state.colorArray=[this.state.colorArray[0]]),this.props.colorArray&&(this.state.colorArray=this.props.colorArray),this.props.shadeColor&&this.setUserShadeColorSetting(this.props.shadeColor),"string"!=typeof this.props.timeAxisX[0]||"number"!=typeof this.props.timeAxisX[1])return alert("The value of the timeAxisX is not correct."),!1;"number"==typeof this.props.circleThickNum?1<this.props.circleThickNum?this.props.circleThickNum=1:this.props.circleThickNum<=0&&(this.props.circleThickNum=.15):this.props.circleThickNum=.5,this.props.timeAxisX=this.props.timeAxisX.map(function(t){var e="";switch(t){case"day":e="timeDay";break;case"week":e="timeWeek";break;case"month":e="timeMonth";break;case"year":e="timeYear";break;default:e=t}return e})}finally{null}},setCreateChartD3Target:function(t){var e,s,i=this.state,a=this.props,n=t[0].id,r=t.parent().offset();r?(e=r.width-(r.paddingL+r.paddingR),s=r.height-(r.paddingT+r.paddingB)):s=e="100%";var o=this.axis={axisX:a.nameAxisX,axisY:a.nameAxisY,typeAxisX:a.typeAxisX,typeAxisY:a.typeAxisY,timeAxisX:a.timeAxisX,timeFormat:a.timeFormat,tickAxisY:a.tickAxisY,tickGridY:a.tickGridY,rotateAxisX:a.rotateAxisX,posXAxisX:a.posXAxisX,posYAxisX:a.posYAxisX,axis_string:a.title},d={width:a.layoutW,height:a.layoutH};try{d.width&&(e=parseInt(d.width),t.width(e)),d.height&&(s=parseInt(d.height),t.height(s)),e>i.max_width&&(e=i.max_width),e<i.min_width&&(e=i.min_width),s<i.min_height&&(s=i.min_height),this.d3.svg||(this.d3={svg:null,g:null,x:null,y:null,width:0,height:0,margin:{},line:null,tip:null,type:this.props.chartType,axisX:"",axisY:"",title:""},this.d3.svg=u.d3.select("#"+n).append("svg:svg").attr("id",this.state.uniqueName).attr("width",e).attr("height",s),this.d3.margin={top:this.props.topPos,right:this.props.rightPos,bottom:this.props.bottomPos,left:this.props.leftPos},this.d3.width=e-this.d3.margin.left-this.d3.margin.right,this.d3.height=s-this.d3.margin.top-this.d3.margin.bottom,this.d3.g=this.d3.svg.append("g").attr("class","js2uix_g").attr("transform","translate("+this.d3.margin.left+","+this.d3.margin.top+")"),this.d3.axisX=o.axisX,this.d3.axisY=o.axisY,this.d3.title=o.axis_string)}finally{o=null}},setCreateStyleOption:function(t){var e,s;e=t,s={svgId:"#"+this.state.uniqueName,opacity:this.props.tickGridOpacity,dashArray:this.props.tickGridDashNum},e.append('<style class="js2uixD3">\n'+s.svgId+" .js2uix_g .grid_x,\n"+s.svgId+" .js2uix_g .grid_y{opacity : "+s.opacity+"}\n"+s.svgId+" .js2uix_g .grid_x path,\n"+s.svgId+" .js2uix_g .grid_y path{stroke-width:0}\n"+s.svgId+" .js2uix_g .grid_x .tick line,\n"+s.svgId+" .js2uix_g .grid_y .tick line{stroke-dasharray:"+s.dashArray+"}\n</style>")},render:function(t){this.renderChartDefaultSetting(t),this.setCreateStyleOption(t),this.setCreateChartOption(t),this.setCreateChartD3Target(t)},init:function(t){"object"==typeof t&&(x.extend(this.props,t),this.render(this.target))},setData:function(t){this.setSwitchChartDomType(t),this.state.update||(this.state.update=!0,this.state.dataLength=t.length)}}).constructor=j;var A=function(t){if(t){if("string"==typeof t)return x(x(t)[0]);if(t.name&&t.name===p)return t;if(t.nodeName)return x(t)}},w=function(t){return this.element=t,this.idName="",this.props={fieldTitle:null,fieldName:null,gridFixWidth:null,gridFixHeight:null,gridMinWidth:null,gridMaxWidth:null,listCountNum:[10,20,30],fieldWidth:null,appendLayoutStyle:!0,availableMini:!1,bodyTextAlign:"center",disableSelection:!1,optionCheckBox:!1,optionNumbering:!1,onChangeStateEvent:null,onCustomizedField:null,onCustomizedEvent:null},this.state={totalCountNum:0,totalPageNum:1,currentPageNum:1,listCountNum:10,displayItemNum:0,orderInfo:{},gridWidth:0,gridAdjustGap:0,gridCalcWidth:0,girdCalcUlWidth:0,contentHead:null,contentBody:null,contentBodyList:null,contentFoot:null,listSelect:null,totalItem:null,displayItem:null,totalPage:null,currentPage:null,loadBox:null,optionCheckbox:null,isControl:!0},this.gridData=null,{name:this.js2uixName,init:this.init.bind(this),setData:this.setData.bind(this)}};(w.prototype={js2uixName:"js2uix-grid",setLoadEffectStyle:function(t){t?(this.state.isControl=!1,this.state.loadBox[0].style.display="block",this.state.loadBox[0].style.opacity=1):this.state.loadBox.fadeOut(450,function(){this.state.isControl=!0}.bind(this))},setDefaultRender:function(){if(1===this.element.length)return this.element.addClass(this.js2uixName),this.props.disableSelection&&this.element.addClass("disableSelection"),this.props.gridFixWidth&&"number"==typeof this.props.gridFixWidth&&this.element.css("width",this.props.gridFixWidth),this.props.gridMinWidth&&"number"==typeof this.props.gridMinWidth&&this.element.css("min-width",this.props.gridMinWidth),this.props.gridMaxWidth&&"number"==typeof this.props.gridMaxWidth&&this.element.css("max-width",this.props.gridMaxWidth),this.props.gridFixHeight&&"number"==typeof this.props.gridFixHeight&&this.element.css("height",this.props.gridFixHeight),this.props.availableMini&&this.element.addClass("availableMini"),!0},setAppendElement:function(t){this.element.append(t)},setCreateCssStyle:function(){if(this.props.appendLayoutStyle&&this.props.fieldWidth&&Array.isArray(this.props.fieldWidth)){for(var t=x("style[data-target="+this.idName+"]"),e='<style data-target="'+this.idName+'">\n',s=0;s<this.props.fieldWidth.length;s++){var i=s+1,a=this.props.fieldWidth[s];"string"==typeof a&&"auto"===a?(a=this.state.girdCalcUlWidth-this.state.gridCalcWidth+"px",a="calc(100% - "+this.state.gridCalcWidth+"px)"):a+="px",e+="#"+this.idName+".js2uix-grid ul.js2uix-head-row li:nth-child("+i+"),\n",e+="#"+this.idName+".js2uix-grid ul.js2uix-body-row li:nth-child("+i+"){width:"+a+"}\n"}e+="</style>",0<t.length&&t.remove(),this.element.before(e)}},setGridFieldStyle:function(t){if(!this.props.appendLayoutStyle&&this.props.fieldWidth&&Array.isArray(this.props.fieldWidth)){var i=this,e=this.state.contentHead;"body"===t&&(e=this.state.contentBody),e=e.find("ul"),this.state.girdCalcUlWidth||(this.state.girdCalcUlWidth=e.width()),x.loop(e,function(){for(var t=this.children,e=0;e<t.length;e++){var s=i.props.fieldWidth[e];"string"==typeof s&&"auto"===s?s=i.state.girdCalcUlWidth-i.state.gridCalcWidth+"px":s+="px",t[e].style.width=s}})}},setAdjustStyleLayout:function(){this.state.gridAdjustGap=this.state.contentBody.width()-this.state.contentBodyList.width(),this.state.contentHead[0].children[0].style.paddingRight=this.state.gridAdjustGap+"px",this.state.contentBodyList&&(this.state.contentBodyList.setAttr("data-overflow","false"),0<=this.state.contentBodyList.height()-this.state.contentBody.height()&&this.state.contentBodyList.setAttr("data-overflow","true"))},setDefaultOptionState:function(){this.state.optionCheckbox&&(this.state.optionCheckbox[0].firstChild.checked=!1)},setGridDefaultState:function(){var t=0;if(this.idName=this.element[0].id?this.element[0].id:this.idName=p+"Grid"+a(),this.props.fieldWidth){this.props.optionCheckBox&&this.props.fieldWidth.unshift(35),this.props.optionNumbering&&this.props.fieldWidth.unshift(40);for(var e=0;e<this.props.fieldWidth.length;e++)"number"==typeof this.props.fieldWidth[e]&&(t+=this.props.fieldWidth[e]);this.state.gridCalcWidth=t,this.state.gridWidth=this.state.contentHead.width()}},setGridRenderState:function(t){this.state.totalCountNum=parseInt(t.totalCount),this.state.currentPageNum=parseInt(t.pageCount),this.state.listCountNum=parseInt(t.listCount||this.state.listCountNum),this.state.displayItemNum=0===this.state.currentPageNum?parseInt(t.data.length):(this.state.currentPageNum-1)*this.state.listCountNum+parseInt(t.data.length),this.state.totalPageNum=parseInt(this.state.totalCountNum/this.state.listCountNum),this.state.totalPageNum<1&&(this.state.totalPageNum=1),this.state.totalPageNum<this.state.totalCountNum/this.state.listCountNum&&(this.state.totalPageNum=this.state.totalPageNum+1),this.state.listSelect[0].value!==this.state.listCountNum&&(this.state.listSelect[0].value=this.state.listCountNum),this.gridData=t.data},setGridFootState:function(t){this.state.totalItem[0].innerText=this.state.totalCountNum,this.state.displayItem[0].innerText=this.state.displayItemNum,this.state.totalPage[0].innerText=this.state.totalPageNum,this.state.currentPage[0].value=this.state.currentPageNum},setGridHeadElement:function(){if(this.props.fieldTitle&&this.props.fieldName){for(var t=x.createDom("ul",{className:"js2uix-grid-head-wrap js2uix-head-row"},!0),e=0;e<this.props.fieldTitle.length;e++)t.append('<li class="field" data-order="NORMAL" data-name="'+this.props.fieldName[e]+'">'+this.props.fieldTitle[e]+"</li>");this.props.optionCheckBox&&(this.state.optionCheckbox=x.createDom("li",{content:'<input type="checkbox" name="optionCheckBox" />'},!0),this.state.optionCheckbox.setAttr("data-option","checkbox"),t.prepend(this.state.optionCheckbox)),this.props.optionNumbering&&t.prepend('<li data-option="numbering">&nbsp;</li>'),this.state.contentHead=x.createDom("div",{className:"js2uix-grid-head",content:t},!0),this.setAppendElement(this.state.contentHead),this.setGridHeadControl(this.state.contentHead)}},setGridBodyElement:function(){this.state.contentBodyList=x.createDom("div",{className:"js2uix-grid-body-list"},!0),this.state.contentBody=x.createDom("div",{className:"js2uix-grid-body",content:x.createDom("div",{className:"js2uix-grid-body-wrap",content:this.state.contentBodyList})},!0),this.setAppendElement(this.state.contentBody)},setGridFootElement:function(){this.state.contentFoot=x.createDom("div",{className:"js2uix-grid-foot"},!0);var t=x.createDom("div",{className:"js2uix-grid-list",content:'<select class="list"></select>'},!0),e=x.createDom("div",{className:"js2uix-grid-total",content:'<ul><li>Displaying&nbsp;</li><li class="current">1</li><li>&nbsp;of&nbsp;</li><li class="total">1</li><li>&nbsp;items</li></ul>'}),s=x.createDom("div",{className:"js2uix-grid-page",content:'<ul><li class="first"></li><li class="prev"></li><li class="page"><span>Page</span><span class="current"><input type="text" name="crtPage" class="crtPage"></span><span>of</span><span class="total">1</span></li><li class="next"></li><li class="last"></li><li class="reload"></li></ul>'});if(Array.isArray(this.props.listCountNum)&&0<this.props.listCountNum.length)for(var i=0;i<this.props.listCountNum.length;i++){var a="";0===i&&(this.state.listCountNum=this.props.listCountNum[i],a="selected"),t.find("select").append("<option "+a+' value="'+this.props.listCountNum[i]+'">'+this.props.listCountNum[i]+"</option>")}this.state.contentFoot.append(t,s,e),this.state.listSelect=this.state.contentFoot.find("select"),this.state.totalItem=this.state.contentFoot.find(".js2uix-grid-total .total"),this.state.displayItem=this.state.contentFoot.find(".js2uix-grid-total .current"),this.state.totalPage=this.state.contentFoot.find(".js2uix-grid-page .total"),this.state.currentPage=this.state.contentFoot.find(".js2uix-grid-page .current input"),this.setAppendElement(this.state.contentFoot),this.setGridFootControl(this.state.contentFoot)},setGridLoadElement:function(){this.state.loadBox=x.createDom("div",{className:"js2uix-grid-load",content:'<div class="innerBox">processing.. please wait!</div>'},!0),this.state.contentBody.append(this.state.loadBox)},setGridBodyItemElement:function(t){var e="";if(t.data&&0<t.data.length&&0<this.props.fieldName.length){for(var s=0;s<t.data.length;s++)if(s<=this.state.listCountNum){e+='<ul class="js2uix-body-row">',this.props.optionNumbering&&(e+='<li data-option="numbering">'+(s+1)+"</li>"),this.props.optionCheckBox&&(e+='<li data-option="checkbox"><input type="checkbox" name="optionCheckBox" /></li>');for(var i=0;i<this.props.fieldName.length;i++){var a="",n=this.props.fieldName[i],r=t.data[s][n];r||(r="",a='data-empty="true"',0===s&&this.state.contentHead.find('li[data-name="'+n+'"]').removeEvent("all")),e+='<li data-name="'+n+'" '+a+' style="text-align:'+this.props.bodyTextAlign+'">'+r+"</li>"}e+="</ul>"}}else e='<ul class="js2uix-body-row"><li class="noGridData">No Data</li></ul>';this.setGridBodyControl(!0),this.state.contentBodyList[0].parentNode.scrollTop=0,this.state.contentBodyList[0].innerHTML=e,this.onCustomizedField(),this.setGridBodyControl(!1),this.setAdjustStyleLayout()},setGridDefaultElement:function(){this.setGridBodyControl(!0),this.element[0].innerHTML=""},setGridHeadControl:function(t){var i=this;t.find("li.field").addEvent("click.js2uix-grid",function(){if(i.state.isControl){var t=x(this),e=t.getAttr("data-order"),s=t.getAttr("data-name");"NORMAL"===e?(t.setAttr("data-order","ASC"),i.state.orderInfo[s]="ASC"):"ASC"===e?(t.setAttr("data-order","DESC"),i.state.orderInfo[s]="DESC"):"DESC"===e&&(t.setAttr("data-order","NORMAL"),delete i.state.orderInfo[s]),i.state.currentPageNum=1,i.onChangeStateEvent()}}),t.find('li[data-option="checkbox"] input[type=checkbox]').addEvent("change.js2uix-grid",function(){if(i.state.isControl){var t=i.state.contentBodyList.find("input[name=optionCheckBox]");x.loop(t,function(t,e){e.checked=this.checked}.bind(this))}})},setGridBodyControl:function(t){t?this.state.contentBody&&this.state.contentBody.find(".js2uix-grid-body-list *").removeEvent("all"):this.onCustomizedEvent()},setGridFootControl:function(t){var s=this;t.find(".first").addEvent("click.js2uix-grid",function(){return 1!==s.state.currentPageNum&&s.state.isControl&&(s.state.currentPageNum=1,s.onChangeStateEvent()),!1}),t.find(".prev").addEvent("click.js2uix-grid",function(){return 1!==s.state.currentPageNum&&s.state.isControl&&(s.state.currentPageNum=s.state.currentPageNum-1!=0?s.state.currentPageNum-1:1,s.onChangeStateEvent()),!1}),t.find(".next").addEvent("click.js2uix-grid",function(){return s.state.currentPageNum<s.state.totalPageNum&&s.state.isControl&&(s.state.currentPageNum=s.state.currentPageNum+1<=s.state.totalPageNum?s.state.currentPageNum+1:s.state.totalPageNum,s.onChangeStateEvent()),!1}),t.find(".last").addEvent("click.js2uix-grid",function(){return s.state.currentPageNum<s.state.totalPageNum&&s.state.isControl&&(s.state.currentPageNum=s.state.totalPageNum,s.onChangeStateEvent()),!1}),t.find(".reload").addEvent("click.js2uix-grid",function(){return s.state.isControl&&s.onChangeStateEvent(),!1}),t.find(".crtPage").addEvent("keyup.js2uix-grid",function(t){var e=this.value;return""===(e=e.replace(/[^0-9]/gi,""))?s.state.currentPage[0].value="":((e=parseInt(e))<1&&(e=1),e>s.state.totalPageNum&&(e=s.state.totalPageNum),s.state.currentPage[0].value=e),13===t.keyCode&&(s.state.currentPageNum=e,s.onChangeStateEvent()),!1}),t.find("select").addEvent("change.js2uix-grid",function(t){return s.state.isControl&&(s.state.currentPageNum=1,s.state.listCountNum=this.value,s.onChangeStateEvent()),!1})},setGridCreateElement:function(){this.setGridDefaultElement(),this.setGridHeadElement(),this.setGridBodyElement(),this.setGridFootElement(),this.setGridLoadElement()},onChangeStateEvent:function(){this.props.onChangeStateEvent,"function"==typeof this.props.onChangeStateEvent&&(this.setLoadEffectStyle(!0),this.setDefaultOptionState(),this.props.onChangeStateEvent({searchOrder:this.state.orderInfo,searchPageNum:this.state.currentPageNum,searchItemListNum:this.state.listCountNum}))},onCustomizedField:function(){if(this.props.onCustomizedField&&"function"==typeof this.props.onCustomizedField){var e=this;this.state.contentBodyList.find("ul").loop(function(t){e.props.onCustomizedField(x(this),e.gridData[t])}),e.gridData=null}},onCustomizedEvent:function(){this.props.onCustomizedEvent&&"function"==typeof this.props.onCustomizedEvent&&this.props.onCustomizedEvent(this.state.contentBodyList)},setData:function(t){t&&"object"==typeof t&&(this.setGridRenderState(t),this.setGridFootState(t),this.setGridBodyItemElement(t),this.setGridFieldStyle("body"),this.setLoadEffectStyle(!1))},init:function(t){t&&"object"==typeof t&&(x.extend(this.props,t),this.setDefaultRender()&&(this.setGridCreateElement(),this.setGridDefaultState(),this.setCreateCssStyle(),this.setGridFieldStyle("head")))}}).constructor=w;var D=function(t,e){return this.element=t,this.props={comboFixWidth:null,defaultTitle:null,searchCombo:!1,inputPlaceholder:"",onChangeEvent:null,onSearchEvent:null},this.state={comboBoxNode:null,optionNode:null,searchOptionNode:null,selectedNode:null,titleNode:null,defaultTitleNode:null,arrowNode:null,width:0,height:0,value:null,change:!1},this.init(e),{name:this.js2uixName,getValue:this.getValue.bind(this),setValue:this.setValue.bind(this),setOption:this.setOption.bind(this)}};(D.prototype={js2uixName:"js2uix-combo",setComboBoxElementLayout:function(){var t=this.state.width=this.props.comboFixWidth||this.element.width(),e=this.state.height=this.state.comboBoxNode.height();"parent"===this.props.comboFixWidth||this.props.comboFixWidth;this.element.css({width:t,height:e}),this.state.comboBoxNode.css({width:t,height:e}),this.state.titleNode.css("padding-right",25),this.state.arrowNode.css({width:25,height:e}),this.props.searchCombo&&(this.state.comboBoxNode.addClass("js2uix-search"),this.state.titleNode.css({width:t,height:e}),this.state.searchOptionNode.css({width:t,top:e-1}),this.element[0].style.display="none")},createComboBoxDefaultOption:function(){var t=this.element.find("option");(this.props.defaultTitle||0===t.length)&&(this.state.defaultTitleNode=x.createDom("option",{content:this.props.defaultTitle||"No data"}),this.state.defaultTitleNode.value="none",this.state.defaultTitleNode.disabled=!0,this.state.defaultTitleNode.setAttribute("selected",!0),this.element.prepend(this.state.defaultTitleNode));try{return this.element.find("option")}finally{t=null}},createComboBoxOptionNode:function(){var t=this.state.optionNode;if(this.props.searchCombo){var e=x.createDom("ul",{className:"js2uix-option-wrap"},!0);if(0<t.length)for(var s=0;s<t.length;s++){for(var i=t[s],a=i.innerText,n="",r=0;r<i.attributes.length;r++){var o=i.attributes[r],d=o.name,h=o.value||"";"disabled"===d&&(h="true"),-1!==d.indexOf("data-")?n+=" "+d+'="'+h+'"':n+=" data-"+d+'="'+h+'"'}e.append("<li"+n+">"+a+"</li>")}else e.append("<li>No data</li>");this.setComboBoxSearchControl(!0),this.state.searchOptionNode.html(e)}},createComboBoxLayout:function(){this.state.comboBoxNode=x.createDom("div",{className:this.js2uixName},!0),this.state.arrowNode=x.createDom("span",{className:"arrow"},!0),this.state.optionNode=this.createComboBoxDefaultOption(),this.props.searchCombo?(this.state.searchOptionNode=x.createDom("div",{className:"js2uix-option"},!0),this.createComboBoxOptionNode(),this.state.titleNode=x.createDom("input",{className:"search"},!0),this.state.comboBoxNode.append(this.state.titleNode,this.state.arrowNode,this.state.searchOptionNode)):(this.state.titleNode=x.createDom("label",{className:"title"},!0),this.state.comboBoxNode.append(this.state.titleNode,this.state.arrowNode)),this.element.before(this.state.comboBoxNode),this.state.comboBoxNode.append(this.element)},setComboBoxOptionState:function(t){var e=this.element[0].value,s="";if(0<this.state.optionNode.length)for(var i=0;i<this.state.optionNode.length;i++)!0===this.state.optionNode[i].selected&&(this.selectedNode=this.state.optionNode[i],s=this.state.optionNode[i].innerText);this.state.defaultTitleNode&&!this.state.change&&t&&(this.state.defaultTitleNode.removeAttribute("selected"),this.state.change=!0),this.props.searchCombo?(this.state.titleNode[0].placeholder=this.props.inputPlaceholder,t&&(this.state.titleNode[0].value=s)):this.state.titleNode[0].innerText=s,this.state.value=e||""},setScrollActiveItem:function(t,e){var s=t[0].getBoundingClientRect(),i=e[0].getBoundingClientRect(),a=e.index()+1,n=s.height,r=i.height,o=t[0].scrollTop||0;a*r<o+r&&(t[0].scrollTop=o+(a*r-(o+r))),n+o<a*r&&(t[0].scrollTop=o+(a*r-(n+o)))},setComboBoxDefaultControl:function(){var d=this;this.props.searchCombo?(this.state.titleNode.addEvent("keyup."+this.js2uixName,function(t){(t.keyCode<37||40<t.keyCode)&&13!==t.keyCode&&d.onSearchCallBack(this,this.value)}),this.state.titleNode.addEvent("keydown."+this.js2uixName,function(t){var e=t.keyCode;if(38===e||40===e||13===e){var s,i=d.state.searchOptionNode.find("li"),a=d.state.searchOptionNode.find("li.on"),n=a.prevNode(),r=a.nextNode();if(0===a.length)40===e&&(s=x(i[0])).addClass("on");else if(13===e){var o=a[0].getAttribute("data-value")||"";d.state.value!==o&&(d.setValue(o),d.state.searchOptionNode[0].style.display="none",d.onChangeCallBack())}else 38===e&&1===n.length&&(s=n),40===e&&1===r.length&&(s=r),s&&(s.addClass("on").siblingNodes().removeClass("on"),d.setScrollActiveItem(d.state.searchOptionNode,s))}}),this.state.titleNode.addEvent("mousedown."+this.js2uixName,function(t){d.state.searchOptionNode[0].style.display="block",t.stopPropagation()}),this.state.arrowNode.addEvent("mousedown."+this.js2uixName,function(t){d.state.searchOptionNode[0].style.display="block"!==d.state.searchOptionNode[0].style.display?"block":"none",t.stopPropagation()}),this.state.searchOptionNode.addEvent("mousedown."+this.js2uixName,function(t){t.stopPropagation()}),x("body").addEvent("mousedown."+this.js2uixName,function(){d.state.searchOptionNode[0].style.display="none"})):this.element.addEvent("change."+this.js2uixName,function(){d.setComboBoxOptionState(!0),d.onChangeCallBack()})},setComboBoxSearchControl:function(t){if(this.state.searchOptionNode){var e=this.state.searchOptionNode.find("li");if(t)e.removeEvent("all");else{var s=this;e.addEvent("mouseup."+this.js2uixName,function(t){this&&!this.hasAttribute("data-disabled")&&s.element[0].value!==this.getAttribute("data-value")&&(s.element[0].value=this.getAttribute("data-value")||"",s.setComboBoxOptionState(!0),s.onChangeCallBack()),x(this).addClass("on").siblingNodes().removeClass("on"),s.state.searchOptionNode[0].style.display="none",t.stopPropagation()})}}},setOption:function(t){if(t&&Array.isArray(t)){var e,s,i="";for(e=0;e<t.length;e++){var a="",n="",r=t[e].dataAttr;for(s in r)n+=" data-"+s+'="'+r[s]+'"';!0!==t[e].disabled&&"true"!==t[e].disabled||(a="disabled"),i+='<option value="'+t[e].value+'"'+n+" "+a+">"+t[e].title+"</option>"}this.element.removeAttr("style").html(i),this.state.optionNode=this.createComboBoxDefaultOption(),this.createComboBoxOptionNode(),this.setComboBoxElementLayout(),this.setComboBoxOptionState(),this.setComboBoxSearchControl(!1)}},setValue:function(t){this.element[0].value=this.state.value=t,this.setComboBoxOptionState(!0)},getValue:function(){return this.state.value},onChangeCallBack:function(){if(this.props.onChangeEvent&&"function"==typeof this.props.onChangeEvent){for(var t={},e=0;e<this.selectedNode.attributes.length;e++){var s=this.selectedNode.attributes[e];t[s.name.replace("data-","")]=s.value}t.title=this.selectedNode.innerText,this.props.onChangeEvent(t)}},onSearchCallBack:function(t,e){this.props.onSearchEvent&&"function"==typeof this.props.onSearchEvent&&this.props.onSearchEvent(t,e)},init:function(t){"object"==typeof t&&x.extend(this.props,t),this.createComboBoxLayout(),this.setComboBoxElementLayout(),this.setComboBoxOptionState(),this.setComboBoxDefaultControl()}}).constructor=D;var E={setLimitPosition:function(t,e){var s=this.state;if(e){var i=parseInt(e.css("border-left-width"))||0,a=parseInt(e.css("border-right-width"))||0,n=parseInt(e.css("border-top-width"))||0,r=parseInt(e.css("border-bottom-width"))||0;s.targetRect=e[0].getBoundingClientRect(),s.targetRect.borderLeft=i,s.targetRect.borderRight=a,s.targetRect.borderTop=n,s.targetRect.borderBottom=r}if(t){var o=parseInt(t.css("border-left-width"))||0,d=parseInt(t.css("border-right-width"))||0,h=parseInt(t.css("border-top-width"))||0,l=parseInt(t.css("border-bottom-width"))||0,u=parseInt(t.css("padding-left"))||0,c=parseInt(t.css("padding-right"))||0,p=parseInt(t.css("padding-top"))||0,m=parseInt(t.css("padding-bottom"))||0;s.parent=t[0],s.parentRect=t[0].getBoundingClientRect(),s.parentRect.borderLeft=o,s.parentRect.borderRight=d,s.parentRect.borderTop=h,s.parentRect.borderBottom=l,s.parentRect.paddingLeft=u,s.parentRect.paddingRight=c,s.parentRect.paddingTop=p,s.parentRect.paddingBottom=m,s.limitX=s.parentRect.left-s.targetRect.left+s.parentRect.borderLeft+s.parentRect.paddingLeft,s.limitY=s.parentRect.top-s.targetRect.top+s.parentRect.borderBottom+s.parentRect.paddingTop,s.maxX=s.parentRect.right-s.targetRect.right-s.parentRect.borderRight-s.parentRect.paddingRight,s.maxY=s.parentRect.bottom-s.targetRect.bottom-s.parentRect.borderBottom-s.parentRect.paddingBottom}else s.limitX=-99999,s.limitY=-99999,s.maxX=99999,s.maxY=99999},setLimitedAreaForUserCommand:function(t,e,s,i){this.state.targetX=parseInt(s)||0,this.state.targetY=parseInt(i)||0,this.setLimitPosition(t,e)},getClickMousePositionXY:function(t){return{pageX:(t=t||u.event).pageX,pageY:t.pageY}}},I=function(t,e){return this.element=t,this.props={addClass:null,handle:null,cancel:null,cursor:null,containment:null,dropTarget:null,create:null,start:null,drag:null,stop:null,drop:null,userSelect:!1,smoothDrag:!1,zIndex:9},this.state={targetX:0,targetY:0,targetRect:null,parent:null,parentRect:null,limitX:0,maxX:0,limitY:0,maxY:0,isDown:!1,mouseX:0,mouseY:0,isDrag:!1,isMove:!1,isCancel:!1,isHandle:!1,enable:!0,disable:!1,destroy:!1,dataId:null},this.init(e),{name:this.js2uixName,enable:this.enable.bind(this),destroy:this.destroy.bind(this),disable:this.disable.bind(this)}};I.prototype={uiBodyNode:null,js2uixName:"js2uix-draggable",uiDragHandleClass:"js2uix-drag-handle",uiDragCancelClass:"js2uix-drag-cancel",uiDragFxClass:"js2uix-drag-fx",setDefaultState:function(t){var e=t.find(this.props.handle),s=t.css("position");this.uiBodyNode=this.uiBodyNode?this.uiBodyNode:x("body"),this.props.addClass&&t.addClass(this.props.addClass),this.props.smoothDrag&&t.addClass(this.uiDragFxClass),this.props.userSelect||t.setAttr("data-selectable",!1),"static"===s||"relative"===s?s="absolute":"fixed"===s&&(s="fixed"),0<e.length&&this.props.cursor&&""!==this.props.cursor&&e.css("cursor",this.props.cursor),this.props.zIndex&&"number"==typeof this.props.zIndex&&t.css("z-index",parseInt(this.props.zIndex)),t.addClass(this.js2uixName).removeAttr("data-disable").css("position",s)},setRemoveDragNodeConstruct:function(t){var e=t.find(".js2uix-drag-handle"),s=t.find(".js2uix-drag-cancel");N.removeEvent("mousemove.js2uix-"+this.state.dataId),N.removeEvent("mouseup.js2uix-"+this.state.dataId),e.removeEvent("mousedown.js2uix-drag-handle"),e.removeEvent("mouseup.js2uix-drag-handle"),s.removeEvent("mousedown.js2uix-drag-cancel"),s.removeEvent("mouseup.js2uix-drag-cancel"),t.removeEvent("mousedown.js2uix-drag-control"),t.removeEvent("mouseup.js2uix-drag-control"),t.removeClass("js2uix-draggable").removeAttr("data-selectable").removeAttr("data-disable").find(".js2uix-drag-handle").removeClass("js2uix-drag-handle"),t.find(".js2uix-drag-cancel").removeClass("js2uix-drag-cancel"),t.css({position:"",left:"",top:"",cursor:"",zIndex:""}),e.css("cursor",""),t.remove()},setMouseMoveLimitAreaCheck:function(t,e){var s=this.state;return t<=s.limitX&&(t=s.limitX),t>=s.maxX&&(t=s.maxX),e<=s.limitY&&(e=s.limitY),e>=s.maxY&&(e=s.maxY),{mouseX:t,mouseY:e}},setMouseDownDragEventHandler:function(){this.state.isHandle=!0},setMouseUpDragEventHandler:function(){this.state.isHandle=!1},setMouseDownCancelEventHandler:function(){this.state.isCancel=!0},setMouseUpCancelEventHandler:function(){this.state.isCancel=!1},setMouseDownNodeEventHandler:function(t){if("js2uix-resize-handle"!==t.target.classList[0]){var e,s,i=this.element.getAttr("data-disable"),a=this.element.parent();this.uiBodyNode.addClass("disableSelection"),this.state.isDrag=!0,this.state.mouseX=t.pageX,this.state.mouseY=t.pageY,i&&"false"!==i&&void 0!==i||(this.state.isDrag=!0),this.props.handle||(this.state.isHandle=!0),(this.state.destroy||this.state.disable||"true"===i||!this.state.isHandle)&&(this.state.isDrag=!1),this.state.isDrag&&("parent"!==this.props.containment&&""!==this.props.containment&&this.props.containment?void 0===(a=this.element.parents(this.props.containment))&&(a=this.uiBodyNode):a="parent"===this.props.containment?this.element.parent():null,e=this.element.css("left"),s=this.element.css("top"),"auto"===e&&(e=parseInt(this.element[0].offsetLeft)),"auto"===s&&(s=parseInt(this.element[0].offsetTop)),this.setLimitedAreaForUserCommand(a,this.element,e,s),this.setCallBackStart({target:this.element[0],width:this.element.width(),height:this.element.height(),positionX:parseInt(this.element.css("left")),positionY:parseInt(this.element.css("top"))}),this.state.isCancel||this.setDragWindowControl())}},setMouseUpNodeEventHandler:function(){if(this.state.isMove&&this.state.enable){if(this.props.dropTarget){var t=this.uiBodyNode.find(this.props.dropTarget);t&&0<t.length&&this.setMouseUpDropEventHandler(this.element,t)}this.setCallBackStop({target:this.element[0],width:this.element.width(),height:this.element.height(),positionX:parseInt(this.element.css("left")),positionY:parseInt(this.element.css("top"))})}this.state.isDrag=!1,this.state.isMove=!1,this.state.isHandle=!1},setMouseMoveWindowEventHandler:function(t){var e,s,i,a,n;this.state.isDrag&&this.state.isHandle&&!this.state.isCancel&&(e=t.pageX-this.state.mouseX,s=t.pageY-this.state.mouseY,i=this.setMouseMoveLimitAreaCheck(e,s),a=this.state.targetX+i.mouseX,n=this.state.targetY+i.mouseY,this.state.isMove=!0,this.element[0].style.left=a+"px",this.element[0].style.top=n+"px",this.setCallBackDrag({target:this.element[0],width:this.element.width(),height:this.element.height(),positionX:parseInt(this.element.css("left")),positionY:parseInt(this.element.css("top"))}))},setMouseUpWindowEventHandler:function(){this.state.isDrag&&this.setCallBackStop({target:this.element[0],width:this.element.width(),height:this.element.height(),positionX:parseInt(this.element.css("left")),positionY:parseInt(this.element.css("top"))}),this.state.isCancel=!1,this.state.isDrag=!1,this.state.isMove=!1,this.state.isHandle=!1,N.removeEvent("mousemove.js2uix-"+this.state.dataId),N.removeEvent("mouseup.js2uix-"+this.state.dataId),this.uiBodyNode.removeClass("disableSelection")},setMouseUpDropEventHandler:function(t,e){var s=t[0].getBoundingClientRect(),i=[];x.loop(e,function(){var t=this.getBoundingClientRect(),e=s.right>t.left&&s.left<t.right&&s.bottom>t.top&&s.top<t.bottom;i.push({dropSuccess:e,dropTarget:this})}),this.setCallBackDrop({dragTarget:t[0],dropTarget:i})},setDragHandleControl:function(){if(this.props.handle&&""!==this.props.handle){var t=this.element.find(this.props.handle).addClass(this.uiDragHandleClass);0<t.length&&t.addEvent({"mousedown.js2uix-drag-handle":this.setMouseDownDragEventHandler.bind(this),"mouseup.js2uix-drag-handle":this.setMouseUpDragEventHandler.bind(this)})}else this.state.isHandle=!0},setDragCancelControl:function(){if(this.props.cancel&&""!==this.props.cancel){var t=this.element.find(this.props.cancel).addClass(this.uiDragCancelClass);0<t.length&&t.addEvent({"mousedown.js2uix-drag-cancel":this.setMouseDownCancelEventHandler.bind(this),"mouseup.js2uix-drag-cancel":this.setMouseUpCancelEventHandler.bind(this)})}else this.state.isCancel=!1,t=null},setDragNodeControl:function(){this.element.addEvent({"mousedown.js2uix-drag-control":this.setMouseDownNodeEventHandler.bind(this),"mouseup.js2uix-drag-control":this.setMouseUpNodeEventHandler.bind(this)})},setDragWindowControl:function(){N.addEvent("mousemove.js2uix-"+this.state.dataId,this.setMouseMoveWindowEventHandler.bind(this)),N.addEvent("mouseup.js2uix-"+this.state.dataId,this.setMouseUpWindowEventHandler.bind(this))},setCallBackCreate:function(){"function"==typeof this.props.create&&this.props.create({target:this.element[0],width:this.element.width(),height:this.element.height(),positionX:parseInt(this.element.css("left")),positionY:parseInt(this.element.css("top"))})},setCallBackStart:function(t){"function"==typeof this.props.start&&this.props.start(t)},setCallBackDrag:function(t){"function"==typeof this.props.drag&&this.props.drag(t)},setCallBackStop:function(t){"function"==typeof this.props.stop&&this.props.stop(t)},setCallBackDrop:function(t){"function"==typeof this.props.drop&&this.props.drop(t)},enable:function(){this.state.enable=!0,this.state.destroy=!1,this.state.disable=!1,this.element.removeAttr("data-disable")},destroy:function(){this.state.enable=!1,this.state.disable=!0,this.state.destroy=!0,this.setRemoveDragNodeConstruct(this.element)},disable:function(){this.state.enable=!1,this.state.destroy=!1,this.state.disable=!0,this.element.attr("data-disable",!0)},init:function(t){"object"==typeof t&&x.extend(this.props,t),this.element&&(this.state.dataId=a(),this.setDefaultState(this.element),this.setDragHandleControl(),this.setDragCancelControl(),this.setDragNodeControl(),this.setCallBackCreate())}},x.extend(I.prototype,E),I.prototype.constructor=I;var S=function(t,e){return this.element=t,this.props={addClass:null,create:null,containment:null,handle:"e,s,w,se,sw",minWidth:50,minHeight:50,start:null,stop:null,resize:null,userSelect:!1},this.state={dragNode:null,resizeNodePos:"relative",target:null,targetX:0,targetY:0,targetRect:null,parent:null,parentRect:null,isHandle:!1,isCancel:!1,isResize:!1,isDrag:!1,isMove:!1,strHandle:"js2uix-resize-se",limitX:0,maxX:0,limitY:0,maxY:0,mouseX:0,mouseY:0,enable:!0,disable:!1,destroy:!1,dataId:null},this.init(e),{name:this.js2uixName,enable:this.enable.bind(this),destroy:this.destroy.bind(this),disable:this.disable.bind(this)}};S.prototype={uiBodyNode:null,js2uixName:"js2uix-resizable",setDefaultState:function(){this.uiBodyNode=this.uiBodyNode?this.uiBodyNode:x("body"),"static"===this.element.css("position")&&this.element.css("position","relative"),this.props.addClass&&this.element.addClass(this.props.addClass),this.props.userSelect||this.element.setAttr("data-selectable",!1),this.element.addClass(this.js2uixName).removeAttr("data-disable")},setDefaultHtml:function(a){var t=this.props.handle.split(","),n=["n","e","s","w","ne","se","sw","nw"];if(!a)return!1;t&&x.loop(t,function(t,e){var s=e.trim();if(-1!==n.indexOf(s)){var i=90;1<s.length&&(i=91),a.append(x.createDom("div",{className:"js2uix-resize-handle js2uix-resize-"+s,styles:{"z-index:":i}}))}})},setRemoveResizeNodeConstruct:function(){var t=this.element.find(".js2uix-resize-handle");this.element.removeClass("js2uix-resizable").removeAttr("data-selectable"),this.element.css({left:"",top:"",width:"",height:""}),t.removeEvent("mousedown.js2uix-resize-handle"),t.removeEvent("mouseup.js2uix-resize-handle"),N.removeEvent("mousemove.js2uix-"+this.state.dataId),N.removeEvent("mouseup.js2uix-"+this.state.dataId),t.remove(),this.element.remove()},getResizeLimitMaxPosition:function(t,e,s){var i=this.state;return"w"!==s&&"n"!==s||(t<=i.limitX&&(t=i.limitX),e<=i.limitY&&(e=i.limitY)),"e"!==s&&"s"!==s||(t>=i.maxX&&(t=i.maxX),e>=i.maxY&&(e=i.maxY)),{mouseX:t,mouseY:e}},getCalcResizeUpEventHandler:function(t,e,s,i){var a=this.getResizeLimitMaxPosition(e,s,"n").mouseY;i<=a&&(a=i),t.style.top=this.state.targetY+a+"px",t.style.height=this.state.targetRect.height-a+"px"},getCalcResizeDownEventHandler:function(t,e,s,i){var a=this.getResizeLimitMaxPosition(e,s,"s").mouseY;a<=-i&&(a=-i),t.style.height=this.state.targetRect.height+a+"px"},getCalcResizeRightEventHandler:function(t,e,s,i){var a=this.getResizeLimitMaxPosition(e,s,"e").mouseX;a<=-i&&(a=-i),t.style.width=this.state.targetRect.width+a+"px"},getCalcResizeLeftEventHandler:function(t,e,s,i){var a=this.getResizeLimitMaxPosition(e,s,"w").mouseX;i<=a&&(a=i),t.style.left=this.state.targetX+a+"px",t.style.width=this.state.targetRect.width-a+"px"},setMouseDownResizeEventHandler:function(t){var e,s,i,a=t.target,n=this.element.parent();this.uiBodyNode.addClass("disableSelection"),this.state.mouseX=t.pageX,this.state.mouseY=t.pageY,this.state.strHandle=a.classList[1],this.state.isResize=!0,this.state.isDrag=!0,i=this.element.getAttr("data-disable"),(this.state.destroy||this.state.disable||"true"===i)&&(this.state.isResize=!1,this.state.isDrag=!1),i&&"false"!==i&&void 0!==i||(this.state.isResize=!0,this.state.isDrag=!0),this.state.isDrag&&("parent"!==this.props.containment&&""!==this.props.containment&&this.props.containment?void 0===(n=this.element.parents(this.props.containment))&&(n=body):n="parent"===this.props.containment?this.element.parent():null,e=this.element.css("left"),s=this.element.css("top"),"auto"===e&&(e=parseInt(this.element[0].offsetLeft)),"auto"===s&&(s=parseInt(this.element[0].offsetTop)),this.setLimitedAreaForUserCommand(n,this.element,e,s),this.setCallBackStart({target:this.element[0],width:this.element.width(),height:this.element.height(),positionX:parseInt(this.element.css("left")),positionY:parseInt(this.element.css("top"))}),this.setDragWindowControl())},setMouseUpResizeEventHandler:function(){this.state.isResize&&this.state.enable&&(this.setCallBackStop({target:this.element[0],width:this.element.width(),height:this.element.height(),positionX:parseInt(this.element.css("left")),positionY:parseInt(this.element.css("top"))}),this.state.isDrag=!1,this.state.isResize=!1)},setMouseMoveWindowEventHandler:function(t){var e=this.element[0];if(this.state.isDrag&&this.state.isResize&&!this.state.isCancel){this.state.isMove=!0;var s=this.state.targetRect,i=t.pageX-this.state.mouseX,a=t.pageY-this.state.mouseY,n=s.width-(this.props.minWidth||50),r=s.height-(this.props.minHeight||50);"js2uix-resize-e"===this.state.strHandle&&this.getCalcResizeRightEventHandler(e,i,a,n),"js2uix-resize-w"===this.state.strHandle&&this.getCalcResizeLeftEventHandler(e,i,a,n),"js2uix-resize-s"===this.state.strHandle&&this.getCalcResizeDownEventHandler(e,i,a,r),"js2uix-resize-n"===this.state.strHandle&&this.getCalcResizeUpEventHandler(e,i,a,r),"js2uix-resize-se"===this.state.strHandle&&(this.getCalcResizeDownEventHandler(e,i,a,r),this.getCalcResizeRightEventHandler(e,i,a,n)),"js2uix-resize-ne"===this.state.strHandle&&(this.getCalcResizeUpEventHandler(e,i,a,r),this.getCalcResizeRightEventHandler(e,i,a,n)),"js2uix-resize-nw"===this.state.strHandle&&(this.getCalcResizeUpEventHandler(e,i,a,r),this.getCalcResizeLeftEventHandler(e,i,a,n)),"js2uix-resize-sw"===this.state.strHandle&&(this.getCalcResizeDownEventHandler(e,i,a,r),this.getCalcResizeLeftEventHandler(e,i,a,n)),this.setCallBackResize({target:this.element[0],width:this.element.width(),height:this.element.height(),positionX:parseInt(this.element.css("left")),positionY:parseInt(this.element.css("top"))})}},setMouseUpWindowEventHandler:function(){this.state.isResize&&this.setCallBackStop({target:this.element[0],width:this.element.width(),height:this.element.height(),positionX:parseInt(this.element.css("left")),positionY:parseInt(this.element.css("top"))}),this.state.isResize=!1,this.state.isDrag=!1,N.removeEvent("mousemove.js2uix-"+this.state.dataId),N.removeEvent("mouseup.js2uix-"+this.state.dataId),this.uiBodyNode.removeClass("disableSelection")},setResizeHandleControl:function(){this.element.find(".js2uix-resize-handle").addEvent({"mousedown.js2uix-resize-handle":this.setMouseDownResizeEventHandler.bind(this),"mouseup.js2uix-resize-handle":this.setMouseUpResizeEventHandler.bind(this)})},setDragWindowControl:function(){N.addEvent("mousemove.js2uix-"+this.state.dataId,this.setMouseMoveWindowEventHandler.bind(this)),N.addEvent("mouseup.js2uix-"+this.state.dataId,this.setMouseUpWindowEventHandler.bind(this))},setCallBackCreate:function(){"function"==typeof this.props.create&&this.props.create({target:this.element[0],width:this.element.width(),height:this.element.height(),positionX:parseInt(this.element.css("left")),positionY:parseInt(this.element.css("top"))})},setCallBackStart:function(t){"function"==typeof this.props.start&&this.props.start(t)},setCallBackResize:function(t){"function"==typeof this.props.resize&&this.props.resize(t)},setCallBackStop:function(t){"function"==typeof this.props.stop&&this.props.stop(t)},enable:function(){this.state.enable=!0,this.state.destroy=!1,this.state.disable=!1,this.element.removeAttr("data-disable")},destroy:function(){this.state.enable=!1,this.state.disable=!0,this.state.destroy=!0,this.setRemoveResizeNodeConstruct()},disable:function(){this.state.enable=!1,this.state.destroy=!1,this.state.disable=!0,this.element.attr("data-disable",!0)},init:function(t){"object"==typeof t&&x.extend(this.props,t),this.element&&(this.state.dataId=a(),this.setDefaultState(),this.setDefaultHtml(this.element),this.setResizeHandleControl(),this.setCallBackCreate())}},x.extend(S.prototype,E),S.prototype.constructor=S;var _=function(t,e){return this.element=t,this.props={axis:!1,addClass:null,handle:null,cancel:null,connectWith:null,cursor:null,dropTarget:null,create:null,start:null,sort:null,stop:null,revert:!1,scroll:!1,scrollSensitivity:15,scrollSpeed:15,zIndex:0},this.state={sortArea:null,sortItem:null,connectNode:null,placeholder:null,sortItemsFloat:!1,targetX:0,targetY:0,targetRect:null,parent:null,parentRect:null,limitX:0,maxX:0,limitY:0,maxY:0,mouseX:0,mouseY:0,isDown:!1,isSort:!1,isMove:!1,isCancel:!1,isHandle:!1,enable:!0,disable:!1,destroy:!1,dataId:null},this.init(e),{enable:this.enable.bind(this),destroy:this.destroy.bind(this),disable:this.destroy.bind(this)}};_.prototype={uiBodyNode:null,setDefaultSortItem:function(t){var i=this,e=t.css("float");"left"!==e&&"right"!==e||(this.state.sortItemsFloat=!0),t.addClass("js2uix-sortItem"),x.loop(t,function(){var t=x(this),e=t.css("position");if("static"!==e&&"relative"!==e&&t.css("position","relative"),i.props.handle){var s=t.find(i.props.handle);0<s.length&&i.props.cursor&&""!==i.props.cursor&&s.css("cursor",i.props.cursor)}i.props.zIndex&&"number"==typeof i.props.zIndex&&t.css("z-index",parseInt(i.props.zIndex))})},setDefaultState:function(t){var e=t.children(),s=t.css("position");this.uiBodyNode=this.uiBodyNode?this.uiBodyNode:x("body"),t.addClass("js2uix-sortable").removeAttr("data-disable"),this.props.addClass&&t.addClass(this.props.addClass),this.props.userSelect||t.setAttr("data-selectable","false"),"static"===s&&t.css("position","relative"),this.setDefaultSortItem(e)},setMouseDownEventHandler:function(t){this.state.sortItem=x(x(t.target).parents(".js2uix-sortItem")[0]),this.state.isHandle=!0},setMouseUpEventHandler:function(){this.state.isHandle=!1},setSortHandleControl:function(t,e){var s=t||this.element.find(".js2uix-sortItem");if(this.props.handle&&""!==this.props.handle){var i=s.find(this.props.handle);0<i.length&&(e?(i.addClass("js2uix-sort-handle"),i.addEvent({"mousedown.js2uix-sort-handle":this.setMouseDownEventHandler.bind(this),"mouseup.js2uix-sort-handle":this.setMouseUpEventHandler.bind(this)})):(s.removeEvent("mousedown.js2uix-sort-handle"),s.removeEvent("mouseup.js2uix-sort-handle")))}else this.state.isHandle=!0},setCancelMouseDownEventHandler:function(){this.state.isCancel=!0},setCancelMouseUpEventHandler:function(){this.state.isCancel=!1},setSortCancelControl:function(t,e){if(this.props.cancel&&""!==this.props.cancel){var s=(t||this.element.find(".js2uix-sortItem")).find(this.props.cancel);0<s.length&&(e?(s.addClass("js2uix-sort-cancel"),s.addEvent({"mousedown.js2uix-sort-cancel":this.setCancelMouseDownEventHandler.bind(this),"mouseup.js2uix-sort-cancel":this.setCancelMouseUpEventHandler.bind(this)})):(s.removeEvent("mousedown.js2uix-sort-cancel"),s.removeEvent("mouseup.js2uix-sort-cancel")))}else this.state.isCancel=!1},setSortItemMouseDownHandler:function(t){var e,s,i=this.state.sortItem=x(t.target);i.hasClass("js2uix-sortItem")||(i=this.state.sortItem=i.parents(".js2uix-sortItem"));var a=this.state.sortArea=x(i.parents(".js2uix-sortable")[0]),n=a.getAttr("data-disable");this.state.placeholder||(this.state.placeholder=i.clone(!1).empty().removeAttr("class").addClass("js2uix-placeholder")),this.state.isSort=!0;var r=this.state.sortArea[0].parentNode;this.state.mouseX=t.pageX+(r.scrollLeft||0),this.state.mouseY=t.pageY+(r.scrollTop||0),this.uiBodyNode.addClass("disableSelection"),(this.state.destroy||this.state.disable||"true"===n)&&(this.state.isSort=!1),n&&"false"!==n&&void 0!==n||(this.state.isSort=!0),this.state.isSort&&this.state.enable&&(this.state.targetRect=i[0].getBoundingClientRect(),this.state.parentRect=a[0].getBoundingClientRect(),this.state.placeholder.css({width:this.state.targetRect.width,height:this.state.targetRect.height}),i.css({position:"absolute",width:this.state.targetRect.width,height:this.state.targetRect.height,left:this.state.targetRect.left-this.state.parentRect.left,top:this.state.targetRect.top-this.state.parentRect.top,"z-index":1e3}).after(this.state.placeholder),e=i.css("left"),s=i.css("top"),"auto"===e&&(e=parseInt(i[0].offsetLeft)),"auto"===s&&(s=parseInt(i[0].offsetTop)),this.setLimitedAreaForUserCommand(a,i,e,s),this.state.isCancel||this.setSortWindowControl(!0),this.setCallBackStart({sortArea:this.state.sortArea[0],sortItem:this.state.sortItem[0],index:i.index(),prevNode:i.prevNode()[0],nextNode:i.nextNode()[0]}))},setSortItemMouseUpHandler:function(){this.state.isCancel=!1},setSortItemControlEvent:function(t,e){var s=t||this.element.find(".js2uix-sortItem");0<s.length&&(e?(s.addEvent("mousedown.js2uix-sort-move",this.setSortItemMouseDownHandler.bind(this)),s.addEvent("mouseup.js2uix-sort-move",this.setSortItemMouseUpHandler.bind(this))):(s.removeEvent("mousedown.js2uix-sort-move"),s.removeEvent("mouseup.js2uix-sort-move")))},checkMouseMoveLimitAreaCheck:function(t,e){return this.props.axis&&"y"===this.props.axis&&(t<=this.state.limitX&&(t=this.state.limitX),t>=this.state.maxX&&(t=this.state.maxX)),this.props.axis&&"x"===this.props.axis&&(e<=this.state.limitY&&(e=this.state.limitY),e>=this.state.maxY&&(e=this.state.maxY)),{mouseX:t,mouseY:e}},sortConnectWidthHandler:function(t){var e,s,i=null;try{return this.props.connectWith&&0<(e=x(this.props.connectWith)).length&&(s=t[0].getBoundingClientRect(),x.loop(e,function(){var t=x(this);if(t.hasClass("js2uix-sortable")||(t=t.find(".js2uix-sortable")),0!==t.length){var e=this.getBoundingClientRect();s.right>e.left+.5*s.width&&s.left<e.right-.5*s.width&&s.bottom>e.top&&s.top<e.bottom&&(i=this)}})),i}finally{i=s=e=null}},sortPlaceHolderHandler:function(t){var s=this.state,e=s.sortArea.find(".js2uix-sortItem"),i=s.placeholder,a=t[0].getBoundingClientRect();0<e.length?x.loop(e,function(){var t=x(this),e=this.getBoundingClientRect();a.top>e.top&&a.top<e.bottom&&(s.sortItemsFloat?(a.left>e.left&&a.left<e.right&&t.after(i),a.right>e.left&&a.right<e.right&&t.before(i)):t.after(i)),a.bottom>e.top&&a.bottom<e.bottom&&(s.sortItemsFloat?(a.left>e.left&&a.left<e.right&&t.after(i),a.right>e.left&&a.right<e.right&&t.before(i)):t.before(i))}):s.sortArea.append(i)},setWindowMouseMoveHandler:function(t){var e,s,i,a,n,r,o;this.state.isSort&&this.state.isHandle&&!this.state.isCancel&&(e=t.pageX-this.state.mouseX,s=t.pageY-this.state.mouseY,i=this.checkMouseMoveLimitAreaCheck(e,s),r=this.state.sortArea[0].parentNode,a=this.state.targetX+i.mouseX,n=this.state.targetY+i.mouseY,o=this.sortConnectWidthHandler(this.state.sortItem),this.state.isMove=!(0===e||0===s),o&&(this.state.sortArea=x(o)),this.props.scroll&&(this.props.axis&&"x"===this.props.axis||(r.offsetTop+r.offsetHeight-t.pageY<this.props.scrollSensitivity?(r.scrollTop=r.scrollTop+this.props.scrollSpeed,n+=r.scrollTop):t.pageY-r.offsetTop<this.props.scrollSensitivity?(r.scrollTop=r.scrollTop-this.props.scrollSpeed,n-=r.scrollTop):n+=r.scrollTop),this.props.axis&&"y"===this.props.axis||(r.offsetLeft+r.offsetWidth-t.pageX<this.props.scrollSensitivity?(r.scrollLeft=r.scrollLeft+this.props.scrollSpeed,a+=r.scrollLeft):t.pageX-r.offsetLeft<this.props.scrollSensitivity?(r.scrollLeft=r.scrollLeft-this.props.scrollSpeed,a-=r.scrollLeft):a+=r.scrollLeft)),this.state.sortItem[0].style.left=a+"px",this.state.sortItem[0].style.top=n+"px",this.sortPlaceHolderHandler(this.state.sortItem),this.setCallBackSort({sortArea:this.state.sortArea[0],sortItem:this.state.sortItem[0],index:this.state.sortItem.index(),prevNode:this.state.sortItem.prevNode()[0],nextNode:this.state.sortItem.nextNode()[0]}))},setWindowMouseUpHandler:function(){var t,e,s,i=this.state.sortItem;if(this.state.isSort&&this.state.enable){e=(t=x(this.state.placeholder)).prevNode(),s=t.nextNode(),this.state.isMove&&this.state.sortArea.find(i).length<1&&this.state.sortArea.append(i),0<e.length?e.after(i.removeAttr("style")):s.before(i.removeAttr("style")),t.remove();var a=x(".js2uix-sortable");a.find(".js2uix-placeholder").remove(),a.find(".js2uix-sortItem").removeAttr("style"),this.state.placeholder=null,this.state.isCancel=!1,this.state.isSort=!1,this.state.isMove=!1,this.setSortWindowControl(!1),this.setCallBackStop({sortArea:this.state.sortArea[0],sortItem:this.state.sortItem[0],index:i.index(),prevNode:i.prevNode()[0],nextNode:i.nextNode()[0]})}},setSortWindowControl:function(t){t?(N.addEvent("mousemove.js2uix-"+this.state.dataId,this.setWindowMouseMoveHandler.bind(this)),N.addEvent("mouseup.js2uix-"+this.state.dataId,this.setWindowMouseUpHandler.bind(this))):(N.removeEvent("mousemove.js2uix-"+this.state.dataId),N.removeEvent("mouseup.js2uix-"+this.state.dataId))},setNewItemCreateSort:function(t){this.setDefaultSortItem(t),this.setSortHandleControl(t,!0),this.setSortCancelControl(t,!0),this.setSortItemControlEvent(t,!0)},setOldItemRemoveSort:function(t){this.setSortHandleControl(t,!1),this.setSortCancelControl(t,!1),this.setSortItemControlEvent(t,!1)},setRemoveSortNodeConstruct:function(t){var e=t.find(".js2uix-sort-handle"),s=t.find(".js2uix-sort-cancel"),i=t.find(".js2uix-sortItem");try{t[0].style.position="",t[0].style.cursor="",t[0].style.zIndex="",t.removeClass("js2uix-sortable").removeAttr("data-selectable"),e[0].style.cursor="",i.removeAttr("style"),e.removeClass("js2uix-sort-handle").removeEvent("mousedown.js2uix-sort").removeEvent("mouseup.js2uix-drag"),s.removeClass("js2uix-sort-cancel").removeEvent("mousedown.js2uix-sort").removeEvent("mouseup.js2uix-sort"),i.removeClass("js2uix-sortItem").removeEvent("mousedown.js2uix-sort").removeEvent("mouseup.js2uix-sort"),N.removeEvent("mousemove.js2uix-"+this.state.dataId),N.removeEvent("mouseup.js2uix-"+this.state.dataId)}finally{i=s=e=null}},setCallBackCreate:function(t){"function"==typeof this.props.create&&this.props.create({target:t[0],width:t.width(),height:t.height(),positionX:parseInt(t.css("left")),positionY:parseInt(t.css("top"))})},setCallBackStart:function(t){"function"==typeof this.props.start&&this.props.start(t)},setCallBackSort:function(t){"function"==typeof this.props.sort&&this.props.sort(t)},setCallBackStop:function(t){"function"==typeof this.props.stop&&this.props.stop(t)},setObserveChild:function(){l(this.element[0],function(t){if("childList"===t.type&&(0<t.addedNodes.length||0<t.removedNodes.length)){for(var e=0;e<t.addedNodes.length;e++){var s=t.addedNodes[e];s&&!x.hasClass(s,"js2uix-placeholder")&&1===s.nodeType&&(s[p]&&x.hasClass(s,"js2uix-sortItem")||this.setNewItemCreateSort(x(s)))}for(var i=0;i<t.removedNodes.length;i++){var a=t.removedNodes[i];a&&!x.hasClass(a,"js2uix-placeholder")&&1===a.nodeType&&x.hasClass(a,"js2uix-sortItem")}}}.bind(this))},enable:function(){this.state.enable=!0,this.state.destroy=!1,this.state.disable=!1,this.element.removeAttr("data-disable")},destroy:function(){this.state.enable=!1,this.state.disable=!0,this.state.destroy=!0,this.setRemoveSortNodeConstruct(this.element)},disable:function(){this.state.enable=!1,this.state.destroy=!1,this.state.disable=!0,this.element.setAttr("data-disable",!0)},init:function(t){x.extend(this.props,t),this.state.dataId=a(),this.setDefaultState(this.element),this.setSortHandleControl(null,!0),this.setSortItemControlEvent(null,!0),this.setSortCancelControl(null,!0),this.setObserveChild(),this.setCallBackCreate(this.element)}},x.extend(_.prototype,E),_.prototype.constructor=_;var k,B=function(t,e){return this.element=t,this.props={mainTitleName:"title",childDataName:"data",onClickEvent:null},this.state={treeNode:null},this.init(e),{name:this.js2uixName,setData:this.setData.bind(this)}};(B.prototype={js2uixName:"js2uix-tree",js2uixTreeContent:"js2uix-tree-content",setTreeElementStyle:function(){this.element.addClass(this.js2uixName),this.element.css({overflow:"hidden","overflow-y":"auto"})},setTreeElementNode:function(){this.state.treeNode=x.createDom("div",{className:this.js2uixTreeContent},!0),this.element.html(this.state.treeNode)},setCreateTreeItemForData:function(t){var o=this,d=this.props.mainTitleName,h=this.props.childDataName,l=function(t,e){var r=e||x.createDom("ul",{className:"js2uix-tree-group"},!0);return x.loop(t,function(t,e){var s=x.createDom("li",{className:"js2uix-tree-item"},!0),i=x.createDom("span",{className:"js2uix-tree-title",content:'<em class="js2uix-tree-icon"></em><span class="js2uix-tree-text">'+e[d]+"</span>"},!0);if(s.append(i.setAttr("data-child","false")).setAttr("data-open","false"),x.loop(e,function(t,e){s.setAttr("data-"+t,e)}),o.setDefaultControl(i,!0),e[h]&&0<e[h].length){var a=x.createDom("span",{className:"js2uix-tree-child",attributes:{"data-view":"none"}},!0),n=x.createDom("ul",{className:"js2uix-tree-group"},!0);i.setAttr("data-child","true"),a.append(l(e[h],n)),s.append(a)}r.append(s)}),r};this.state.treeNode.html(l(t))},setItemClickEventHandler:function(t){var e=t.parentNode.children[1];e&&("block"!==e.style.display?(e.style.display="block",e.setAttribute("data-view","block"),t.parentNode.setAttribute("data-open","true")):(e.style.display="none",e.setAttribute("data-view","none"),t.parentNode.setAttribute("data-open","false"),x(e).find(".js2uix-tree-item").loop(function(){this.setAttribute("data-open","false")}),x(e).find(".js2uix-tree-child").loop(function(){this.style.display="none",this.setAttribute("data-view","none")})))},setDefaultControl:function(t,e){if(e){var n=this;t.find(".js2uix-tree-text").addEvent("click.js2uix-tree-control",function(){if(n.props.onClickEvent&&"function"==typeof n.props.onClickEvent){for(var t=this.parentNode.parentNode,e={},s=0;s<t.attributes.length;s++){var i=t.attributes[s],a=i.name;"class"!==a&&"id"!==a&&"data-open"!==a&&(e[a.replace("data-","")]=i.value)}n.props.onClickEvent(e,t)}}),t.find(".js2uix-tree-icon").addEvent("click.js2uix-tree-control",function(){n.setItemClickEventHandler(this.parentNode)})}else this.element.find(".js2uix-tree-title").removeEvent("all")},setData:function(t){Array.isArray(t)&&(this.setDefaultControl(null,!1),this.setCreateTreeItemForData(t))},init:function(t){"object"==typeof t&&(x.extend(this.props,t),this.setTreeElementNode(),this.setTreeElementStyle(),this.setDefaultControl(null,!1))}}).constructor=B;var X={getDateCheckUserObject:function(t,e,s){var i=new Date;t&&e&&s?i=new Date(t,e-1,s):t&&e&&!s?i=new Date(t,e-1):!t||e||s||("number"===t?i=new Date(t):"string"===t&&(i=new Date(t)));var a,n,r=["SU","MO","TU","WE","TH","FR","SA"],o=i.getFullYear(),d=i.getMonth()+1,h=i.getDate(),l=i.getDay(),u=r[l],c=new Date(o,d-1,1),p=new Date(o,d,0),m=o,f=d-1,g=o,x=d+1;try{return 1===d&&(m=o-1,f=12),12===d&&(g=o+1,x=1),a=new Date(g,x-1,1),n=new Date(m,f,0),{current_year:o,current_month:d,current_day:h,current_weekString:u,current_weekNumber:l,current_firstDay:c.getDate(),current_firstWeekNumber:c.getDay(),current_lastDay:p.getDate(),current_lastWeekNumber:p.getDay(),next_year:g,next_month:x,next_firstDay:a.getDate(),next_firstWeekNumber:a.getDay(),prev_year:m,prev_month:f,prev_lastDay:n.getDate(),prev_lastWeekNumber:n.getDay()}}finally{n=a=x=g=f=m=p=c=u=l=h=d=o=r=i=null}}},R=function(t){var e,s,i=t;void 0!==i.currentStyle&&(e=i.currentStyle.overflow),e=e||u.getComputedStyle(i,"").overflow,void 0!==i.currentStyle&&(s=i.currentStyle.overflowY),s=s||u.getComputedStyle(i,"").overflowY;var a=i.scrollHeight>i.clientHeight,n=/^(visible|auto)$/.test(e)||/^(visible|auto)$/.test(s);return a&&n||("scroll"===e||"scroll"===s)},T=function(){return this.dom={},this.props={languageKor:{weekArray:["%EC%9D%BC","%EC%9B%94","%ED%99%94","%EC%88%98","%EB%AA%A9","%EA%B8%88","%ED%86%A0"],monthArray:[1,2,3,4,5,6,7,8,9,10,11,12],yearString:"%EB%85%84",monthString:"%EC%9B%94"},languageEng:{weekArray:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthArray:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],yearString:null,monthString:null}},this.state={active:!1,target:null,dateFormat:"yyyy-mm-dd",dateRange:null,language:"eng",onChangeDate:null,setDate:null,untilToday:!1,zIndex:99999},this.init(),{name:this.js2uixName,setCalendar:this.setCalendar.bind(this)}};T.prototype={js2uixName:"js2uix-calendar",setCalendarStateChange:function(){"eng"===this.state.language?(this.dom.headEng[0].style.display=this.dom.contentEng[0].style.display="block",this.dom.headKor[0].style.display=this.dom.contentKor[0].style.display="none"):(this.dom.headEng[0].style.display=this.dom.contentEng[0].style.display="none",this.dom.headKor[0].style.display=this.dom.contentKor[0].style.display="block")},setCalendarLayoutChange:function(t){if(t){var e=t.getBoundingClientRect(),s=parseInt(N[0].scrollTop),i=parseInt(N[0].scrollLeft),a=e.top+s+e.height+3,n=e.left+i+.5*e.width-.5*this.dom.js2uixCalendar.width();e.left<=0&&(n=e.left);try{this.state.active=!0,this.dom.monthBox[0].style.display="none",this.dom.js2uixCalendar[0].style.display="none",this.dom.js2uixCalendar.css({top:a,left:n,display:"block"})}finally{n=a=i=s=e=null}}else this.dom.js2uixCalendar.css({top:-99999,left:-99999,display:"none"})},setCreateHeaderMiddleWrap:function(){var t=x.createDom("div",{className:"js2uix-date-wrap"},!0);return this.dom.headEng=x.createDom("div",{className:"js2uix-date-eng",content:'<div class="js2uix-month-string"><span></span></div><div class="js2uix-year-string"><span></span></div>'},!0),this.dom.headKor=x.createDom("div",{className:"js2uix-date-kor",content:'<div class="js2uix-year-string"><span></span></div><div class="js2uix-date-common js2uix-date-month"><span>'+x.codeToString(this.props.languageKor.yearString)+'</span></div><div class="js2uix-month-string"><span></span></div><div class="js2uix-date-common js2uix-date-day"><span>'+x.codeToString(this.props.languageKor.monthString)+"</span></div>"},!0),t.append(this.dom.headEng,this.dom.headKor)},setCreateContentTable:function(){var t=x.createDom("div",{className:"js2uix-calendar-table"},!0);this.dom.contentHead=x.createDom("div",{className:"js2uix-table-head"},!0),this.dom.contentBody=x.createDom("div",{className:"js2uix-table-body"},!0),this.dom.contentEng=x.createDom("ul",{className:"js2uix-head-eng"},!0),this.dom.contentKor=x.createDom("ul",{className:"js2uix-head-kor"},!0),x.loop(this.props.languageEng.weekArray,function(t,e){this.dom.contentEng.append("<li><span>"+e+"</span></li>")}.bind(this)),x.loop(this.props.languageKor.weekArray,function(t,e){this.dom.contentKor.append("<li><span>"+x.codeToString(e)+"</span></li>")}.bind(this)),this.dom.contentHead.append(this.dom.contentEng,this.dom.contentKor),t.append(this.dom.contentHead,this.dom.contentBody);try{return t}finally{t=null}},setCreateMonthBoxNode:function(){var s=1,t=x.createDom("div",{className:"js2uix-calendar-select"},!0),e=x.createDom("div",{className:"js2uix-select-year",content:'<div class="js2uix-select-prev"><span></span></div><div class="js2uix-select-input"><input type="text" min="1000" max="9999" maxlength="4" /></div><div class="js2uix-select-next"><span></span></div>'}),i=x.createDom("div",{className:"js2uix-select-month",content:"<table><tbody><tr></tr><tr></tr><tr></tr></tbody></table>"}),a=i.firstChild.firstChild;try{return t.append(e,i),x.loop("kor"===this.state.language?this.props.languageKor.monthArray:this.props.languageEng.monthArray,function(t,e){a.children[s-1].innerHTML+='<td data-month="'+(t+1)+'">'+e+"</td>",(t+1)%4==0&&s++}),t}finally{a=i=e=t=null}},setCreateDefaultElement:function(){this.dom.js2uixCalendar=x.createDom("div",{className:this.js2uixName,idName:this.js2uixName,attributes:{"data-language":this.props.language}},!0),this.dom.header=x.createDom("div",{className:"js2uix-calendar-header"},!0),this.dom.headerLeft=x.createDom("div",{className:"js2uix-control-left",content:'<span class="js2uix-year-prev"></span><span class="js2uix-month-prev"></span>'}),this.dom.headerMiddle=x.createDom("div",{className:"js2uix-control-mid",content:this.setCreateHeaderMiddleWrap()},!0),this.dom.headerRight=x.createDom("div",{className:"js2uix-control-right",content:'<span class="js2uix-month-next"></span><span class="js2uix-year-next"></span>'}),this.dom.header.append(this.dom.headerLeft,this.dom.headerMiddle,this.dom.headerRight),this.dom.content=x.createDom("div",{className:"js2uix-calendar-body"},!0),this.dom.content.append(this.setCreateContentTable()),this.dom.monthBox=x.createDom("div",{className:"js2uix-calendar-hidden"},!0),this.dom.monthBox.append(this.setCreateMonthBoxNode()),this.dom.arrow=x.createDom("span",{className:"js2uix-calendar-arrow"},!0),this.dom.js2uixCalendar.append(this.dom.header,this.dom.content,this.dom.monthBox,this.dom.arrow),x("body").append(this.dom.js2uixCalendar)},setParseMinMaxDateFormat:function(){var t=null,e=null;if(this.state.dateRange&&Array.isArray(this.state.dateRange)&&0<this.state.dateRange.length){var s=this.state.dateRange[0]?this.state.dateRange[0].replace(/[^0-9]/gi,""):null,i=this.state.dateRange[1]?this.state.dateRange[1].replace(/[^0-9]/gi,""):null;(s&&8===s.length||i&&8===i.length)&&(s&&(t={year:parseInt(s.substr(0,4)),month:parseInt(s.substr(4,2)),day:parseInt(s.substr(6,2))}),i&&(e={year:parseInt(i.substr(0,4)),month:parseInt(i.substr(4,2)),day:parseInt(i.substr(6,2))}))}return{min:t,max:e}},setCalendarDateCalculation:function(t,e){if(!t)return!1;var s=this.dom.header.find(".js2uix-year-string span"),i=this.dom.header.find(".js2uix-month-string span"),a=[],n=!1,r=new Date,o=r.getFullYear(),d=r.getMonth()+1,h=r.getDate(),l=Math.ceil((e.current_firstWeekNumber+e.current_lastDay)/7),u=parseInt(e.prev_lastDay-e.prev_lastWeekNumber),c=this.setParseMinMaxDateFormat();6<=e.prev_lastWeekNumber&&(u=1),this.state.selectYear=parseInt(t.getAttribute("data-year")),this.state.selectMonth=parseInt(t.getAttribute("data-month")),this.state.selectDay=parseInt(t.getAttribute("data-day"));for(var p=1;p<=l;p++){for(var m=x.createDom("ul",{},!0),f=1;f<=7;f++){p<=2&&u>e.prev_lastDay&&(u=1,n=!0),p===l&&u>e.current_lastDay&&(n=!(u=1));var g=x.createDom("li",{attributes:{"data-day":u,"data-month":e.current_month,"data-year":e.current_year},content:"<span>"+u+"</span>"},!0);1===p&&f<=e.current_firstWeekNumber?g.addClass("js2uix-calendar-prev").setAttr({"data-year":e.prev_year,"data-month":e.prev_month}):p===l&&f>e.current_lastWeekNumber+1?g.addClass("js2uix-calendar-next").setAttr({"data-year":e.next_year,"data-month":e.next_month}):(u===h&&n&&o===e.current_year&&d===e.current_month&&g.addClass("js2uix-calendar-today"),this.state.selectDay===u&&this.state.selectYear===e.current_year&&this.state.selectMonth===e.current_month&&g.addClass("js2uix-calendar-select")),this.state.dateRange&&(e.current_year<c.min.year||e.current_year>c.max.year?g.addClass("js2uix-date-disabled"):(e.current_year===c.min.year&&e.current_month<c.min.month&&g.addClass("js2uix-date-disabled"),e.current_year===c.min.year&&e.current_month===c.min.month&&u<c.min.day&&g.addClass("js2uix-date-disabled"),e.current_year===c.max.year&&e.current_month>c.max.month&&g.addClass("js2uix-date-disabled"),e.current_year===c.max.year&&e.current_month===c.max.month&&u>c.max.day&&g.addClass("js2uix-date-disabled"))),this.state.untilToday&&(o<e.current_year||o===e.current_year&&(d<e.current_month||d===e.current_month&&(h<u||p===l&&f>e.current_lastWeekNumber+1)))&&g.addClass("js2uix-date-disabled"),m.append(g),u++}a.push(m[0])}try{s.text(e.current_year),"eng"===this.state.language?i.text(this.props.languageEng.monthArray[e.current_month-1]):i.text(e.current_month),this.dom.monthBox.find(".js2uix-select-year input")[0].value=e.current_year,this.dom.monthBox.find(".js2uix-select-month td").removeClass("on"),this.dom.monthBox.find(".js2uix-select-month td[data-month='"+e.current_month+"']").addClass("on"),this.dom.js2uixCalendar.setAttr({"data-year":e.current_year,"data-month":e.current_month}),this.setAddEventDateItem(!1),this.dom.contentBody.html(x(a)),this.setAddEventDateItem(!0)}finally{c=u=l=h=d=o=r=n=a=i=s=null}},setCalendar:function(t,e,s){x.extend(this.state,e),this.state.target=t,this.setCalendarStateChange(),this.setCalendarDateCalculation(t,this.getDateCheckUserObject(s.year,s.month,s.day)),this.setCalendarLayoutChange(t)},getSwitchDateNumber:function(t,e){var s=parseInt(this.dom.js2uixCalendar.getAttr("data-year")),i=parseInt(this.dom.js2uixCalendar.getAttr("data-month"));switch(t){case"nextMonth":12<++i&&(9999<=(s+=1)&&(s=9999),i=1);break;case"nextYear":9999<=++s&&(s=9999);break;case"prevMonth":--i<1&&((s-=1)<=1e3&&(s=1e3),i=12);break;case"prevYear":--s<=1e3&&(s=1e3);break;case"selectDate":s=e.select_input,i=e.select_number}return{year:s,month:i}},setChangeDateHandler:function(t){this.state.selectYear=t.getAttr("data-year"),this.state.selectMonth=t.getAttr("data-month"),this.state.selectDay=t.getAttr("data-day")},setCommonEventHandler:function(){this.state.active&&(this.state.active=!1,this.setCalendarLayoutChange(!1),x(".js2uix-calendar-target").removeClass("js2uix-calendar-target"))},setCommonControlHandler:function(t,e){var s=this.state.target;if(s){var i=this.getSwitchDateNumber(t,e),a=this.getDateCheckUserObject(i.year,i.month);this.setCalendarDateCalculation(s,a)}},setAddEventDateItem:function(t){if(t){var e=this;this.dom.contentBody.find("li:not(.js2uix-date-disabled)").addEvent("click.js2uix-calendar-item",function(){e.setChangeDateHandler(x(this)),e.onChangeDate(),e.setCommonEventHandler()})}else this.dom.contentBody.find("li").removeEvent("all")},setAddEventWindowControl:function(){var t=this,e=document.querySelectorAll("body, body *");try{N.addEvent("mousedown.js2uix-calendar",function(){t.setCommonEventHandler()}),u.addEventListener("scroll",function(){t.setCommonEventHandler()}),u.addEventListener("resize",function(){t.setCommonEventHandler()});for(var s=0;s<e.length;s++)R(e[s])&&e[s].addEventListener("scroll",function(){t.setCommonEventHandler()})}finally{e=null}},setAddEventCalendar:function(){var t=this,e=x(".js2uix-select-input input");this.dom.js2uixCalendar.addEvent("mousedown.js2uix-calendar",function(t){t.stopPropagation()}),x(".js2uix-month-next").addEvent("click.js2uix-calendar",function(){t.setCommonControlHandler("nextMonth")}),x(".js2uix-year-next").addEvent("click.js2uix-calendar",function(){t.setCommonControlHandler("nextYear")}),x(".js2uix-month-prev").addEvent("click.js2uix-calendar",function(){t.setCommonControlHandler("prevMonth")}),x(".js2uix-year-prev").addEvent("click.js2uix-calendar",function(){t.setCommonControlHandler("prevYear")}),x(".js2uix-control-mid").addEvent("click",".js2uix-date-wrap",function(){t.dom.monthBox[0].style.display="block"}),this.dom.monthBox.find(".js2uix-select-prev").addEvent("click.js2uix-calendar",function(){e[0].value=parseInt(e[0].value)-1}),this.dom.monthBox.find(".js2uix-select-next").addEvent("click.js2uix-calendar",function(){e[0].value=parseInt(e[0].value)+1}),this.dom.monthBox.addEvent("click.js2uix-calendar","td",function(){t.setCommonControlHandler("selectDate",{select_input:parseInt(t.dom.monthBox.find("input")[0].value),select_number:parseInt(x(this).getAttr("data-month"))}),t.dom.monthBox[0].style.display="none"}),this.dom.monthBox.find("input").addEvent("keyup.js2uix-calendar",function(){this.value=this.value.replace(/[^0-9]/g,"")})},init:function(){this.setCreateDefaultElement(),this.setAddEventWindowControl(),this.setAddEventCalendar()},onChangeDateParse:function(t){var e=t.selectYear,s=t.selectMonth,i=t.selectDay,a="0"+s,n="0"+i;return{date:e+"-"+(a=a.substr(a.length-2,2))+"-"+(n=n.substr(n.length-2,2)),year:e,month:s,day:i}},onChangeDate:function(){var t=this.onChangeDateParse(this.state);x(this.state.target).setAttr({"data-year":t.year,"data-month":t.month,"data-day":t.day}).value(t.date),this.state.onChangeDate&&"function"==typeof this.state.onChangeDate&&this.state.onChangeDate(t,this.state.target)}},x.extend(T.prototype,X),T.prototype.constructor=T;var M=function(t,e){return this.element=t,this.props={dateFormat:"yyyy-mm-dd",dateRange:null,language:"eng",onChangeDate:null,setDate:null,untilToday:!1,zIndex:99999},this.state={year:null,month:null,day:null},this.init(e),{name:this.js2uixName,setDate:this.setCalendarDate.bind(this)}};return M.prototype={js2uixName:"js2uix-calendar",setDefaultStateFormCalendar:function(){this.element.addClass("js2uix-calendar-input")},getChangeDateTypeUserDate:function(e,s,i){return this.props.dateFormat.replace(/(yyyy|yy|MM|dd)/gi,function(t){switch(t){case"yyyy":return e;case"yy":return e.toString().substring(2);case"mm":return s<10&&(s="0"+s),s;case"dd":return i<10&&(i="0"+i),i;default:return t}})},setCalendarInputAttrDate:function(t,e){t.setAttr({"data-year":e.current_year,"data-month":e.current_month,"data-day":e.current_day})},setCalendarInputStateDate:function(t){this.state.year=t.getAttr("data-year"),this.state.month=t.getAttr("data-month"),this.state.day=t.getAttr("data-day")},setInputNodeDefaultEvent:function(){var s=this;this.element.removeEvent("mouseup.js2uix-calendar-input"),this.element.addEvent("mouseup.js2uix-calendar-input",function(t){var e=x(this);e.hasClass("js2uix-calendar-target")||(s.setCalendarInputStateDate(e),x(".js2uix-calendar-target").removeClass("js2uix-calendar-target"),x(this).addClass("js2uix-calendar-target"),k.setCalendar(this,s.props,s.state)),t.stopPropagation()}),this.element.addEvent("mousedown.js2uix-calendar-input",function(t){t.stopPropagation()})},setCalendarDefaultInputDate:function(t){var e=this.element,s=t?new Date(t):new Date,i=this.state.year=s.getFullYear(),a=this.state.month=s.getMonth()+1,n=this.state.day=s.getDate(),r=this.getDateCheckUserObject(i,a,n),o=this.getChangeDateTypeUserDate(i,a,n);try{this.setCalendarInputAttrDate(e,r),e[0].value=o}finally{o=r=n=a=i=s=e=null}},setCalendarLastDateCheck:function(t,e){var s=new Date;switch(t){case"day":s.setDate(s.getDate()+e);break;case"week":s.setDate(s.getDate()+7*e);break;case"month":s.setMonth(s.getMonth()+e);break;case"year":s.setMonth(s.getMonth()+12*e)}var i=s.getFullYear(),a="0"+(s.getMonth()+1),n="0"+s.getDate();return{lastDateValue:s,lastDateString:i+"-"+(a=a.substr(a.length-2,2))+"-"+(n=n.substr(n.length-2,2))}},setCalendarDate:function(){var t=arguments;!t[0]||1===t.length&&0===t[0]?this.setCalendarDefaultInputDate():1===t.length&&"string"==typeof t[0]&&-1!==t[0].indexOf("-")?this.setCalendarDefaultInputDate(t[0]):2===t.length&&"string"==typeof t[0]&&-1!==["day","week","month","year"].indexOf(t[0])&&t[1]&&"number"==typeof t[1]&&this.setCalendarDefaultInputDate(this.setCalendarLastDateCheck(t[0],t[1]).lastDateString)},init:function(t){if("input"===this.element[0].nodeName.toLowerCase()){t&&"object"==typeof t&&x.extend(this.props,t),k||(k=new T);var e=this.props.setDate;this.setDefaultStateFormCalendar(),this.setInputNodeDefaultEvent(),e?"string"==typeof e?this.setCalendarDate(e):Array.isArray(e)&&2===e.length&&this.setCalendarDate(e[0],e[1]):this.setCalendarDate()}}},x.extend(M.prototype,X),M.prototype.constructor=M,x.extend({Calendar:function(t,e){var s=A(t);if(s&&0<s.length)return new M(s,e)},Chart:function(t,e){if(u.d3){var s=A(t);return s&&0<s.length?new j(s,e):void 0}alert("please check! d3.js api")},ComboBox:function(t,e){var s=A(t);if(s&&0<s.length)return new D(s,e)},Draggable:function(t,e){var s=A(t);if(s&&0<s.length)return new I(s,e)},GridBox:function(t){var e=A(t);if(e&&0<e.length)return new w(e)},Resizable:function(t,e){var s=A(t);if(s&&0<s.length)return new S(s,e)},Sortable:function(t,e){var s=A(t);if(s&&0<s.length)return new _(s,e)},Tree:function(t,e){var s=A(t);if(s&&0<s.length)return new B(s,e)}}),"function"==typeof define&&define.amd&&define(p,[],function(){return x}),t||(u.js2uix=x),x});